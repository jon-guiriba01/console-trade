webpackJsonp([0],{164:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(32),o=n(0),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.http=t,this.matchingTraders=[],this.loading=!1}return t.prototype.getNearestPossibleTrades=function(t,e,n){var o=this;return void 0===e&&(e=15),void 0===n&&(n=0),new Promise(function(r,a){var s=(new i.c).set("key","eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4"),c="https://lemon-data-center-js.herokuapp.com/api/getNPT?key="+t+"&limit="+e+"&offset="+n;o.loading=!0;var l=o.http.get(c,{headers:s}).subscribe(function(t){o.matchingTraders=t||[],o.loading=!1,r(o.matchingTraders),l.unsubscribe()})})},t.prototype.getNearestTrades=function(t,e,n){var o=this;return void 0===e&&(e=15),void 0===n&&(n=0),new Promise(function(r,a){var s=(new i.c).set("key","eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4"),c="https://lemon-data-center-js.herokuapp.com/api/getNT?key="+t+"&limit="+e+"&offset="+n;o.loading=!0;var l=o.http.get(c,{headers:s}).subscribe(function(t){o.matchingTraders=t||[],o.loading=!1,r(o.matchingTraders),l.unsubscribe()})})},t=r([Object(o.A)(),a("design:paramtypes",[i.a])],t)}()},165:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(13),r=n(41),a=n(52),s=n(39),c=n(309),l=(n.n(c),n(166)),d=n(311),f=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,i,o,r,a){var s=this;this.navCtrl=t,this.navParams=e,this.profile=n,this.fbApp=i,this.auth=o,this.app=r,this.popoverCtrl=a,this.message="",this.thread=[],this.userOfferedGames=[],this.traderOfferedGames=[],this.courier={name:"No Courier Selected"},this.trader=e.get("trader"),this.converKey=this.fbApp.getTraderConversationKey(this.trader,this.profile.user),this.fbApp.readConversation(this.converKey,this.profile.user.key),this.converKey&&(this.chatSub=this.fbApp.getConversationMessages(this.converKey).subscribe(function(t){s.thread=t,s.fbApp.readConversation(s.converKey,s.profile.user.key)}),this.observeTraderOfferedGames(),this.observeUserOfferedGames())}return t.prototype.observeTraderOfferedGames=function(){var t=this;this.traderOfferedGamesSub=this.fbApp.getOfferedGames(this.trader.key,this.converKey).subscribe(function(e){if(t.traderOfferedGames=e,t.trader.matchingTrades)for(var n=0,i=e;n<i.length;n++)for(var o=i[n],r=0,a=t.trader.matchingTrades;r<a.length;r++){var s=a[r];o.id===s.id&&(s.isSelected=!0)}})},t.prototype.observeUserOfferedGames=function(){var t=this;this.userOfferedGamesSub=this.fbApp.getOfferedGames(this.profile.user.key,this.converKey).subscribe(function(e){t.userOfferedGames=e,t.trader.matchingWishes||(t.trader.matchingWishes=[]);for(var n=0,i=e;n<i.length;n++)for(var o=i[n],r=0,a=t.trader.matchingWishes;r<a.length;r++){var s=a[r];o.id===s.id&&(s.isSelected=!0)}})},t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){},t.prototype.ionViewDidLeave=function(){this.chatSub&&this.chatSub.unsubscribe(),this.userOfferedGamesSub&&this.userOfferedGamesSub.unsubscribe(),this.traderOfferedGamesSub&&this.traderOfferedGamesSub.unsubscribe()},t.prototype.send=function(){var t=this;this.converKey?this.fbApp.updateConversation(this.converKey,this.trader,this.profile.user,this.message):(this.converKey=this.fbApp.createNewThread(this.trader,this.profile.user,this.message).key,console.log("PUSH CHAT "+this.converKey),this.chatSub=this.fbApp.getConversationMessages(this.converKey).subscribe(function(e){t.thread=e,t.fbApp.readConversation(t.converKey,t.profile.user.key)})),this.message=""},t.prototype.navToMap=function(){this.app.getRootNavs()[0].push(l.a,{target:this.trader})},t.prototype.selectGame=function(t){var e=this;clearTimeout(this.saveTimeout),t.isSelected?(t.isSelected=!1,this.userOfferedGames=this.userOfferedGames.filter(function(e){return e.id!=t.id})):(t.isSelected=!0,this.userOfferedGames.push(t)),setTimeout(function(){e.fbApp.updateConversationOffers(e.profile.user.key,e.converKey,e.userOfferedGames)},500)},t.prototype.selectCourier=function(){var t=this,e=this.popoverCtrl.create(d.a);e.present(),e.onDidDismiss(function(e){e&&(t.courier=e)})},t=f([Object(i.m)({selector:"page-chat",template:'\x3c!--\n  Generated template for the ChatPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header >\n\n  <ion-navbar>\n    <ion-title>{{trader.first_name + " " + trader.last_name}}</ion-title>\n  </ion-navbar>\n</ion-header>\n  <h5 name="menu" menuToggle class="menu-toggle-forced">TRADE DETAILS</h5>\n<ion-content cpadding>\n\n\t<div class="thread">\n\t\t<div class="chat-message" [ngClass]="{\'trader-message\': message.senderKey !== profile.user.key}" *ngFor="let message of thread">\n\t\t\t<h5>{{message.text}}</h5>\n\t\t</div>\n\t</div>\n\n\t<div class="message-input message-input">\n\t\t\t<ion-input [(ngModel)]="message" placeholder="Type a message..." (keyup.enter)="send()">\n\t\t\t</ion-input>\n\t\t\t<button (click)="send()">Send</button>\n\t</div>\n</ion-content>\n\n\n<ion-nav #chatMenu [root]="rootPage">\n</ion-nav>\n\n<ion-menu class="chat-menu" side="right" [content]="chatMenu">\n  <ion-content>\n  \t<ion-header>\n  \t\t<h5>Preferred Trading Locations</h5>\n      <button ion-button class="location-btn" (click)="navToMap()">\n        <ion-icon name="compass"></ion-icon>\n      </button>\n  \t</ion-header>\n  \t<ion-list class="location-list">\n  \t\t<ion-item *ngFor="let tradeLocation of trader.trade_locations">\n  \t\t\t{{tradeLocation}}\n  \t\t</ion-item>\n  \t</ion-list>\n\n    <h5 class="divider" *ngIf="trader.matchingTrades">{{trader.first_name + " " + trader.last_name}} matches</h5>\n    <div class="trade-grid">\n      <div class="trade-item" *ngFor="let item of trader.matchingTrades">\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}"></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n        <img class="select-icon" *ngIf="item.isSelected" src="assets/imgs/selector_green.png">\n      </div>\n    </div>\n\n    <h5 class="divider" *ngIf="trader.matchingWishes">{{profile.user.first_name + " " + profile.user.last_name}} matches</h5>\n \t\t<div class="trade-grid" >\n\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingWishes" (click)="selectGame(item)">\n\t \t\t\t<img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}"></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n        <img class="select-icon" *ngIf="item.isSelected" src="assets/imgs/selector_orange.png">\n\t \t\t</div>\n \t\t</div>\n    <div class="action-row" style="display: none;">\n      <h5 class="methodText">{{courier.name}} <span *ngIf="courier.price">&#8369;</span>{{courier.price}}</h5>\n      \x3c!-- <h5 class="action-option meetup" (click)="selectMeetup()">MEETUP</h5> --\x3e\n      <button ion-button class="action-option courier" (click)="selectCourier()"> SELECT COURIER</button>\n      \x3c!-- <h5 class="action-option courier" (click)="selectCourier()">SELECT COURIER</h5> --\x3e\n    </div>\n  </ion-content>\n</ion-menu>'}),p("design:paramtypes",[o.g,o.h,r.a,a.a,s.a,o.a,o.j])],t)}()},166:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),o=n(13),r=n(41),a=n(95),s=n(52),c=n(310),l=(n.n(c),this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}),d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,n,i,o,r,a){this.navCtrl=t,this.navParams=e,this.platform=n,this.geolocation=i,this.profile=o,this.fbApp=r,this.loadCtrl=a,this.markers=[],this.searchInput="",this.canEdit=!0,this.target=this.profile.user,this.sessionToken=new google.maps.places.AutocompleteSessionToken}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){var t=this;this.target=this.profile.user;var e=this.navParams.get("target");e&&(this.canEdit=!1,e.target_locations||(e.target_locations=[]),this.target=e),this.platform.ready().then(function(){google&&(t.geocoder=new google.maps.Geocoder,t.places=new google.maps.places.AutocompleteService,t.initMap())})},t.prototype.searchLocation=function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.places.getPlacePredictions({input:t.searchInput,sessionToken:t.sessionToken},function(t){})},500)},t.prototype.initMap=function(){var t=this;this.geolocation.getCurrentPosition().then(function(e){var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);t.map=new google.maps.Map(t.mapElement.nativeElement,{zoom:15,disableDefaultUI:!0,center:n}),t.addMarker(n,{label:"YOU",remember:!1}),t.initAutoComplete(e),t.initClickEvent(),t.target.trade_locations&&t.initMarkers(t.target.trade_locations)}).catch(function(t){console.log("errrr",t)})},t.prototype.initMarkers=function(t){for(var e=this,n=0,i=t;n<i.length;n++){this.geocoder.geocode({address:i[n]},function(t,n){"OK"===n?e.addMarker(t[0].geometry.location):console.log("Geocode was not successful for the following reason: "+n)})}},t.prototype.initAutoComplete=function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),n=document.getElementById("autocomplete");this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(n);var i=new google.maps.Circle({center:e,radius:t.coords.accuracy});this.places=new google.maps.places.PlacesService(this.map);var o=this;new google.maps.places.Autocomplete(n,{bounds:i.getBounds(),strictBounds:!0}).addListener("place_changed",function(){var t=this.getPlace();t&&t.geometry&&(o.map.panTo(t.geometry.location),o.map.setZoom(15),o.addMarker(t.geometry.location),o.addTradeLocation(n.value))})},t.prototype.clearAutocomplete=function(){c("#autocomplete").val("")},t.prototype.initClickEvent=function(){var t=this;this.canEdit&&this.map.addListener("click",function(e){var n=t.loadCtrl.create();n.present();e.latLng.lat(),e.latLng.lng();t.geocoder.geocode({location:e.latLng},function(i){i&&(t.addMarker(e.latLng),t.addTradeLocation(i[0].formatted_address),n.dismiss())})})},t.prototype.addTradeLocation=function(t){var e=this;this.canEdit&&(clearTimeout(this.dbTimeout),this.target.trade_locations.push(t),this.target.trade_locations.length>3&&this.removeLastTradeLocation(),this.dbTimeout=setTimeout(function(){e.fbApp.updateUserTradeLocations(e.target.key,e.target.trade_locations)},500))},t.prototype.removeLastTradeLocation=function(){this.target.trade_locations.shift();this.markers[0].setMap(null),this.markers.shift()},t.prototype.addMarker=function(t,e){void 0===e&&(e=null),e=e||{remember:!0};var n=new google.maps.Marker({map:this.map,position:t,label:e.label,icon:e.icon});e.remember&&this.markers.push(n)},t.prototype.setMapOnAll=function(t){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(t)},t.prototype.clearMarkers=function(){this.setMapOnAll(null)},t.prototype.deleteMarkers=function(){this.clearMarkers(),this.markers=[]},t.prototype.findLocation=function(t){var e=this;this.map&&this.geocoder.geocode({address:t},function(t,n){"OK"===n?(e.map.panTo(t[0].geometry.location),e.map.setZoom(15)):console.log("Geocode was not successful for the following reason: "+n)})},l([Object(i._8)("map"),d("design:type",i.t)],t.prototype,"mapElement",void 0),t=l([Object(i.m)({selector:"page-map",template:'<ion-header >\n\n  <ion-navbar>\n    <ion-title *ngIf="canEdit">Pick preferred trade locations</ion-title>\n    <ion-title *ngIf="!canEdit">{{target.first_name + " " + target.last_name}}\'s preferred trade locations</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content >\n\n  <h5 class="status-msg">Loading Map</h5>\n\t<input id="autocomplete" class="display-none" type="text" [ngModel]="searchInput" (ionChange)="searchLocation" (click)="clearAutocomplete()">\n  <div #map id="map" style="height: 100%;"></div>\n\n  <div class="trade-locations-container">\n  \t\x3c!-- <h5 class="trade-location-header">Trade Locations</h5> --\x3e\n     <h5 class="trade-location" *ngFor="let tradeLocation of target.trade_locations" (click)="findLocation(tradeLocation)">{{tradeLocation}}</h5>\n  </div>\n\n</ion-content>\n\n'}),d("design:paramtypes",[o.g,o.h,o.i,a.a,r.a,s.a,o.f])],t)}()},167:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(13),o=n(32),r=n(0),a=n(41),s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this.http=t,this.loadCtrl=e,this.profile=n,this.unreadMsgCnt=0,this.traders=[],this.traderTemp=[]}return t.prototype.loadConversations=function(t){var e=this,n=this.loadCtrl.create();n.present(),t.getUserConversations(this.profile.user).subscribe(function(i){if(e.unreadMsgCnt=0,n.dismiss(),i){var o=[];for(var r in i){o.push(e.addTraderToList(t,i[r]))}Promise.all(o).then(function(t){var n=t.filter(function(t){return t.hasUnreadMessage}),i=t.filter(function(t){return!t.hasUnreadMessage});e.traders=n.concat(i)})}})},t.prototype.addTraderToList=function(t,e){var n=this;return new Promise(function(i,o){t.getProfile(e.traderKey).then(function(t){t.hasUnreadMessage=e.unread,e.unread&&n.unreadMsgCnt++,i(t)})})},t=s([Object(r.A)(),c("design:paramtypes",[o.a,i.f,a.a])],t)}()},168:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(32),o=n(0),r=n(97),a=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.http=t,this.searchOptions=[]}return t.prototype.search=function(t){for(var e=this,n=(new i.c).set("user-key","5227ae6e46cee2806cf25779d4c97966").set("Accept","application/json"),o="0",r=[3,6,9,12,14,41,48,49,92,130],a=1;a<164;a++)r.indexOf(a)>-1||(o+=","+a);var s="https://api-endpoint.igdb.com/games/?search="+t+"&filter[release_dates.platform][not_in]="+o+"&filter[category][eq]=0&filter[release_dates.platform][exists]&fields=*";return new Promise(function(t,i){var o=e.http.get(s,{headers:n}).subscribe(function(n){for(var i="",r=!0,a=0,s=n;a<s.length;a++){var c=s[a];i+=r?c.id:","+c.id,r=!1}var l=e.removeUnsupportedPlatforms(n);t(l),o.unsubscribe()})})},t.prototype.removeUnsupportedPlatforms=function(t){return t.filter(function(t){if(t.platforms)return-1!=t.platforms.indexOf(r.a.PS4_ID)||-1!=t.platforms.indexOf(r.a.XBOX1_ID)||-1!=t.platforms.indexOf(r.a.NS_ID)})},t=a([Object(o.A)(),s("design:paramtypes",[i.a])],t)}()},170:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(0),o=n(24),r=n(13),a=n(328),s=n(329),c=n(96),l=n(39),d=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n){this.navCtrl=t,this.auth=e,this.loginForm=n.group({email:["",o.g.compose([o.g.required,o.g.email])],password:["",o.g.compose([o.g.required,o.g.minLength(3)])]})}return t.prototype.login=function(){var t=this,e=this.loginForm.value;if(e.email){this.auth.signInWithEmail({email:e.email,password:e.password}).then(function(){return t.navCtrl.setRoot(c.a)},function(e){return t.loginError=e.message})}},t.prototype.signup=function(){this.navCtrl.push(a.a)},t.prototype.loginWithGoogle=function(){this.auth.googleLogin()},t.prototype.onSignIn=function(){},t.prototype.navToPassword=function(){this.navCtrl.push(s.a)},t=d([Object(i.m)({selector:"page-login",template:'<ion-content class="page-content" padding>\n  <form [formGroup]="loginForm">\n      <ion-list inset>\n        <ion-item [ngClass]="{ invalid: emailErrors.hasError(\'*\', [\'touched\', \'dirty\']) }">\n          <ion-input type="text" placeholder="Email" formControlName="email"></ion-input>\n        </ion-item>\n\n        <div ngxErrors="email" #emailErrors="ngxErrors">\n        </div>\n\n        <ion-item [ngClass]="{ invalid: passwordErrors.hasError(\'*\', [\'touched\']) }">\n          <ion-input type="password" placeholder="Password" formControlName="password"></ion-input>\n        </ion-item>\n\n        <div ngxErrors="password" #passwordErrors="ngxErrors">\n         \n        </div>\n      </ion-list>\n\n      <div padding-horizontal>\n        <div class="form-error" *ngIf="loginError" style="color: #cc0000;">Unable to login with username / password</div>\n\n        <button class="login-btn" ion-button full type="submit" [disabled]="!loginForm.valid" (click)="login()" >Log in</button>\n        <div class="login-footer">\n          <p (click)="navToPassword()">\n            <a href="#">Forgot password?</a>\n          </p>\n        </div>\n      </div>\n\n        <ion-list class="login-options-list">\n       \x3c!--    <button ion-button icon-start block clear (click)="loginWithGoogle()">\n            <ion-icon name="logo-google"></ion-icon>\n            Log in with Google\n          </button> --\x3e\n\n          <button ion-button icon-start block clear (click)="signup()">\n            <ion-icon name="person-add"></ion-icon>\n            Sign up\n          </button>\n        </ion-list>\n    </form>\n</ion-content>\n'}),f("design:paramtypes",[r.g,l.a,o.a])],t)}()},204:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=204},247:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=247},297:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(){this.profileImage="",this.first_name="",this.last_name="",this.email="",this.key="",this.wishList=[],this.ownedList=[],this.consoles=[],this.trade_locations=[],this.last_location={},this.gender="m"}return t.prototype.addToWishList=function(t){this.wishList.length>8||this.wishList.push(t)},t.prototype.addToOwnedList=function(t){this.ownedList.length>8||this.ownedList.push(t)},t}()},308:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(0),o=n(13),r=n(41),a=n(164),s=n(165),c=n(309),l=(n.n(c),n(312)),d=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n,i,o,r,a,s){var c=this;this.navCtrl=t,this.platform=e,this.trade=n,this.profile=i,this.app=o,this.events=r,this.storage=a,this.loadCtrl=s,this.refresh=!0,this.showDisclaimer=!0,this.showMatchingOnly=!0,this.offset=0,this.limit=15,this.traders=[],this.hasMore=!1,this.events.subscribe("profile:changed",function(t){c.refresh=!0}),this.storage.get("showDisclaimer").then(function(t){c.showDisclaimer=!t})}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){this.refresh&&(this.refresh=!1,this.getTrades(this.profile.user.key,15,0))},t.prototype.showChat=function(t){this.app.getRootNavs()[0].push(s.a,{trader:t})},t.prototype.expandToggle=function(t){t.expanded=!t.expanded},t.prototype.confirmDisclaimer=function(){this.showDisclaimer=!1,this.storage.set("showDisclaimer",!0)},t.prototype.toggleTraders=function(){this.showMatchingOnly=!this.showMatchingOnly,this.offset=0,this.hasMore=!1,this.getTrades(this.profile.user.key,this.limit,this.offset)},t.prototype.showMore=function(){this.offset++,this.getTrades(this.profile.user.key,this.limit,this.offset,!0)},t.prototype.getTrades=function(t,e,n,i){var o=this;void 0===e&&(e=15),void 0===n&&(n=0),void 0===i&&(i=!1),this.showMatchingOnly?this.trade.getNearestPossibleTrades(t,e,n).then(function(t){o.hasMore=15==t.length,o.traders=i?o.traders.concat(t):t}):this.trade.getNearestTrades(t,e,n).then(function(t){o.hasMore=15==t.length,o.traders=i?o.traders.concat(t):t})},t=d([Object(i.m)({selector:"page-trade",template:'<ion-content style="margin-top: 35px; padding-bottom: 90px;">\n\x3c!-- <div style="height: 100%;" (click)="getNearestPossibleTrades()">\n\t\n</div> --\x3e\n\t<ion-spinner *ngIf="trade.loading" name="bubbles"></ion-spinner>\n<div *ngIf="showDisclaimer">\n\t<div class="warning-msg">\n\t\tAll games traded are expected to be working with no issues and within its proper casing.\n\t\tIf the game is not in good condition please return it immediately. Console Nation is not responsible for any damages regarding transactions. Compensatory, direct, incidental, consequential \tor otherwise.\n\t</div>\n\t<h5 class="iunderstand" (click)="confirmDisclaimer()"> I Understand</h5>\n</div>\n\n\t<h4  style="padding: 5px 5px 0 16px;">Matches found</h4>\n\t<button ion-button class="view-market-btn" (click)="toggleTraders()">\n\t\t<span *ngIf="showMatchingOnly">Show All</span>\n\t\t<span *ngIf="!showMatchingOnly">Show Matching Only</span>\n\t</button>\n\t<div style="position: relative; margin-bottom: 100px;">\n\n\t\t<div >\n\t\t \t<ion-item class="matching-trades" *ngFor="let trader of traders" no-lines>\n\n\t\t \t\t<div class="info-row">\n\t\t\t \t\t<ion-icon *ngIf="!trader.expanded" name="arrow-dropdown" (click)="expandToggle(trader)"></ion-icon>\n\t\t\t \t\t<ion-icon *ngIf="trader.expanded" name="arrow-dropup" (click)="expandToggle(trader)"></ion-icon>\n\t\t\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} has</h5>\n\t\t \t\t\t<h5 class="trader-distance">{{trader.distance | ceil}}m away</h5>\n\t\t \t\t\t<ion-icon class="chat-icon" style="color: #fff;" name="chatbubbles" (click)="showChat(trader)"></ion-icon>\n\t\t\t \t\t\x3c!-- <h5 class="info-matches">{{trader.matchingTrades.length}} matches</h5> --\x3e\n\t\t \t\t</div>\n\t\t\t \t\t<div class="trade-grid">\n\n\t\t\t \t\t\t<div *ngIf="showMatchingOnly">\n\t\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingTrades">\n\t\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t        <h5 *ngIf="!item.cover_url" class="trade-img-title">{{item.name}}</h5>\n\t\t\t\t\t \t\t</div>\n\t\t\t\t\t \t</div>\n\n\t\t\t \t\t\t<div *ngIf="!showMatchingOnly">\n\t\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.ownedList">\n\t\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url"  class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t        <h5 *ngIf="!item.cover_url" class="trade-img-title">{{item.name}}</h5>\n\t\t\t\t\t \t\t</div>\n\t\t\t \t\t\t</div>\n\n\t\t\t \t\t</div>\n\t\t \t\t<div *ngIf="trader.expanded">\n\t\t\t \t\t<div class="info-row">\n\t\t\t\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} wants</h5>\n\t\t\t \t\t</div>\n\t\t\t \t\t<div class="trade-grid ">\n\n\t\t\t \t\t\t<div *ngIf="showMatchingOnly">\n\t\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingWishes">\n\t\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url"  class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t        <h5 *ngIf="!item.cover_url" class="trade-img-title">{{item.name}}</h5>\n\t\t\t\t\t \t\t</div>\n\t\t\t \t\t\t</div>\n\n\t\t\t \t\t\t<div *ngIf="!showMatchingOnly">\n\t\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.wishList">\n\t\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url"  class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t        <h5 *ngIf="!item.cover_url" class="trade-img-title">{{item.name}}</h5>\n\t\t\t\t\t \t\t</div>\n\t\t\t \t\t\t</div>\n\n\t\t\t \t\t</div>\n\t\t \t\t\t\n\t\t \t\t</div>\n\t\t \t</ion-item>\n\t\t</div>\n\t\t<button ion-button class="more-btn" *ngIf="hasMore" (click)="showMore()">Show more</button>\n\n\t\x3c!-- \t<div *ngIf="!showMatchingOnly">\n\t\t \t<ion-item class="matching-trades" *ngFor="let trader of traders" no-lines>\n\n\t\t \t\t<div class="info-row">\n\t\t\t \t\t<ion-icon *ngIf="!trader.expanded" name="arrow-dropdown" (click)="expandToggle(trader)"></ion-icon>\n\t\t\t \t\t<ion-icon *ngIf="trader.expanded" name="arrow-dropup" (click)="expandToggle(trader)"></ion-icon>\n\t\t\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} has</h5>\n\t\t \t\t\t<h5 class="trader-distance">{{trader.distance | ceil}}m away</h5>\n\t\t \t\t\t<ion-icon style="color: #fff;" name="chatbubbles" (click)="showChat(trader)"></ion-icon>\n\t\t \t\t</div>\n\t\t\t \t\t<div class="trade-grid">\n\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.wishList">\n\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t \t\t</div>\n\t\t\t \t\t</div>\n\t\t \t\t<div *ngIf="trader.expanded">\n\t\t\t \t\t<div class="info-row">\n\t\t\t\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} wants</h5>\n\t\t\t \t\t</div>\n\t\t\t \t\t<div class="trade-grid ">\n\t\t\t\t \t\t<div class="trade-item" *ngFor="let item of trader.ownedList">\n\t\t\t\t \t\t\t<img-loader *ngIf="item.cover_url"  class="fit-img" src="{{item.cover_url }}"></img-loader>\n\t\t\t        <img *ngIf="!item.cover_url" class="fit-img" >\n\t\t\t\t \t\t</div>\n\t\t\t \t\t</div>\n\t\t \t\t\t\n\t\t \t\t</div>\n\t\t \t</ion-item>\n\t\t</div --\x3e\n\n\t</div>\n \t<h5 class="status-msg" *ngIf="traders.length == 0 && !trade.loading">\n \t\tNo matching trader found near your area. Check again in a while.\n \t</h5>\n</ion-content>'}),f("design:paramtypes",[o.g,o.i,a.a,r.a,o.a,o.b,l.b,o.f])],t)}()},311:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),o=n(13),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e,n,i){this.navCtrl=t,this.navParams=e,this.popoverCtrl=n,this.viewCtrl=i,this.couriers=[{id:0,logo:"assets/imgs/courier_express_logo.png",name:"Courier Express",price:200},{id:1,logo:"assets/imgs/lalamove_logo.png",name:"Lalamove",price:300}]}return t.prototype.ionViewDidLoad=function(){},t.prototype.selectCourier=function(t){this.viewCtrl.dismiss(this.couriers[t])},t=r([Object(i.m)({selector:"page-courier-popover",template:'<ion-content>\n\t<ion-list>\n\t\t<ion-item class="courier-item" *ngFor="let courier of couriers">\n\t\t\t<img src="{{courier.logo}}" (click)="selectCourier(courier.id)"><h5 >&#8369; {{courier.price}}</h5>\n\t\t</ion-item>\n\t</ion-list>\n</ion-content>\n'}),a("design:paramtypes",[o.g,o.h,o.j,o.l])],t)}()},313:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),o=n(13),r=n(41),a=n(167),s=n(52),c=n(165),l=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,n,i,o,r,a){this.navCtrl=t,this.profile=e,this.fbApp=n,this.app=i,this.events=o,this.loadCtrl=r,this.messages=a}return t.prototype.ionViewWillEnter=function(){},t.prototype.showChat=function(t){var e=[];if(t.ownedList)for(var n=0,i=t.ownedList;n<i.length;n++)for(var o=i[n],r=0,a=this.profile.user.wishList;r<a.length;r++){a[r].id===o.id&&e.push(o)}var s=[];if(t.wishList)for(var l=0,d=t.wishList;l<d.length;l++)for(var f=d[l],p=0,u=this.profile.user.ownedList;p<u.length;p++){var m=u[p];m.id===f.id&&s.push(m)}t.matchingTrades=e,t.matchingWishes=s,this.app.getRootNavs()[0].push(c.a,{trader:t})},t.prototype.getRandomPic=function(){return"assets/imgs/temp_profile_img_"+this.getRandomInt(1,2)+".png"},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t=l([Object(i.m)({selector:"page-messages",template:'<ion-content style="margin-top: 50px;">\n    <ion-item *ngFor="let trader of messages.traders" (click)="showChat(trader)" no-lines>\n        <div class="message-container">\n            <div class="trader-img-container">\n                <img class="fit-img" src="{{trader.profileImage}}"> \n            </div>\n            <div class="trader-info">\n                <h5 class="trader-name">{{trader.first_name + " " + trader.last_name}} </h5>\n            </div>\n            <h5 *ngIf="trader.hasUnreadMessage" class="notification">!</h5>\n        </div>\n\x3c!--         <div class="message-container">\n            <div class="trader-info">\n                <h5 class="trader-name">{{trader.first_name + " " + trader.last_name}} </h5>\n            </div>\n            <div class="matches">\n                <div class="trade-item"  *ngFor="let item of trader.ownedList">\n                    <ng-container *ngIf="profile.isItemMatch(item)">\n                        <h5>{{item.name}}</h5>\n                    </ng-container>\n                </div>\n            </div>\n        </div> --\x3e\n    </ion-item>\n</ion-content>\n'}),d("design:paramtypes",[o.g,r.a,s.a,o.a,o.b,o.f,a.a])],t)}()},314:function(t,e,n){"use strict";n.d(e,"a",function(){return O});var i=n(0),o=n(13),r=n(39),a=n(41),s=n(168),c=n(315),l=n(97),d=n(316),f=n(166),p=n(318),u=n(98),m=n(319),h=n(320),g=n(310),v=(n.n(g),n(321)),b=n(52),y=n(323),_=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},w=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},O=function(){function t(t,e,n,i,o,r,a,s,c,l,d,f,p,u,m,h){this.navCtrl=t,this.igdb=e,this.auth=n,this.profile=i,this.imgLoader=o,this.app=r,this.events=a,this.transfer=s,this.file=c,this.fileChooser=l,this.imagePicker=d,this.platform=f,this.fbApp=p,this.fbStorage=u,this.loadingCtrl=m,this.imageResizer=h,this.searchIsLoading=!1,this.searchOptions=[],o.setBackgroundSize("cover")}return t.prototype.toggleItemList=function(t,e){this.profile.toggleItemList(this.auth.user,t,e),this.events.publish("profile:changed")},t.prototype.toggleItemPlatform=function(t,e,n){this.profile.toggleItemPlatform(this.auth.user,t,e,n),this.events.publish("profile:changed")},t.prototype.removeItem=function(t,e){this.profile.removeItem(this.auth.user,t,e),this.events.publish("profile:changed")},t.prototype.searchtTitle=function(){var t=this;this.searchIsLoading=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.searchInput||t.searchInput.length<2?t.clearSearch():t.igdb.search(t.searchInput).then(function(e){t.searchOptions=e,0==e.length&&t.searchOptions.push({id:"err",name:"No Games Found"}),t.searchIsLoading=!1})},300)},t.prototype.clearSearch=function(){this.searchIsLoading=!1,this.searchOptions=[]},t.prototype.addGameToProfile=function(t){this.searchInput=null,this.searchOptions=[];var e=[""];t.platforms&&(t.platforms.includes(l.a.PS4_ID)&&e.push(l.a.PS4),t.platforms.includes(l.a.NS_ID)&&e.push(l.a.NS),t.platforms.includes(l.a.XBOX1_ID)&&e.push(l.a.XBOX1));var n=null;t.cover&&(n=t.cover.url.replace("thumb","cover_big").replace("//","http://"));var i=new c.a(t.id,t.name,n,e);this.profile.addGameToProfile(this.auth.user,i,!1),this.events.publish("profile:changed")},t.prototype.navToMap=function(){this.app.getRootNavs()[0].push(f.a)},t.prototype.uploadImage=function(){this.platform.is("core")?this.uploadImage_web():this.platform.is("android")&&this.uploadImage_and()},t.prototype.uploadImage_and=function(){var t=this;return new Promise(function(e,n){t.imagePicker.getPictures({maximumImagesCount:1,outputType:0}).then(function(e){if(e){return t.file.resolveLocalFilesystemUrl(e[0])}}).then(function(e){return t.imageResizer.resize({uri:e.nativeURL,quality:100,width:90,height:180})}).then(function(e){return t.file.resolveLocalFilesystemUrl(e)}).then(function(e){return t.file.readAsDataURL(e.filesystem.root.nativeURL,e.name)}).then(function(e){t.storeImage(e)}).catch(function(t){return console.log(t)})})},t.prototype.uploadImage_web=function(){var t=this;g("#fileInput").trigger("click"),g("#fileInput").change(function(){var e=g("#fileInput")[0].files[0];e&&t.getBase64(e).then(function(e){t.storeImage(e),g("#fileInput").val("")})})},t.prototype.storeImage=function(t){var e=this,n=this.loadingCtrl.create({content:"Uploading image..."});n.present(),this.fbStorage.uploadImage(t,this.profile.user.email).then(function(t){e.fbApp.updateUserProfileImage(e.profile.user.key,t),e.profile.user.profileImage=t,n.dismiss()}).catch(function(t){console.log("storeImage",t),n.dismiss()})},t.prototype.getBase64=function(t){return new Promise(function(e,n){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){e(i.result)},i.onerror=function(t){n(t)}})},t.prototype.getExt=function(t){var e=t.lastIndexOf(".");return e<1?"":t.substr(e+1)},t=_([Object(i.m)({selector:"page-profile",template:'<ion-content (click)="clearSearch()">\n\n<input id="fileInput" type="file" style="display: none" accept="image/*"/>\n\n<div class="profile">\n\n  <div class="profile-image">\n\n    <img-loader class="circle-head" src="{{profile.user.profileImage}}" (click)="uploadImage()"></img-loader>\n\n  </div>\n\n  <div class="profile-info-wrapper">\n\n    <div class="profile-info">\n\n        <h4>{{profile.user.first_name + " " + profile.user.last_name}}</h4>\n\n        \x3c!-- <ion-icon name="create"></ion-icon> --\x3e\n\n      \x3c!-- <h5>{{profile.user.location}}</h5> --\x3e\n\n    </div>\n\n  </div>\n\n  <button class="set-location-btn" ion-button (click)="navToMap()">\n\n    Set Trade Locations\n\n  </button>\n\n</div>\n\n\n\n<hr inset padding-horizontal style="background-color: #fff;">\n\n\n\n<div class="trade-info" >\n\n  \n\n  <div class="game-input-wrapper">\n\n    <ion-spinner *ngIf="searchIsLoading" class="search-spinner" name="dots"></ion-spinner>        \n\n    <ion-item  inset class="game-input" no-lines>\n\n      <ion-input (ionChange)="searchtTitle()" type="text" [(ngModel)]="searchInput" placeholder="Search game titles">\n\n      </ion-input>\n\n    </ion-item>\n\n    <h5 float-right class="tip-text">*tap games to toggle, hold to delete</h5>\n\n    <div class="autocomplete">\n\n      <ion-list>\n\n        <ion-item class="autocomplete-item" *ngFor="let item of searchOptions" (click)="addGameToProfile(item)">\n\n          \x3c!-- <img *ngIf="item.cover != null" src="{{item.cover.url}}"> --\x3e\n\n          <h5>{{item.name}}</h5>\n\n        </ion-item>\n\n      </ion-list>\n\n    </div>\n\n  </div>\n\n  \n\n  <h5 class="divider" style="margin-top: 30px;">Looking for</h5>\n\n  <h5 class="display-text" *ngIf="profile.user.wishList.length == 0">Add games you want to have</h5>\n\n  <div class="display-grid">\n\n    <div class="trade-item" *ngFor="let item of profile.user.wishList">\n\n      <div ion-long-press class="trade-img" (click)="toggleItemList(item, false)" [interval]="400" (onPressing)="removeItem(item, false)">\n\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n\n      </div>\n\n      <div class="platforms">\n\n        <img (click)="toggleItemPlatform(item, \'xbox1\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n\n        <img (click)="toggleItemPlatform(item, \'ps4\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n\n        <img (click)="toggleItemPlatform(item, \'ns\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n\n      </div>\n\n    </div>    \n\n  </div>\n\n\n\n  <h5 class="divider">Owned</h5>\n\n\n\n  <h5 class="display-text" *ngIf="profile.user.ownedList.length == 0">Add games you want to trade</h5>\n\n  \n\n  <div class="display-grid">\n\n    <div class="trade-item" *ngFor="let item of profile.user.ownedList">\n\n      <div ion-long-press class="trade-img" (click)="toggleItemList(item, true)" [interval]="400" (onPressing)="removeItem(item, true)">\n\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n\n      </div>\n\n      <div class="platforms">\n\n        <img (click)="toggleItemPlatform(item, \'xbox1\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n\n        <img (click)="toggleItemPlatform(item, \'ps4\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n\n        <img (click)="toggleItemPlatform(item, \'ns\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n\n      </div>\n\n      \n\n    </div>    \n\n  </div>\n\n</div>\n\n\n\n\n\n</ion-content>\n\n\n\n'}),w("design:paramtypes",[o.g,s.a,r.a,a.a,d.a,o.a,o.b,p.a,u.a,m.a,h.a,o.i,b.a,v.a,o.f,y.a])],t)}()},315:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.id=t,this.name=e,this.cover_url=n,this.platforms=i}}()},321:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(32),o=n(0),r=n(533),a=(n.n(r),n(322)),s=(n.n(a),this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}),c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t){this.http=t}return t.prototype.uploadImage=function(t,e){return new Promise(function(n,i){var o=r.storage().ref().child("images/"+e+"/profile");o.putString(t,"data_url").on("state_changed",function(t){},function(t){console.log("snapshot err ",t),i(t)},function(){o.getDownloadURL().then(function(t){n(t)})})})},t=s([Object(o.A)(),c("design:paramtypes",[i.a])],t)}()},324:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),o=n(13),r=n(39),a=n(325),s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n,i){this.navCtrl=t,this.navParams=e,this.auth=n,this.emailComposer=i}return t.prototype.ionViewDidLoad=function(){},t.prototype.feedback=function(){this.emailComposer.open({to:"lemontree.development@gmail.com",subject:"Console Nation Feedback"})},t.prototype.logout=function(){this.auth.logout()},t=s([Object(i.m)({selector:"page-options",template:'\x3c!--\n  Generated template for the OptionsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>Options</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <ion-list inset>\n    <ion-item (click)="feedback()">\n      Feedback\n    </ion-item>\n  \t<ion-item (click)="logout()">\n  \t\tLogout\n  \t</ion-item>\n\t</ion-list>\n</ion-content>\n'}),c("design:paramtypes",[o.g,o.h,r.a,a.a])],t)}()},326:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),o=n(13),r=n(168),a=n(315),s=n(97),c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n){this.navCtrl=t,this.navParams=e,this.igdb=n,this.searchIsLoading=!1,this.searchOptions=[],this.cart=[],this.submitText="Evaluate"}return t.prototype.ionViewDidLoad=function(){},t.prototype.searchtTitle=function(){var t=this;this.searchIsLoading=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.searchInput||t.searchInput.length<2?t.clearSearch():t.igdb.search(t.searchInput).then(function(e){t.searchOptions=e,0==e.length&&t.searchOptions.push({id:"err",name:"No Games Found"}),t.searchIsLoading=!1})},300)},t.prototype.clearSearch=function(){this.searchIsLoading=!1,this.searchOptions=[]},t.prototype.addGameToCart=function(t){if("err"!==t.id){var e=[""];t.platforms&&(t.platforms.includes(s.a.PS4_ID)&&e.push(s.a.PS4),t.platforms.includes(s.a.NS_ID)&&e.push(s.a.NS),t.platforms.includes(s.a.XBOX1_ID)&&e.push(s.a.XBOX1));var n=null;t.cover&&(n=t.cover.url.replace("thumb","cover_big").replace("//","http://"));var i=new a.a(t.id,t.name,n,e);this.searchInput=null,this.cart.push(i),this.clearSearch()}},t.prototype.removeItem=function(t){this.cart=this.cart.filter(function(e){return e.id!==t.id})},t=c([Object(i.m)({selector:"page-deal",template:'<ion-content  (click)="clearSearch()" padding>\n\n\t<div class="game-input-wrapper">\n    <ion-spinner *ngIf="searchIsLoading" class="search-spinner" name="dots"></ion-spinner>        \n    <div class="autocomplete">\n      <ion-list>\n        <ion-item class="autocomplete-item" *ngFor="let item of searchOptions" (click)="addGameToCart(item)">\n          \x3c!-- <img *ngIf="item.cover != null" src="{{item.cover.url}}"> --\x3e\n          <h5 style="margin-top: 0;">{{item.name}}</h5>\n        </ion-item>\n      </ion-list>\n    </div>\n\t\t\n\t</div>\n    <ion-item inset class="game-input" no-lines>\n      <ion-input (ionChange)="searchtTitle()" type="text" [(ngModel)]="searchInput" placeholder="Search game titles">\n      </ion-input>\n    </ion-item>\n\n\n  <div class="display-grid">\n    <div class="trade-item" *ngFor="let item of cart">\n      <div ion-long-press class="trade-img" (tap)="toggleItemOwnership(item, false)" [interval]="400" (onPressing)="removeItem(item, false)">\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n      </div>\n      <div class="platforms">\n        <img (tap)="toggleItemPlatform(item, \'xbox1\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n        <img (tap)="toggleItemPlatform(item, \'ps4\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n        <img (tap)="toggleItemPlatform(item, \'ns\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n      </div>\n    </div>    \n  </div>\n\n    <div *ngIf="cart.length == 0">\n      <h5 class="no-games-text">Add items you wish to trade-in and get money! (50% of retail price)</h5>\n    </div>\n  <div>\n    <button class="submit-btn" ion-button>{{submitText}}</button>\n  </div>\n\n</ion-content>\n'}),l("design:paramtypes",[o.g,o.h,r.a])],t)}()},327:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),o=n(13),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.navCtrl=t,this.navParams=e}return t.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad ShopPage")},t=r([Object(i.m)({selector:"page-shop",template:'<ion-content padding>\n\t<div class="row-1">\n\t\t<div class="device-container">\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/ps4_device.png">\n\t\t\t</div>\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/xbox1_device.png">\n\t\t\t</div>\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/ns_device.png">\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="prices">\n\t\t\t<h5>&#x20B1;1000 / month</h5>\n\t\t\t<h5>&#x20B1;600 / 2weeks</h5>\n\t\t</div>\n\t</div>\n\n\t<div class="row-2">\n\t\t<div class="games">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/gfzcaqqg1iinenf1rntp.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/kqlntgss9yb5invq8nxi.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/rzjnrhuv5rozj52g9aq3.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/fxgwm1nnyexhvauqv0ds.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/cintjlnx6o8qyqtcnajl.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/kqlntgss9yb5invq8nxi.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/faqrpb5usp5leipmwgtq.jpg">\n\t\t</div>\n\n\t\t<div class="prices">\n\t\t\t<h5>&#x20B1;100 / month</h5>\n\t\t\t<h5>&#x20B1;50 / 2weeks</h5>\n\t\t</div>\n\n\t</div>\n\n\t\t<button class="order-btn" ion-button>Order</button>\n\t\n</ion-content>\n'}),a("design:paramtypes",[o.g,o.h])],t)}()},328:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),o=n(13),r=n(24),a=n(39),s=n(96),c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n,i){this.navCtrl=t,this.navParams=e,this.auth=n,this.canSubmit=!1,this.validation_messages={first_name:[{type:"required",message:"first name is required."},{type:"minlength",message:"first name must be at least 2 characters long."},{type:"maxlength",message:"first name cannot be more than 20 characters long."},{type:"validUsername",message:"Your username has already been taken."}],last_name:[{type:"required",message:"last name is required."},{type:"minlength",message:"last name must be at least 2 characters long."},{type:"maxlength",message:"last name cannot be more than 20 characters long."},{type:"validUsername",message:"Your username has already been taken."}],email:[{type:"required",message:"email is required."},{type:"email",message:"must be a valid email."}],password:[{type:"required",message:"password is required."},{type:"pattern",message:"password must contain 1 upper case and 1 number."},{type:"minlength",message:"password must be at least 8 characters."}]},this.passwordType="password",this.showPasswordIcon="ios-eye-off";this.signupForm=i.group({first_name:["",r.g.compose([r.g.required,r.g.minLength(2),r.g.maxLength(20)])],last_name:["",r.g.compose([r.g.required,r.g.minLength(2),r.g.maxLength(20)])],email:["",r.g.compose([r.g.required,r.g.email])],password:["",r.g.compose([r.g.required,r.g.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).+$"),r.g.minLength(8),r.g.maxLength(20)])],gender:["",r.g.compose([r.g.required])]})}return t.prototype.ionViewDidLoad=function(){},t.prototype.checkForm=function(){this.canSubmit=null==this.signupForm.errors},t.prototype.showPassword=function(){"password"==this.passwordType?(this.passwordType="text",this.showPasswordIcon="ios-eye"):(this.passwordType="password",this.showPasswordIcon="ios-eye-off")},t.prototype.signup=function(){var t=this;this.auth.signUp({firstName:this.signupForm.value.first_name,lastName:this.signupForm.value.last_name,email:this.signupForm.value.email,password:this.signupForm.value.password,gender:this.signupForm.value.gender}).then(function(){return t.navCtrl.setRoot(s.a)},function(t){return console.log("signup error",t)})},t=c([Object(i.m)({selector:"page-signup",template:'<ion-header>\n  <ion-navbar>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding class="page-content">\n  \n  <form (ngSubmit)="signup()" [formGroup]="signupForm" (change)="checkForm()">\n\n  \t\t<h2>Signup</h2>\n      <ion-list inset>\n\n        <ion-item style="margin-top: 20px;">\n          <ion-input type="text" placeholder="First Name" formControlName="first_name"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.first_name" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'first_name\').hasError(validation.type) && (signupForm.get(\'first_name\').dirty || signupForm.get(\'first_name\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n        <ion-item style="margin-top: 20px;" >\n          <ion-input type="text" placeholder="Last Name" formControlName="last_name"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.last_name" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'last_name\').hasError(validation.type) && (signupForm.get(\'last_name\').dirty || signupForm.get(\'last_name\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n        <ion-item >\n          <ion-input type="text" placeholder="Email" formControlName="email"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.email" >\n\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'email\').hasError(\'required\') && \n\t        \t(signupForm.get(\'email\').dirty || signupForm.get(\'email\').touched) &&\n\t        \tvalidation.type == \'required\'\n\t        \t" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n\t        \t<h5 class="error-msg" *ngIf="!signupForm.get(\'email\').hasError(\'required\') && signupForm.get(\'email\').hasError(validation.type) && (signupForm.get(\'email\').dirty || signupForm.get(\'email\').touched);" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n        <ion-item>\n          <ion-input type="{{passwordType}}" placeholder="Password" formControlName="password"></ion-input>\n        \t<ion-icon name="{{showPasswordIcon}}" (click)="showPassword()" item-right></ion-icon>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.password" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'password\').hasError(validation.type) && (signupForm.get(\'password\').dirty || signupForm.get(\'password\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n        <ion-list radio-group class="gender-row" formControlName="gender">\n          <ion-item no-lines>\n            <ion-label>Male</ion-label>\n            <ion-radio checked="true" value="m"></ion-radio>\n          </ion-item>\n          <ion-item no-lines>\n            <ion-label>Female</ion-label>\n            <ion-radio value="f"></ion-radio>\n          </ion-item>\n        </ion-list>\n\n      </ion-list>\n\n      <div class="btn-container">\n      \t<button ion-button type="submit" [disabled]="!signupForm.valid">Submit</button>\n      </div>\n\n\n    </form>\n\n</ion-content>\n'}),l("design:paramtypes",[o.g,o.h,a.a,r.a])],t)}()},329:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),o=n(13),r=n(39),a=n(170),s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n,i){this.navCtrl=t,this.navParams=e,this.auth=n,this.toastCtrl=i,this.email=""}return t.prototype.ionViewDidLoad=function(){},t.prototype.resetPassword=function(){var t=this;this.auth.resetPassword(this.email).then(function(){t.showToast("Email sent!",!0)}).catch(function(e){return t.showToast(e)})},t.prototype.showToast=function(t,e){var n=this;void 0===e&&(e=!1);var i=this.toastCtrl.create({message:t,duration:1500,position:"top"});i.onDidDismiss(function(){e&&n.navCtrl.push(a.a)}),i.present()},t=s([Object(i.m)({selector:"page-resetpassword",template:'<ion-header>\n  <ion-navbar>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n\t<ion-item>\n\t\t<ion-label floating >\n\t\t\tEmail:\n\t\t</ion-label>\n\t\t<ion-input [(ngModel)]="email">\n\t\t</ion-input>\n\t</ion-item>\n\t<button ion-button (click)="resetPassword()">\n\t\tReset Password\n\t</button>\n</ion-content>\n'}),c("design:paramtypes",[o.g,o.h,r.a,o.k])],t)}()},332:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(333),o=n(455);Object(i.a)().bootstrapModule(o.a)},39:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(291),r=n(295),a=(n.n(r),n(297)),s=n(94),c=n(95),l=n(306),d=n(13),f=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,i,o){this.afAuth=t,this.geolocation=e,this.afdb=n,this.googlePlus=i,this.toastCtrl=o}return t.prototype.signInWithEmail=function(t){return this.afAuth.auth.signInWithEmailAndPassword(t.email,t.password)},t.prototype.signUp=function(t){var e=this;return new Promise(function(n,i){e.afAuth.auth.createUserWithEmailAndPassword(t.email,t.password).then(function(i){i.user.sendEmailVerification();var o=new a.a;o.first_name=t.firstName,o.last_name=t.lastName,o.email=t.email.toLowerCase(),o.gender=t.gender,o.profileImage=e.getRandomProfileImage(t.gender),e.getUserCurrentPosition().then(function(t){return o.last_location=t}).then(function(){e.afdb.list("/users").push(o).then(function(t){e.afdb.list("/users").update(t.key,{key:t.key}),n()})})}).catch(function(t){e.toastCtrl.create({message:t.message,duration:1500,position:"middle"}).present()})})},t.prototype.getUserCurrentPosition=function(){var t=this;return new Promise(function(e,n){t.geolocation.getCurrentPosition().then(function(t){e({lat:t.coords.latitude,long:t.coords.longitude})}).catch(function(t){e({}),console.log("Error getting location",t)})})},Object.defineProperty(t.prototype,"authenticated",{get:function(){return null!==this.user},enumerable:!0,configurable:!0}),t.prototype.getEmail=function(){return this.user&&this.user.email},t.prototype.logout=function(){return this.user=null,this.afAuth.auth.signOut()},t.prototype.resetPassword=function(t){return this.afAuth.auth.sendPasswordResetEmail(t)},t.prototype.googleLogin=function(){this.googlePlus.login({webClientId:"670922071182-meeqgiin43vk18i54v5kag524cane4d3.apps.googleusercontent.com",offline:!0}).then(function(t){var e=r.auth.GoogleAuthProvider.credential(t.idToken);r.auth().signInWithCredential(e).then(function(t){console.log("Firebase success: "+JSON.stringify(t))},function(t){console.error("Error: ",t)})}).catch(function(t){console.error("Error: ",t)})},t.prototype.logInWithGoogle=function(){return this.afAuth.auth.signInWithPopup(new r.auth.GoogleAuthProvider)},t.prototype.logInWithGoogleRedirect=function(){var t=this;return this.afAuth.auth.signInWithRedirect(new r.auth.GoogleAuthProvider).then(function(e){return t.afAuth.auth.getRedirectResult().then(function(e){t.user=e.user}).catch(function(t){alert(t.message)})})},t.prototype.getRandomProfileImage=function(t){var e=this.getRandomInt(1,9);return"f"==t&&(e=this.getRandomInt(10,18)),["https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_1.png?alt=media&token=926bfd10-fd52-4b5b-b861-6b4cccf0c528","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_3.png?alt=media&token=a671e695-2842-444c-b534-3d6a30ba2575","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_4.png?alt=media&token=a794717a-2ad6-4748-8594-bb9a3a900db6","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_5.png?alt=media&token=494ba40d-8e26-4d78-8e60-db59b4ac74cf","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_6.png?alt=media&token=c44da33e-f090-4455-a586-e2eca21e1ce2","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_7.png?alt=media&token=28c6321e-43e2-454c-a5dd-01e8fab83420","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_10.png?alt=media&token=120deefc-643a-45d9-8775-611f2dbd9568","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_11.png?alt=media&token=5040e85f-6753-4a0c-8757-450a06437d32","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_16.png?alt=media&token=f5e6b7fc-de33-45fc-9e23-ef6176f6aa9a","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_17.png?alt=media&token=3068d24a-f7d4-4e3a-aa53-8214bd7c4dd7","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_2.png?alt=media&token=a6378dfe-5f46-4021-bcc0-d24900e32c13","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_8.png?alt=media&token=71bbaf6c-9d76-4b04-aba5-1591f3932192","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_9.png?alt=media&token=aea36a3f-d9e8-4f7b-aaee-6b348086c50c","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_12.png?alt=media&token=0050e68c-9baa-4ae7-bcb2-6a9ade80bfd6","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_13.png?alt=media&token=d15b6368-f299-46cc-8588-7f2906de7606","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_14.png?alt=media&token=093fd30f-a38f-4874-9654-1123c54d1cdd","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_15.png?alt=media&token=ad13c6ee-9421-41df-96f5-086f6b2451fc","https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_18.png?alt=media&token=703f376c-3e36-4b31-8d6b-0abf852cd9e9"][e]},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t=f([Object(i.A)(),p("design:paramtypes",[o.a,c.a,s.a,l.a,d.k])],t)}()},41:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(32),o=n(0),r=n(297),a=n(521),s=(n.n(a),n(52)),c=n(13),l=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,n){this.http=t,this.fbapp=e,this.toastCtrl=n,this.allListsUpdateTimeout=null,this.wishListUpdateTimeout=null,this.ownedListUpdateTimeout=null,this.user=new r.a}return t.prototype.addGameToProfile=function(t,e,n){var i=a.find(this.user.wishList,function(t){return t.id===e.id});if(e.platforms||(e.platforms=[]),i||this.user.wishList.length>8){if(a.find(this.user.ownedList,function(t){return t.id===e.id}))return;this.user.addToOwnedList(e),this.fbapp.updateUserOwnedList(t,this.user.ownedList)}else this.user.addToWishList(e),this.fbapp.updateUserWishList(t,this.user.wishList)},t.prototype.toggleItemList=function(t,e,n){if(n){if(a.find(this.user.wishList,function(t){return t.id===e.id}))return;if(this.user.wishList.length>8)return;this.user.addToWishList(e),this.user.ownedList=a.reject(this.user.ownedList,function(t){return t.id===e.id})}else{if(a.find(this.user.ownedList,function(t){return t.id===e.id}))return;if(this.user.ownedList.length>8)return;this.user.addToOwnedList(e),this.user.wishList=a.reject(this.user.wishList,function(t){return t.id===e.id})}this.startAllListsUpdateTImer(t)},t.prototype.toggleItemPlatform=function(t,e,n,i){a.contains(e.platforms,n)?e.platforms=a.reject(e.platforms,function(t){return t===n}):e.platforms.push(n),i?this.startWishListUpdateTImer(t):this.startOwnedListUpdateTImer(t)},t.prototype.removeItem=function(t,e,n){n?(this.user.ownedList=a.reject(this.user.ownedList,function(t){return t.id===e.id}),this.startOwnedListUpdateTImer(t)):(this.user.wishList=a.reject(this.user.wishList,function(t){return t.id===e.id}),this.startWishListUpdateTImer(t))},t.prototype.isItemMatch=function(t){for(var e=0,n=this.user.wishList;e<n.length;e++){if(n[e].id===t.id)return!0}return!1},t.prototype.startAllListsUpdateTImer=function(t){clearTimeout(this.allListsUpdateTimeout);var e=this;this.allListsUpdateTimeout=setTimeout(function(){e.fbapp.updateUserWishList(t,e.user.wishList),e.fbapp.updateUserOwnedList(t,e.user.ownedList)},1e3)},t.prototype.startWishListUpdateTImer=function(t){clearTimeout(this.wishListUpdateTimeout);var e=this;this.wishListUpdateTimeout=setTimeout(function(){e.fbapp.updateUserWishList(t,e.user.wishList)},1e3)},t.prototype.startOwnedListUpdateTImer=function(t){clearTimeout(this.ownedListUpdateTimeout);var e=this;this.ownedListUpdateTimeout=setTimeout(function(){e.fbapp.updateUserOwnedList(t,e.user.ownedList)},1e3)},t=l([Object(o.A)(),d("design:paramtypes",[i.a,s.a,c.k])],t)}()},455:function(t,e,n){"use strict";n.d(e,"a",function(){return H});var i=n(0),o=n(56),r=n(13),a=n(495),s=n(288),c=n(290),l=n(160),d=n(291),f=n(97),p=n(540),u=n(308),m=n(313),h=n(314),g=n(96),v=n(170),b=n(328),y=n(324),_=n(165),w=n(166),O=n(326),I=n(327),R=n(311),k=n(329),P=n(551),j=n(39),L=n(95),T=n(94),C=n(168),x=n(32),F=n(164),S=n(41),M=n(552),A=n(52),D=n(556),E=n(557),U=n(316),G=n(318),N=n(98),q=n(319),W=n(320),B=n(321),K=n(323),V=n(306),X=n(312),J=n(325),z=n(167),Y=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},H=function(){function t(){}return t=Y([Object(i.I)({declarations:[a.a,_.a,u.a,m.a,h.a,v.a,b.a,y.a,w.a,O.a,I.a,R.a,k.a,P.a,g.a],imports:[o.a,r.e.forRoot(a.a,{},{links:[]}),l.a.initializeApp(f.b.web),T.b,x.b,D.a,M.a,U.b.forRoot(),p.a,X.a.forRoot()],bootstrap:[r.c],entryComponents:[a.a,_.a,u.a,m.a,h.a,v.a,b.a,y.a,w.a,O.a,I.a,R.a,k.a,P.a,g.a],providers:[s.a,c.a,{provide:i.u,useClass:r.d},d.a,L.a,T.a,j.a,x.a,C.a,F.a,S.a,A.a,E.a,G.a,N.a,q.a,W.a,K.a,V.a,J.a,B.a,z.a]})],t)}()},495:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n(0),o=n(13),r=n(288),a=n(290),s=n(39),c=n(94),l=n(17),d=n(41),f=n(95),p=n(164),u=n(96),m=n(170),h=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},g=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e,n,i,o,r,a,s,c,l){var d=this;this.platform=t,this.statusBar=e,this.splashScreen=n,this.afdb=i,this.auth=o,this.profile=r,this.geolocation=a,this.trade=s,this.events=c,this.loadCtrl=l,this.rootPage=null,t.ready().then(function(){e.styleDefault(),n.hide(),o.afAuth.authState.subscribe(function(t){if(t){var e=d.loadCtrl.create();e.present(),d.auth.user=t,d.rootPage=u.a;d.initProfile(t).then(function(t){e.dismiss(),d.events.publish("profile:loaded")})}else d.rootPage=m.a},function(){d.rootPage=m.a})})}return t.prototype.initProfile=function(t){var e=this;return new Promise(function(n,i){var o=e.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),r=o.snapshotChanges().pipe(Object(l.map)(function(t){return t.map(function(t){return h({key:t.payload.key},t.payload.val())})})).subscribe(function(t){t[0]&&t[0].key&&(e.profile.user.profileImage=t[0].profileImage||"assets/imgs/temp_profile_img_1.png",e.profile.user.first_name=t[0].first_name||"",e.profile.user.last_name=t[0].last_name||"",e.profile.user.email=t[0].email||"",e.profile.user.wishList=t[0].wishList||[],e.profile.user.ownedList=t[0].ownedList||[],e.profile.user.key=t[0].key||"",e.profile.user.conversations=t[0].conversations||[],e.profile.user.trade_locations=t[0].trade_locations||[],e.profile.user.gender=t[0].gender||[],e.geolocation.getCurrentPosition({timeout:2e4,enableHighAccuracy:!0}).then(function(e){o.update(t[0].key,{last_location:{lat:e.coords.latitude,long:e.coords.longitude}}).then(function(t){n()}),r.unsubscribe()}).catch(function(t){i(console.log(">>Error getting location",t))}))})})},t=g([Object(i.m)({template:'<ion-nav [root]="rootPage"></ion-nav>\n'}),v("design:paramtypes",[o.i,r.a,a.a,c.a,s.a,d.a,f.a,p.a,o.b,o.f])],t)}()},52:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(32),o=n(0),r=n(17),a=n(523),s=n(524),c=n(295),l=(n.n(c),n(94)),d=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},f=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.http=t,this.afdb=e}return t.prototype.getOfferedGames=function(t,e){return this.afdb.list("/conversations/"+e+"/deal/"+t+"/offer").valueChanges()},t.prototype.updateUserProfileImage=function(t,e){this.afdb.list("/users/"+t+"/").set("profileImage",e)},t.prototype.updateConversationOffers=function(t,e,n){this.afdb.list("/conversations/"+e+"/deal/"+t+"/").set("offer",n)},t.prototype.updateUserTradeLocations=function(t,e){this.afdb.list("/users/"+t+"/").set("trade_locations",e)},t.prototype.updateUserWishList=function(t,e){var n=this.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),i=n.snapshotChanges().pipe(Object(r.map)(function(t){return t.map(function(t){return d({key:t.payload.key},t.payload.val())})})).subscribe(function(t){if(t[0]){n.update(t[0].key,{wishList:e}),i.unsubscribe()}})},t.prototype.updateUserOwnedList=function(t,e){var n=this.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),i=n.snapshotChanges().pipe(Object(r.map)(function(t){return t.map(function(t){return d({key:t.payload.key},t.payload.val())})})).subscribe(function(t){if(t[0]){n.update(t[0].key,{ownedList:e}),i.unsubscribe()}})},t.prototype.getConversationMessages=function(t){return this.afdb.list("/conversations/"+t+"/messages/").valueChanges(["child_added"])},t.prototype.getTraderConversationKey=function(t,e){if(t.conversations&&e.conversations){for(var n in e.conversations)for(var i in t.conversations)if(t.conversations[i].key===e.conversations[n].key)return e.conversations[n].key;return null}console.log("r")},t.prototype.createNewThread=function(t,e,n){var i={};i[t.key]=!0,i[e.key]=!0;var o=new a.a(n,e.first_name+" "+e.last_name,e.key,c.database.ServerValue.TIMESTAMP),r=this.pushConversation([o],i);e.conversations=e.conversations?e.conversations:[];var l=new s.a(r.key,t.key,t.first_name+" "+t.last_name);e.conversations[r.key]=l,this.updateUserConversation(e.key,r.key,l),t.conversations=t.conversations?t.conversations:[];var d=new s.a(r.key,e.key,e.first_name+" "+e.last_name,!0);t.conversations[r.key]=d;this.afdb.list("/users/"+t.key+"/conversations/").update(r.key,d);return r},t.prototype.updateUserConversation=function(t,e,n){return this.afdb.list("/users/"+t+"/conversations/").update(e,n)},t.prototype.pushConversation=function(t,e){return this.afdb.list("/conversations").push({messages:t,members:e})},t.prototype.updateConversation=function(t,e,n,i){var o=new a.a(i,n.first_name+" "+n.last_name,n.key,c.database.ServerValue.TIMESTAMP);this.afdb.list("/conversations/"+t+"/messages").push(o),this.afdb.list("/users/"+e.key+"/conversations").update(t,{unread:!0})},t.prototype.readConversation=function(t,e){return this.afdb.list("/users/"+e+"/conversations/").update(t,{unread:!1})},t.prototype.getUserConversations=function(t,e){return void 0===e&&(e=null),this.afdb.list("/users/"+t.key+"/conversations/").snapshotChanges(e).pipe(Object(r.map)(function(t){return t.map(function(t){return d({key:t.payload.key},t.payload.val())})}))},t.prototype.getProfile=function(t){var e=this;return new Promise(function(n,i){var o=e.afdb.object("/users/"+t).snapshotChanges().subscribe(function(t){n(t.payload.val()),o.unsubscribe()})})},t=f([Object(o.A)(),p("design:paramtypes",[i.a,l.a])],t)}()},523:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n,i){this.text="",this.sender="",this.senderKey="",this.text=t,this.sender=e,this.senderKey=n,this.createdAt=i}}()},524:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n,i){void 0===i&&(i=!1),this.key="",this.traderKey="",this.name="",this.key=t,this.traderKey=e,this.name=n,this.unread=i}}()},551:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),o=n(13),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.navCtrl=t,this.navParams=e}return t.prototype.ionViewDidLoad=function(){},t=r([Object(i.m)({selector:"page-all-traders",template:"\x3c!--\n  Generated template for the AllTradersPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>AllTraders</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n</ion-content>\n"}),a("design:paramtypes",[o.g,o.h])],t)}()},552:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),o=n(553),r=n(554),a=n(555),s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=function(){function t(){}return t=s([Object(i.I)({declarations:[o.a,r.a,a.a],imports:[],exports:[o.a,r.a,a.a]})],t)}()},553:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=function(){function t(){}return t.prototype.transform=function(t,e){var n=[];for(var i in t)n.push(t);return n},t=o([Object(i.S)({name:"keys"})],t)}()},554:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?t.replace(e[0],e[1]):""},t=o([Object(i.S)({name:"replace"})],t)}()},555:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Math.ceil(parseFloat(t))},t=o([Object(i.S)({name:"ceil"})],t)}()},557:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(32),o=n(0),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.http=t}return t.prototype.getRandomProfileImage=function(){return 0},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t=r([Object(o.A)(),a("design:paramtypes",[i.a])],t)}()},96:function(t,e,n){"use strict";n.d(e,"a",function(){return v});var i=n(0),o=n(13),r=n(308),a=n(313),s=n(314),c=n(324),l=n(326),d=n(327),f=n(39),p=n(52),u=n(41),m=n(167),h=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},g=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(){function t(t,e,n,i,o,c){var f=this;this.navCtrl=t,this.auth=e,this.fbApp=n,this.profile=i,this.events=o,this.messages=c,this.tab1Root=s.a,this.tab2Root=r.a,this.tab3Root=a.a,this.tab4Root=l.a,this.tab5Root=d.a,this.events.subscribe("profile:loaded",function(){f.messages.loadConversations(f.fbApp)})}return t.prototype.navTo=function(t){this.navCtrl.push(c.a,{},{animate:!0,direction:"forward"})},t.prototype.logout=function(){this.auth.logout()},t=h([Object(i.m)({selector:"page-tabs",template:'<ion-header class="ps4-header">\n  <ion-navbar>\n    <ion-title></ion-title>\n\n    <ion-icon class="settings" name="settings" (click)="navTo(OptionsPage)"></ion-icon>\n   \n  </ion-navbar>\n</ion-header>\n\n<h5 class="msg-notification" *ngIf="messages.unreadMsgCnt > 0">{{messages.unreadMsgCnt}}</h5>\n<ion-tabs tabsPlacement="bottom" selectedIndex="0">\n  <ion-tab [root]="tab1Root" tabTitle="Profile" tabIcon="contact"></ion-tab>\n  <ion-tab [root]="tab2Root" tabTitle="Trade" tabIcon="contacts"></ion-tab>\n  <ion-tab [root]="tab3Root" tabTitle="Messages" tabIcon="chatbubbles">\n  </ion-tab>\n  \x3c!-- <ion-tab [root]="tab4Root" tabTitle="Sell" tabIcon="logo-usd"></ion-tab> --\x3e\n  \x3c!-- <ion-tab [root]="tab5Root" tabTitle="Buy/Rent" tabIcon="cart"></ion-tab> --\x3e\n</ion-tabs>'}),g("design:paramtypes",[o.g,f.a,p.a,u.a,o.b,m.a])],t)}()},97:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var i={web:{apiKey:"AIzaSyCs8fw6B3hdkNBkf9o48V_0sTGhxC1Pg_E",authDomain:"console-trade.firebaseapp.com",databaseURL:"https://console-trade.firebaseio.com",projectId:"console-trade",storageBucket:"console-trade.appspot.com",messagingSenderId:"670922071182"}},o={PS4:"ps4",XBOX1:"xbox1",NS:"ns",PS4_ID:48,NS_ID:130,XBOX1_ID:49}}},[332]);