webpackJsonp([0],{162:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(37),o=n(0),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.http=t,this.matchingTraders=[],this.loading=!1}return t.prototype.getNearestPossibleTrades=function(t){var e=this;console.log("provider getNPT: "+t);var n=(new i.c).set("key","eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4"),o="https://lemon-data-center-js.herokuapp.com/api/getNPT?key="+t;this.loading=!0;var a=this.http.get(o,{headers:n}).subscribe(function(t){e.matchingTraders=t,console.log("get getNearestPossibleTrades: ",e.matchingTraders),e.loading=!1,a.unsubscribe()})},t=a([Object(o.A)(),r("design:paramtypes",[i.a])],t)}()},163:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(0),o=n(19),a=n(48),r=n(72),s=n(43),c=n(300),l=(n.n(c),n(164)),u=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n,i,o,a){var r=this;this.navCtrl=t,this.navParams=e,this.profile=n,this.fbApp=i,this.auth=o,this.app=a,this.message="",this.thread=[],this.threads=[],this.trader=e.get("trader"),console.log("[chat] trader: ",this.trader),this.converKey=this.fbApp.getTraderConversationKey(this.trader,this.profile.user),this.converKey&&(this.chatSub=this.fbApp.getConversationMessages(this.converKey).subscribe(function(t){console.log("thread ",t),r.thread=t,r.threads[r.trader.key]=t}))}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){},t.prototype.ionViewDidLeave=function(){this.chatSub&&(console.log("ONLEAVE CHAT PAGE"),this.chatSub.unsubscribe())},t.prototype.send=function(){var t=this;console.log("sent message: ",this.message),this.converKey?(console.log("UPDATE CHAT "+this.converKey),this.fbApp.updateConversation(this.converKey,this.trader,this.profile.user,this.message)):(this.converKey=this.fbApp.createNewThread(this.trader,this.profile.user,this.message).key,console.log("PUSH CHAT "+this.converKey),this.chatSub=this.fbApp.getConversationMessages(this.converKey).subscribe(function(e){console.log("thread ",e),t.thread=e})),this.message=""},t.prototype.navToMap=function(){this.app.getRootNavs()[0].push(l.a,{target:this.trader})},t=u([Object(i.m)({selector:"page-chat",template:'\x3c!--\n  Generated template for the ChatPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header >\n\n  <ion-navbar>\n    <ion-title>{{trader.first_name + " " + trader.last_name}}</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-icon style="color: #fff;" name="menu" menuToggle class="menu-toggle-forced"></ion-icon>\n<ion-content cpadding>\n\n\t<div class="thread">\n\t\t<div class="chat-message" [ngClass]="{\'trader-message\': message.senderKey !== profile.user.key}" *ngFor="let message of thread">\n\t\t\t<h5>{{message.text}}</h5>\n\t\t</div>\n\t</div>\n\n\t<div class="message-input message-input">\n\t\t\t<ion-input [(ngModel)]="message" placeholder="Type a message..." (keyup.enter)="send()">\n\t\t\t</ion-input>\n\t\t\t<button (click)="send()">Send</button>\n\t</div>\n</ion-content>\n\n\n<ion-nav #mycontent [root]="rootPage">\n</ion-nav>\n\n<ion-menu class="chat-menu" side="right" [content]="mycontent">\n  <ion-content>\n  \t<ion-header>\n  \t\t<h5>Preferred Trading Locations</h5>\n      <button ion-button class="location-btn" (click)="navToMap()">\n        <ion-icon name="compass"></ion-icon>\n      </button>\n  \t</ion-header>\n  \t<ion-list class="location-list">\n  \t\t<ion-item *ngFor="let tradeLocation of trader.trade_locations">\n  \t\t\t{{tradeLocation}}\n  \t\t</ion-item>\n  \t</ion-list>\n\n \t\t<div class="trade-grid">\n\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingTrades">\n\t \t\t\t<img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url | replace: \'cover_big\':\'thumb\'}}"></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\t \t\t</div>\n \t\t</div>\n \t\t\n  </ion-content>\n</ion-menu>'}),d("design:paramtypes",[o.f,o.g,a.a,r.a,s.a,o.a])],t)}()},164:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(19),a=n(48),r=n(94),s=n(72),c=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,i,o,a){this.navCtrl=t,this.navParams=e,this.platform=n,this.geolocation=i,this.profile=o,this.fbApp=a,this.markers=[],this.searchInput="",this.canEdit=!0,this.sessionToken=new google.maps.places.AutocompleteSessionToken}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){var t=this;this.target=this.profile.user;var e=this.navParams.get("target");e&&(this.canEdit=!1,this.target=e),this.platform.ready().then(function(){google&&(t.geocoder=new google.maps.Geocoder,t.places=new google.maps.places.AutocompleteService,t.initMap())})},t.prototype.searchLocation=function(){var t=this;console.log("searchLocation: "+this.searchInput),clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.places.getPlacePredictions({input:t.searchInput,sessionToken:t.sessionToken},function(t){console.log("place prediction ",t)})},500)},t.prototype.initMap=function(){var t=this,e=this;this.geolocation.getCurrentPosition().then(function(n){var i=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);t.map=new google.maps.Map(t.mapElement.nativeElement,{zoom:15,disableDefaultUI:!0,center:i}),t.addMarker(i,{label:"YOU",remember:!1}),t.initAutoComplete(n),t.initClickEvent();for(var o=0,a=t.target.trade_locations;o<a.length;o++){t.geocoder.geocode({address:a[o]},function(t,n){"OK"===n?e.addMarker(t[0].geometry.location):console.log("Geocode was not successful for the following reason: "+n)})}}).catch(function(t){console.log("errrr",t)})},t.prototype.initAutoComplete=function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),n=document.getElementById("autocomplete");this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(n);var i=new google.maps.Circle({center:e,radius:t.coords.accuracy});this.places=new google.maps.places.PlacesService(this.map);var o=this;new google.maps.places.Autocomplete(n,{bounds:i.getBounds(),stritctBounds:!0}).addListener("place_changed",function(){var t=this.getPlace();t&&(console.log("place",t),t.geometry&&(o.map.panTo(t.geometry.location),o.map.setZoom(15),o.addMarker(t.geometry.location),o.addTradeLocation(t.formatted_address)))})},t.prototype.initClickEvent=function(){var t=this;this.canEdit&&this.map.addListener("click",function(e){e.latLng.lat(),e.latLng.lng();t.geocoder.geocode({location:e.latLng},function(n){console.log("click ",n),n&&(t.addMarker(e.latLng),t.addTradeLocation(n[0].formatted_address))})})},t.prototype.addTradeLocation=function(t){var e=this;this.canEdit&&(clearTimeout(this.dbTimeout),this.target.trade_locations.push(t),this.target.trade_locations.length>3&&this.removeLastTradeLocation(),console.log("[map] addTradeLocation ",this.target),this.dbTimeout=setTimeout(function(){e.fbApp.updateUserTradeLocations(e.target.key,e.target.trade_locations)},500))},t.prototype.removeLastTradeLocation=function(){this.target.trade_locations.shift();var t=this.markers[0];console.log("removing ",this.markers,this.target.trade_locations),t.setMap(null),this.markers.shift()},t.prototype.onPlaceChanged=function(t,e){var n=t.getPlace();n&&(console.log("place",n),n.geometry&&(e.panTo(n.geometry.location),e.setZoom(15)))},t.prototype.addMarker=function(t,e){void 0===e&&(e=null),e=e||{remember:!0};var n=new google.maps.Marker({map:this.map,position:t,label:e.label,icon:e.icon});e.remember&&this.markers.push(n)},t.prototype.setMapOnAll=function(t){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(t)},t.prototype.clearMarkers=function(){this.setMapOnAll(null)},t.prototype.deleteMarkers=function(){this.clearMarkers(),this.markers=[]},c([Object(i._8)("map"),l("design:type",i.t)],t.prototype,"mapElement",void 0),t=c([Object(i.m)({selector:"page-map",template:'<ion-header >\n\n  <ion-navbar>\n    <ion-title *ngIf="canEdit">Pick preferred trade locations</ion-title>\n    <ion-title *ngIf="!canEdit">{{target.first_name + " " + target.last_name}}\'s preferred trade locations</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content >\n\n  <h5 class="status-msg">Loading Map</h5>\n\t<input id="autocomplete" class="display-none" type="text" [ngModel]="searchInput" (ionChange)="searchLocation">\n  <div #map id="map" style="height: 100%;"></div>\n\n  <ion-list class="trade-locations-container">\n  \t<h5 class="trade-location-header">Trade Locations</h5>\n  \t<ion-item class="trade-location" *ngFor="let tradeLocation of profile.user.trade_locations">\n  \t\t<h5>{{tradeLocation}}</h5>\n  \t</ion-item>\n  </ion-list>\n\n</ion-content>\n\n'}),l("design:paramtypes",[o.f,o.g,o.h,r.a,a.a,s.a])],t)}()},165:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(37),o=n(0),a=n(96),r=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.http=t,this.searchOptions=[]}return t.prototype.search=function(t){for(var e=this,n=(new i.c).set("user-key","5227ae6e46cee2806cf25779d4c97966").set("Accept","application/json"),o="0",a=[41,6,9,12,48,49,130],r=1;r<164;r++)a.indexOf(r)>-1||(o+=","+r);var s="https://api-endpoint.igdb.com/games/?search="+t+"&filter[release_dates.platform][not_in]="+o+"&filter[category][eq]=0&filter[release_dates.platform][exists]&filter[version_parent][not_exists]&fields=*";return new Promise(function(t,i){var o=e.http.get(s,{headers:n}).subscribe(function(n){var i="";console.log("[igdb] search raw: ",n);for(var a=!0,r=0,s=n;r<s.length;r++){var c=s[r];i+=a?c.id:","+c.id,a=!1}var l=e.removeUnsupportedPlatforms(n);console.log("[igdb] search clean: ",l),t(l),o.unsubscribe()})})},t.prototype.removeUnsupportedPlatforms=function(t){return t.filter(function(t){if(t.platforms)return-1!=t.platforms.indexOf(a.a.PS4_ID)||-1!=t.platforms.indexOf(a.a.XBOX1_ID)||-1!=t.platforms.indexOf(a.a.NS_ID)})},t=r([Object(o.A)(),s("design:paramtypes",[i.a])],t)}()},200:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=200},243:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=243},291:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){this.profileImage="",this.name="",this.first_name="",this.last_name="",this.email="",this.key="",this.wishList=[],this.ownedList=[],this.consoles=[],this.trade_locations=[],this.last_location={}}}()},299:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),o=n(19),a=n(48),r=n(162),s=n(163),c=n(300),l=(n.n(c),this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r}),u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n,i,o,a){var r=this;this.navCtrl=t,this.platform=e,this.trade=n,this.profile=i,this.app=o,this.events=a,this.refresh=!0,this.getNearestPossibleTrades(),this.events.subscribe("profile:changed",function(t){r.refresh=!0})}return t.prototype.ionViewDidLoad=function(){},t.prototype.ionViewWillEnter=function(){this.refresh&&(this.refresh=!1,this.trade.getNearestPossibleTrades(this.profile.user.key))},t.prototype.getNearestPossibleTrades=function(){console.log("getNearestPossibleTrades"),this.trade.getNearestPossibleTrades(this.profile.user.key)},t.prototype.showChat=function(t){this.app.getRootNavs()[0].push(s.a,{trader:t})},t=l([Object(i.m)({selector:"page-trade",template:'<ion-content >\n\x3c!-- <div style="height: 100%;" (click)="getNearestPossibleTrades()">\n\t\n</div> --\x3e\n\t<ion-spinner *ngIf="trade.loading" name="bubbles"></ion-spinner>\n\n\t<h4  style="padding: 5px 5px 0 16px;">Matches found</h4>\n \t<ion-item class="matching-trades" *ngFor="let trader of trade.matchingTraders" no-lines>\n \t\t<div class="info-row">\n\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} is offering</h5>\n \t\t</div>\n \t\t<div class="trade-grid">\n\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingTrades">\n\t \t\t\t<img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url | replace: \'cover_big\':\'thumb\'}}"></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\t \t\t</div>\n \t\t</div>\n \t\t<div class="info-row">\n\t \t\t<h5>{{trader.first_name + " " + trader.last_name}} is interested in</h5>\n \t\t</div>\n \t\t<div class="trade-grid ">\n\t \t\t<div class="trade-item" *ngFor="let item of trader.matchingWishes">\n\t \t\t\t<img-loader *ngIf="item.cover_url"  class="fit-img" src="{{item.cover_url | replace: \'cover_big\':\'thumb\'}}"></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\t \t\t</div>\n \t\t</div>\n \t\t<div class="info-row">\n\t \t\t<h5 class="info-matches">{{trader.matchingTrades.length}} matches</h5>\n \t\t\t<h5>{{trader.distance | ceil}} miles away</h5>\n \t\t\t<ion-icon style="color: #fff;" name="chatbubbles" (click)="showChat(trader)"></ion-icon>\n \t\t</div>\n \t</ion-item>\n \t<h5 class="status-msg" *ngIf="trade.matchingTraders.length == 0 && !trade.loading">\n \t\tNo matching trader found near your area. Check again in a while.\n \t</h5>\n</ion-content>'}),u("design:paramtypes",[o.f,o.h,r.a,a.a,o.a,o.b])],t)}()},301:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(19),a=n(48),r=n(72),s=n(163),c=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,i){var o=this;this.navCtrl=t,this.profile=e,this.fbApp=n,this.app=i,this.traders=[],this.fbApp.getUserConversations(e.user).subscribe(function(t){if(t){for(var n in t.payload.val()){var i=t.payload.val()[n];o.fbApp.getProfile(i.traderKey).then(function(t){null!=t.profileImage&&""!=t.profileImage||(t.profileImage=o.getRandomPic());for(var n=[],i=0,a=t.ownedList;i<a.length;i++)for(var r=a[i],s=0,c=e.user.wishList;s<c.length;s++){c[s].id===r.id&&n.push(r)}t.matchingTrades=n,o.traders.push(t)})}console.log("conversations: ",o.traders)}})}return t.prototype.showChat=function(t){this.app.getRootNavs()[0].push(s.a,{trader:t})},t.prototype.getRandomPic=function(){return"assets/imgs/temp_profile_img_"+this.getRandomInt(1,2)+".png"},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t=c([Object(i.m)({selector:"page-messages",template:'<ion-content >\n    <ion-item *ngFor="let trader of traders" (click)="showChat(trader)" no-lines>\n        <div class="message-container">\n            <div class="trader-img-container">\n                <img class="fit-img" src="{{trader.profileImage}}"> \n            </div>\n            <div class="trader-info">\n                <h5 class="trader-name">{{trader.first_name + " " + trader.last_name}} </h5>\n            </div>\n       \n        </div>\n\x3c!--         <div class="message-container">\n            <div class="trader-info">\n                <h5 class="trader-name">{{trader.first_name + " " + trader.last_name}} </h5>\n            </div>\n            <div class="matches">\n                <div class="trade-item"  *ngFor="let item of trader.ownedList">\n                    <ng-container *ngIf="profile.isItemMatch(item)">\n                        <h5>{{item.name}}</h5>\n                    </ng-container>\n                </div>\n            </div>\n        </div> --\x3e\n    </ion-item>\n</ion-content>\n'}),l("design:paramtypes",[o.f,a.a,r.a,o.a])],t)}()},302:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(0),o=n(19),a=n(43),r=n(48),s=n(165),c=n(303),l=n(96),u=n(304),d=n(164),p=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e,n,i,o,a,r){this.navCtrl=t,this.igdb=e,this.auth=n,this.profile=i,this.imgLoader=o,this.app=a,this.events=r,this.searchIsLoading=!1,this.searchOptions=[],o.setBackgroundSize("cover")}return t.prototype.toggleItemOwnership=function(t,e){this.profile.toggleItemOwnership(this.auth.user,t,e),this.events.publish("profile:changed")},t.prototype.toggleItemPlatform=function(t,e,n){this.profile.toggleItemPlatform(this.auth.user,t,e,n),this.events.publish("profile:changed")},t.prototype.removeItem=function(t,e){console.log("pressing"),this.profile.removeItem(this.auth.user,t,e),this.events.publish("profile:changed")},t.prototype.searchtTitle=function(){var t=this;this.searchIsLoading=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.searchInput||t.searchInput.length<2?t.clearSearch():t.igdb.search(t.searchInput).then(function(e){t.searchOptions=e,0==e.length&&t.searchOptions.push({id:"err",name:"No Games Found"}),t.searchIsLoading=!1})},300)},t.prototype.clearSearch=function(){this.searchIsLoading=!1,this.searchOptions=[]},t.prototype.addGameToProfile=function(t){if("err"!==t.id){var e=[""];t.platforms&&(t.platforms.includes(l.a.PS4_ID)&&e.push(l.a.PS4),t.platforms.includes(l.a.NS_ID)&&e.push(l.a.NS),t.platforms.includes(l.a.XBOX1_ID)&&e.push(l.a.XBOX1));var n=null;t.cover&&(n=t.cover.url.replace("thumb","cover_big").replace("//","http://"));var i=new c.a(t.id,t.name,n,e);this.profile.addGameToProfile(this.auth.user,i,!1),this.searchInput=null,this.searchOptions=[],this.events.publish("profile:changed")}},t.prototype.navToMap=function(){this.app.getRootNavs()[0].push(d.a)},t=p([Object(i.m)({selector:"page-profile",template:'<ion-content (click)="clearSearch()">\n\n\n\n<div class="profile">\n\n  <div class="profile-image">\n\n    <img-loader class="circle-head" src="{{profile.user.profileImage}}"></img-loader>\n\n  </div>\n\n  <div class="profile-info-wrapper">\n\n    <div class="profile-info">\n\n        <h4>{{profile.user.name}}</h4>\n\n        \x3c!-- <ion-icon name="create"></ion-icon> --\x3e\n\n      \x3c!-- <h5>{{profile.user.location}}</h5> --\x3e\n\n    </div>\n\n  </div>\n\n  <button class="set-location-btn" ion-button (click)="navToMap()">\n\n    Set Trade Locations\n\n  </button>\n\n</div>\n\n\n\n<hr inset padding-horizontal style="background-color: #fff;">\n\n\n\n<div class="trade-info" >\n\n  \n\n  <div class="game-input-wrapper">\n\n    <ion-spinner *ngIf="searchIsLoading" class="search-spinner" name="dots"></ion-spinner>        \n\n    <ion-item  inset class="game-input" no-lines>\n\n      <ion-input (ionChange)="searchtTitle()" type="text" [(ngModel)]="searchInput" placeholder="Game title">\n\n      </ion-input>\n\n    </ion-item>\n\n    <h5 float-right class="tip-text">*tap games to toggle, hold to delete</h5>\n\n    <div class="autocomplete">\n\n      <ion-list>\n\n        <ion-item class="autocomplete-item" *ngFor="let item of searchOptions" (click)="addGameToProfile(item)">\n\n          \x3c!-- <img *ngIf="item.cover != null" src="{{item.cover.url}}"> --\x3e\n\n          <h5>{{item.name}}</h5>\n\n        </ion-item>\n\n      </ion-list>\n\n    </div>\n\n  </div>\n\n  \n\n  <h5 class="divider" style="margin-top: 30px;">Looking for</h5>\n\n\n\n  <div class="display-grid">\n\n    <div class="trade-item" *ngFor="let item of profile.user.wishList">\n\n      <div ion-long-press class="trade-img" (tap)="toggleItemOwnership(item, false)" [interval]="400" (onPressing)="removeItem(item, false)">\n\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n\n      </div>\n\n      <div class="platforms">\n\n        <img (tap)="toggleItemPlatform(item, \'xbox1\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n\n        <img (tap)="toggleItemPlatform(item, \'ps4\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n\n        <img (tap)="toggleItemPlatform(item, \'ns\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n\n      </div>\n\n    </div>    \n\n  </div>\n\n\n\n  <h5 class="divider">Owned</h5>\n\n  \n\n  <div class="display-grid">\n\n    <div class="trade-item" *ngFor="let item of profile.user.ownedList">\n\n      <div ion-long-press class="trade-img" (tap)="toggleItemOwnership(item, true)" [interval]="400" (onPressing)="removeItem(item, true)">\n\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n\n        <img *ngIf="!item.cover_url" class="fit-img" >\n\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n\n      </div>\n\n      <div class="platforms">\n\n        <img (tap)="toggleItemPlatform(item, \'xbox1\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n\n        <img (tap)="toggleItemPlatform(item, \'ps4\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n\n        <img (tap)="toggleItemPlatform(item, \'ns\', true)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n\n      </div>\n\n      \n\n    </div>    \n\n  </div>\n\n</div>\n\n\n\n\n\n</ion-content>\n\n\n\n'}),f("design:paramtypes",[o.f,s.a,a.a,r.a,u.a,o.a,o.b])],t)}()},303:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.id=t,this.name=e,this.cover_url=n,this.platforms=i}}()},307:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),o=n(19),a=n(43),r=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e,n){this.navCtrl=t,this.navParams=e,this.auth=n}return t.prototype.ionViewDidLoad=function(){},t.prototype.logout=function(){this.auth.logout()},t=r([Object(i.m)({selector:"page-options",template:'\x3c!--\n  Generated template for the OptionsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>Options</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <ion-list inset>\n  \t<ion-item (click)="logout()">\n  \t\tLogout\n  \t</ion-item>\n\t</ion-list>\n</ion-content>\n'}),s("design:paramtypes",[o.f,o.g,a.a])],t)}()},308:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(19),a=n(165),r=n(303),s=n(96),c=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.navCtrl=t,this.navParams=e,this.igdb=n,this.searchIsLoading=!1,this.searchOptions=[],this.cart=[],this.submitText="Evaluate"}return t.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad DealPage")},t.prototype.searchtTitle=function(){var t=this;this.searchIsLoading=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.searchInput||t.searchInput.length<2?t.clearSearch():t.igdb.search(t.searchInput).then(function(e){t.searchOptions=e,0==e.length&&t.searchOptions.push({id:"err",name:"No Games Found"}),t.searchIsLoading=!1})},300)},t.prototype.clearSearch=function(){this.searchIsLoading=!1,this.searchOptions=[]},t.prototype.addGameToCart=function(t){if("err"!==t.id){var e=[""];t.platforms&&(t.platforms.includes(s.a.PS4_ID)&&e.push(s.a.PS4),t.platforms.includes(s.a.NS_ID)&&e.push(s.a.NS),t.platforms.includes(s.a.XBOX1_ID)&&e.push(s.a.XBOX1));var n=null;t.cover&&(n=t.cover.url.replace("thumb","cover_big").replace("//","http://"));var i=new r.a(t.id,t.name,n,e);this.searchInput=null,this.cart.push(i),console.log(this.cart),this.clearSearch()}},t.prototype.removeItem=function(t){this.cart=this.cart.filter(function(e){return e.id!==t.id})},t=c([Object(i.m)({selector:"page-deal",template:'<ion-content  (click)="clearSearch()" padding>\n\n\t<div class="game-input-wrapper">\n    <ion-spinner *ngIf="searchIsLoading" class="search-spinner" name="dots"></ion-spinner>        \n    <div class="autocomplete">\n      <ion-list>\n        <ion-item class="autocomplete-item" *ngFor="let item of searchOptions" (click)="addGameToCart(item)">\n          \x3c!-- <img *ngIf="item.cover != null" src="{{item.cover.url}}"> --\x3e\n          <h5 style="margin-top: 0;">{{item.name}}</h5>\n        </ion-item>\n      </ion-list>\n    </div>\n\t\t\n\t</div>\n    <ion-item inset class="game-input" no-lines>\n      <ion-input (ionChange)="searchtTitle()" type="text" [(ngModel)]="searchInput" placeholder="Add a game">\n      </ion-input>\n    </ion-item>\n\n\n  <div class="display-grid">\n    <div class="trade-item" *ngFor="let item of cart">\n      <div ion-long-press class="trade-img" (tap)="toggleItemOwnership(item, false)" [interval]="400" (onPressing)="removeItem(item, false)">\n        <img-loader *ngIf="item.cover_url" class="fit-img" src="{{item.cover_url}}" ></img-loader>\n        <img *ngIf="!item.cover_url" class="fit-img" >\n        <h5 *ngIf="!item.cover_url" class="trade-img-title" >{{item.name}}</h5>\n      </div>\n      <div class="platforms">\n        <img (tap)="toggleItemPlatform(item, \'xbox1\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'xbox1\') == -1}" src="assets/imgs/xbox_icon.png">\n        <img (tap)="toggleItemPlatform(item, \'ps4\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ps4\') == -1}" src="assets/imgs/ps4_icon.png">\n        <img (tap)="toggleItemPlatform(item, \'ns\', false)" [ngClass]="{\'faded\': item.platforms.indexOf(\'ns\') == -1}" src="assets/imgs/ns_icon.png">\n      </div>\n    </div>    \n  </div>\n\n    <div *ngIf="cart.length == 0">\n      <h5 class="no-games-text">Add items you wish to trade-in and get money! (50% of retail price)</h5>\n    </div>\n  <div>\n    <button class="submit-btn" ion-button>{{submitText}}</button>\n  </div>\n\n</ion-content>\n'}),l("design:paramtypes",[o.f,o.g,a.a])],t)}()},309:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),o=n(19),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.navCtrl=t,this.navParams=e}return t.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad ShopPage")},t=a([Object(i.m)({selector:"page-shop",template:'<ion-content padding>\n\t<div class="row-1">\n\t\t<div class="device-container">\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/ps4_device.png">\n\t\t\t</div>\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/xbox1_device.png">\n\t\t\t</div>\n\t\t\t<div class="device">\n\t\t\t\t<img class="fit-img" src="assets/imgs/ns_device.png">\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="prices">\n\t\t\t<h5>&#x20B1;1000 / month</h5>\n\t\t\t<h5>&#x20B1;600 / 2weeks</h5>\n\t\t</div>\n\t</div>\n\n\t<div class="row-2">\n\t\t<div class="games">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/gfzcaqqg1iinenf1rntp.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/kqlntgss9yb5invq8nxi.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/rzjnrhuv5rozj52g9aq3.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/fxgwm1nnyexhvauqv0ds.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/cintjlnx6o8qyqtcnajl.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/kqlntgss9yb5invq8nxi.jpg">\n\t\t\t<img src="http://images.igdb.com/igdb/image/upload/t_cover_big/faqrpb5usp5leipmwgtq.jpg">\n\t\t</div>\n\n\t\t<div class="prices">\n\t\t\t<h5>&#x20B1;100 / month</h5>\n\t\t\t<h5>&#x20B1;50 / 2weeks</h5>\n\t\t</div>\n\n\t</div>\n\n\t\t<button class="order-btn" ion-button>Order</button>\n\t\n</ion-content>\n'}),r("design:paramtypes",[o.f,o.g])],t)}()},310:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),o=n(24),a=n(19),r=n(311),s=n(95),c=n(43),l=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n){this.navCtrl=t,this.auth=e,this.loginForm=n.group({email:["",o.g.compose([o.g.required,o.g.email])],password:["",o.g.compose([o.g.required,o.g.minLength(6)])]})}return t.prototype.login=function(){var t=this,e=this.loginForm.value;if(e.email){this.auth.signInWithEmail({email:e.email,password:e.password}).then(function(){return t.navCtrl.setRoot(s.a)},function(e){return t.loginError=e.message})}},t.prototype.signup=function(){this.navCtrl.push(r.a)},t.prototype.loginWithGoogle=function(){var t=this;this.auth.logInWithGoogle().then(function(){return t.navCtrl.setRoot(s.a)},function(t){return console.log(t.message)})},t=l([Object(i.m)({selector:"page-login",template:'<ion-content class="page-content" padding>\n  <form [formGroup]="loginForm">\n      <ion-list inset>\n        <ion-item [ngClass]="{ invalid: emailErrors.hasError(\'*\', [\'touched\', \'dirty\']) }">\n          <ion-input type="text" placeholder="Email" formControlName="email"></ion-input>\n        </ion-item>\n\n        <div ngxErrors="email" #emailErrors="ngxErrors">\n          <div [ngxError]="[\'email\', \'required\']" [when]="[\'touched\', \'dirty\']">It should be a valid email</div>\n        </div>\n\n        <ion-item [ngClass]="{ invalid: passwordErrors.hasError(\'*\', [\'touched\']) }">\n          <ion-input type="password" placeholder="Password" formControlName="password"></ion-input>\n        </ion-item>\n\n        <div ngxErrors="password" #passwordErrors="ngxErrors">\n          <div [ngxError]="[\'minlength\', \'required\']" [when]="[\'touched\']">It should be at least 5 characters</div>\n        </div>\n      </ion-list>\n\n      <div padding-horizontal>\n        <div class="form-error">{{loginError}}</div>\n\n        <button class="login-btn" ion-button full type="submit" [disabled]="!loginForm.valid" (click)="login()" >Log in</button>\n        <div class="login-footer">\n          <p>\n            <a href="#">Forgot password?</a>\n            If you\'re a new user, please sign up.\n          </p>\n        </div>\n      </div>\n\n        <ion-list class="login-options-list">\n          <button ion-button icon-start block clear (click)="loginWithGoogle()">\n            <ion-icon name="logo-google"></ion-icon>\n            Log in with Google\n          </button>\n\n          <button ion-button icon-start block clear (click)="signup()">\n            <ion-icon name="person-add"></ion-icon>\n            Sign up\n          </button>\n        </ion-list>\n    </form>\n</ion-content>\n'}),u("design:paramtypes",[a.f,c.a,o.a])],t)}()},311:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),o=n(19),a=n(24),r=n(43),s=n(95),c=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,i){this.navCtrl=t,this.navParams=e,this.auth=n,this.canSubmit=!1,this.validation_messages={first_name:[{type:"required",message:"first name is required."},{type:"minlength",message:"first name must be at least 3 characters long."},{type:"maxlength",message:"first name cannot be more than 20 characters long."},{type:"validUsername",message:"Your username has already been taken."}],last_name:[{type:"required",message:"last name is required."},{type:"minlength",message:"last name must be at least 3 characters long."},{type:"maxlength",message:"last name cannot be more than 20 characters long."},{type:"validUsername",message:"Your username has already been taken."}],email:[{type:"required",message:"email is required."},{type:"email",message:"must be a valid email."}],password:[{type:"required",message:"password is required."},{type:"pattern",message:"password must contain 1 upper case and 1 number."},{type:"minlength",message:"password must be at least 8 characters."}]},this.passwordType="password",this.showPasswordIcon="ios-eye-off";this.signupForm=i.group({first_name:["",a.g.compose([a.g.required,a.g.minLength(3),a.g.maxLength(20)])],last_name:["",a.g.compose([a.g.required,a.g.minLength(3),a.g.maxLength(20)])],email:["",a.g.compose([a.g.required,a.g.email])],password:["",a.g.compose([a.g.required,a.g.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]+$"),a.g.minLength(8),a.g.maxLength(20)])]})}return t.prototype.ionViewDidLoad=function(){},t.prototype.checkForm=function(){this.canSubmit=null==this.signupForm.errors},t.prototype.showPassword=function(){"password"==this.passwordType?(this.passwordType="text",this.showPasswordIcon="ios-eye"):(this.passwordType="password",this.showPasswordIcon="ios-eye-off")},t.prototype.signup=function(){var t=this;this.auth.signUp({firstName:this.signupForm.value.first_name,lastName:this.signupForm.value.last_name,email:this.signupForm.value.email,password:this.signupForm.value.password}).then(function(){return t.navCtrl.setRoot(s.a)},function(t){return console.log("signup error",t)})},t=c([Object(i.m)({selector:"page-signup",template:'<ion-header>\n  <ion-navbar>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding class="page-content">\n  \n  <form (ngSubmit)="signup()" [formGroup]="signupForm" (change)="checkForm()">\n\n  \t\t<h2>Signup</h2>\n      <ion-list inset>\n\n        <ion-item style="margin-top: 20px;">\n          <ion-input type="text" placeholder="First Name" formControlName="first_name"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.first_name" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'first_name\').hasError(validation.type) && (signupForm.get(\'first_name\').dirty || signupForm.get(\'first_name\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n        <ion-item style="margin-top: 20px;" >\n          <ion-input type="text" placeholder="Last Name" formControlName="last_name"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.last_name" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'last_name\').hasError(validation.type) && (signupForm.get(\'last_name\').dirty || signupForm.get(\'last_name\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n        <ion-item >\n          <ion-input type="text" placeholder="Email" formControlName="email"></ion-input>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.email" >\n\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'email\').hasError(\'required\') && \n\t        \t(signupForm.get(\'email\').dirty || signupForm.get(\'email\').touched) &&\n\t        \tvalidation.type == \'required\'\n\t        \t" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n\t        \t<h5 class="error-msg" *ngIf="!signupForm.get(\'email\').hasError(\'required\') && signupForm.get(\'email\').hasError(validation.type) && (signupForm.get(\'email\').dirty || signupForm.get(\'email\').touched);" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n        <ion-item>\n          <ion-input type="{{passwordType}}" placeholder="Password" formControlName="password"></ion-input>\n        \t<ion-icon name="{{showPasswordIcon}}" (click)="showPassword()" item-right></ion-icon>\n        </ion-item>\n        \n        <div class="error-list" >\n        \t<div *ngFor="let validation of validation_messages.password" >\n\t        \t<h5 class="error-msg" *ngIf="signupForm.get(\'password\').hasError(validation.type) && (signupForm.get(\'password\').dirty || signupForm.get(\'password\').touched)" >\n\t        \t\t{{validation.message}}\n\t        \t</h5>\n        \t</div>\n        </div>\n\n      </ion-list>\n\n      <div class="btn-container">\n      \t<button ion-button type="submit" [disabled]="!signupForm.valid">Submit</button>\n      </div>\n\n\n    </form>\n\n</ion-content>\n'}),l("design:paramtypes",[o.f,o.g,r.a,a.a])],t)}()},314:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(315),o=n(437);Object(i.a)().bootstrapModule(o.a)},43:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),o=n(287),a=n(159),r=(n.n(a),n(291)),s=n(93),c=n(94),l=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n){var i=this;this.afAuth=t,this.geolocation=e,this.afdb=n,t.authState.subscribe(function(t){console.log("user",t),i.user=t})}return t.prototype.signInWithEmail=function(t){return this.afAuth.auth.signInWithEmailAndPassword(t.email,t.password)},t.prototype.signUp=function(t){var e=this;return new Promise(function(n,i){e.afAuth.auth.createUserWithEmailAndPassword(t.email,t.password).then(function(o){var a=new r.a;a.first_name=t.firstName,a.last_name=t.lastName,a.email=t.email,e.geolocation.getCurrentPosition().then(function(t){a.last_location={lat:t.coords.latitude,long:t.coords.longitude},e.afdb.list("/users").push(a).then(function(t){e.afdb.list("/users").update(t.key,{key:t.key}),n()})}).catch(function(t){i(),console.log("Error getting location",t)})})})},Object.defineProperty(t.prototype,"authenticated",{get:function(){return null!==this.user},enumerable:!0,configurable:!0}),t.prototype.getEmail=function(){return this.user&&this.user.email},t.prototype.logout=function(){return this.user=null,this.afAuth.auth.signOut()},t.prototype.logInWithGoogle=function(){return this.afAuth.auth.signInWithPopup(new a.auth.GoogleAuthProvider)},t.prototype.logInWithGoogleRedirect=function(){var t=this;return this.afAuth.auth.signInWithRedirect(new a.auth.GoogleAuthProvider).then(function(){return t.afAuth.auth.getRedirectResult().then(function(t){var e=t.credential.accessToken,n=t.user;console.log(e,n)}).catch(function(t){alert(t.message)})})},t=l([Object(i.A)(),u("design:paramtypes",[o.a,c.a,s.a])],t)}()},437:function(t,e,n){"use strict";n.d(e,"a",function(){return U});var i=n(0),o=n(53),a=n(19),r=n(477),s=n(284),c=n(286),l=n(158),u=n(287),d=n(96),p=n(519),f=n(299),h=n(301),m=n(302),g=n(95),v=n(310),b=n(311),y=n(307),_=n(163),w=n(164),O=n(308),P=n(309),R=n(43),I=n(94),j=n(93),L=n(165),T=n(37),k=n(162),x=n(48),C=n(532),E=n(72),A=n(536),F=n(537),S=n(304),D=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},U=function(){function t(){}return t=D([Object(i.I)({declarations:[r.a,_.a,f.a,h.a,m.a,v.a,b.a,y.a,w.a,O.a,P.a,g.a],imports:[o.a,a.e.forRoot(r.a,{},{links:[]}),l.a.initializeApp(d.b.web),j.b,T.b,A.a,C.a,S.b.forRoot(),p.a],bootstrap:[a.c],entryComponents:[r.a,_.a,f.a,h.a,m.a,v.a,b.a,y.a,w.a,O.a,P.a,g.a],providers:[s.a,c.a,{provide:i.u,useClass:a.d},u.a,I.a,j.a,R.a,T.a,L.a,k.a,x.a,E.a,F.a]})],t)}()},477:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n(0),o=n(19),a=n(284),r=n(286),s=n(43),c=n(93),l=n(16),u=n(48),d=n(94),p=n(162),f=n(95),h=n(310),m=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},g=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e,n,i,o,a,r,s){var c=this;this.platform=t,this.statusBar=e,this.splashScreen=n,this.afdb=i,this.auth=o,this.profile=a,this.geolocation=r,this.trade=s,this.rootPage=null,t.ready().then(function(){e.styleDefault(),n.hide(),o.afAuth.authState.subscribe(function(t){if(console.log("app component subscription"),t){c.rootPage=f.a;c.initProfile(t).then(function(t){})}else c.rootPage=h.a},function(){c.rootPage=h.a})})}return t.prototype.initProfile=function(t){var e=this;return new Promise(function(n,i){var o=e.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),a=o.snapshotChanges().pipe(Object(l.map)(function(t){return t.map(function(t){return m({key:t.payload.key},t.payload.val())})})).subscribe(function(t){t[0]&&t[0].key&&(console.log("fb user",t),e.profile.user.profileImage=t[0].profile_image||"assets/imgs/temp_profile_img_1.png",e.profile.user.name=t[0].first_name+" "+t[0].last_name,e.profile.user.first_name=t[0].first_name||"",e.profile.user.last_name=t[0].last_name||"",e.profile.user.email=t[0].email||"",e.profile.user.wishList=t[0].wishList||[],e.profile.user.ownedList=t[0].ownedList||[],e.profile.user.key=t[0].key||"",e.profile.user.conversations=t[0].conversations||[],e.profile.user.trade_locations=t[0].trade_locations||[],console.log(">>geolocation ",e.profile.user),e.geolocation.getCurrentPosition({timeout:2e4,enableHighAccuracy:!0}).then(function(i){o.update(t[0].key,{last_location:{lat:i.coords.latitude,long:i.coords.longitude}}).then(function(t){n()}),console.log(">>user from component ",e.profile.user),a.unsubscribe()}).catch(function(t){i(console.log(">>Error getting location",t))}))})})},t=g([Object(i.m)({template:'<ion-nav [root]="rootPage"></ion-nav>\n'}),v("design:paramtypes",[o.h,a.a,r.a,c.a,s.a,u.a,d.a,p.a])],t)}()},48:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(37),o=n(0),a=n(291),r=n(510),s=(n.n(r),n(72)),c=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.http=t,this.fbapp=e,this.allListsUpdateTimeout=null,this.wishListUpdateTimeout=null,this.ownedListUpdateTimeout=null,this.user=new a.a}return t.prototype.addGameToProfile=function(t,e,n){var i=r.find(this.user.wishList,function(t){return t.id===e.id});e.platforms||(e.platforms=[]),console.log("addGamToProfile: ",e),i?(this.user.ownedList.push(e),this.fbapp.updateUserOwnedList(t,this.user.ownedList)):(this.user.wishList.push(e),this.fbapp.updateUserWishList(t,this.user.wishList))},t.prototype.toggleItemOwnership=function(t,e,n){if(n){if(r.find(this.user.wishList,function(t){return t.id===e.id}))return;this.user.wishList.push(e),this.user.ownedList=r.reject(this.user.ownedList,function(t){return t.id===e.id})}else{if(r.find(this.user.ownedList,function(t){return t.id===e.id}))return;this.user.ownedList.push(e),this.user.wishList=r.reject(this.user.wishList,function(t){return t.id===e.id})}this.startAllListsUpdateTImer(t)},t.prototype.toggleItemPlatform=function(t,e,n,i){r.contains(e.platforms,n)?e.platforms=r.reject(e.platforms,function(t){return t===n}):e.platforms.push(n),i?this.startWishListUpdateTImer(t):this.startOwnedListUpdateTImer(t)},t.prototype.removeItem=function(t,e,n){n?(this.user.ownedList=r.reject(this.user.ownedList,function(t){return t.id===e.id}),this.startOwnedListUpdateTImer(t)):(this.user.wishList=r.reject(this.user.wishList,function(t){return t.id===e.id}),this.startWishListUpdateTImer(t))},t.prototype.isItemMatch=function(t){for(var e=0,n=this.user.wishList;e<n.length;e++){if(n[e].id===t.id)return!0}return!1},t.prototype.startAllListsUpdateTImer=function(t){clearTimeout(this.allListsUpdateTimeout);var e=this;this.allListsUpdateTimeout=setTimeout(function(){e.fbapp.updateUserWishList(t,e.user.wishList),e.fbapp.updateUserOwnedList(t,e.user.ownedList)},1e3)},t.prototype.startWishListUpdateTImer=function(t){clearTimeout(this.wishListUpdateTimeout);var e=this;this.wishListUpdateTimeout=setTimeout(function(){e.fbapp.updateUserWishList(t,e.user.wishList)},1e3)},t.prototype.startOwnedListUpdateTImer=function(t){clearTimeout(this.ownedListUpdateTimeout);var e=this;this.ownedListUpdateTimeout=setTimeout(function(){e.fbapp.updateUserOwnedList(t,e.user.ownedList)},1e3)},t=c([Object(o.A)(),l("design:paramtypes",[i.a,s.a])],t)}()},512:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n,i){this.text="",this.sender="",this.senderKey="",this.text=t,this.sender=e,this.senderKey=n,this.createdAt=i}}()},513:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(t,e,n){this.key="",this.traderKey="",this.name="",this.key=t,this.traderKey=e,this.name=n}}()},532:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),o=n(533),a=n(534),r=n(535),s=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},c=function(){function t(){}return t=s([Object(i.I)({declarations:[o.a,a.a,r.a],imports:[],exports:[o.a,a.a,r.a]})],t)}()},533:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=function(){function t(){}return t.prototype.transform=function(t,e){var n=[];for(var i in t)n.push(t);return n},t=o([Object(i.S)({name:"keys"})],t)}()},534:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?t.replace(e[0],e[1]):""},t=o([Object(i.S)({name:"replace"})],t)}()},535:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(0),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Math.ceil(parseFloat(t))},t=o([Object(i.S)({name:"ceil"})],t)}()},537:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(37),o=n(0),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.http=t,console.log("Hello UiProvider Provider")}return t.prototype.getRandomProfileImage=function(){return 0},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t=a([Object(o.A)(),r("design:paramtypes",[i.a])],t)}()},72:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(37),o=n(0),a=n(16),r=n(512),s=n(513),c=n(159),l=(n.n(c),n(93)),u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},d=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e){this.http=t,this.afdb=e,console.log("Hello FirebaseappProvider Provider")}return t.prototype.updateUserTradeLocations=function(t,e){this.afdb.list("/users/"+t+"/").set("trade_locations",e)},t.prototype.updateUserWishList=function(t,e){var n=this.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),i=n.snapshotChanges().pipe(Object(a.map)(function(t){return t.map(function(t){return u({key:t.payload.key},t.payload.val())})})).subscribe(function(t){if(console.log("get user data",t),t[0]){var o=t[0].key;console.log("adding to wishlist["+o+"]",e),n.update(o,{wishList:e}),i.unsubscribe()}})},t.prototype.updateUserOwnedList=function(t,e){var n=this.afdb.list("/users",function(e){return e.orderByChild("email").equalTo(t.email)}),i=n.snapshotChanges().pipe(Object(a.map)(function(t){return t.map(function(t){return u({key:t.payload.key},t.payload.val())})})).subscribe(function(t){if(console.log("get user data",t),t[0]){var o=t[0].key;console.log("adding to owned["+o+"]",e),n.update(o,{ownedList:e}),i.unsubscribe()}})},t.prototype.getConversationMessages=function(t){return this.afdb.list("/conversations/"+t+"/messages/").valueChanges(["child_added"])},t.prototype.getTraderConversationKey=function(t,e){console.log("-fbapp getTraderConversationKey: ",t.conversations,e.conversations);if(t.conversations&&e.conversations){for(var n in e.conversations)for(var i in t.conversations)if(t.conversations[i].key===e.conversations[n].key)return e.conversations[n].key;return null}console.log("r")},t.prototype.createNewThread=function(t,e,n){console.log("push convo "+n,t,e);var i={};i[t.key]=!0,i[e.key]=!0;var o=new r.a(n,e.name,e.key,c.database.ServerValue.TIMESTAMP),a=this.pushConversation([o],i);e.conversations=e.conversations?e.conversations:[];var l=new s.a(a.key,t.key,t.first_name+" "+t.last_name);e.conversations[a.key]=l,console.log("uckey:",e.conversations),this.updateUserConversation(e.key,a.key,l),t.conversations=t.conversations?t.conversations:[];var u=new s.a(a.key,e.key,e.first_name+" "+e.last_name);t.conversations[a.key]=u;this.afdb.list("/users/"+t.key+"/conversations/").update(a.key,u);return a},t.prototype.updateUserConversation=function(t,e,n){return this.afdb.list("/users/"+t+"/conversations/").update(e,n)},t.prototype.pushConversation=function(t,e){return this.afdb.list("/conversations").push({messages:t,members:e})},t.prototype.updateConversation=function(t,e,n,i){var o=this;console.log("update convo "+t);var a=this.afdb.object("/conversations/"+t).snapshotChanges().subscribe(function(e){try{var s=e.payload.val();if(!s)return;s.messages=s.messages||[];var l=new r.a(i,n.name,n.key,c.database.ServerValue.TIMESTAMP);s.messages.push(l),o.afdb.list("/conversations").update(t,{messages:s.messages}),console.log("converRef update: ",e.payload.val()),a.unsubscribe()}catch(t){console.log("Error updating conversation ",t)}})},t.prototype.getUserConversations=function(t){return this.afdb.object("/users/"+t.key+"/conversations/").snapshotChanges()},t.prototype.getMessages=function(t){var e=this.getUserConversations(t).subscribe(function(t){t.payload.val(),e.unsubscribe()})},t.prototype.getProfile=function(t){var e=this;return new Promise(function(n,i){var o=e.afdb.object("/users/"+t).snapshotChanges().subscribe(function(t){n(t.payload.val()),o.unsubscribe()})})},t=d([Object(o.A)(),p("design:paramtypes",[i.a,l.a])],t)}()},95:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(0),o=n(19),a=n(299),r=n(301),s=n(302),c=n(307),l=n(308),u=n(309),d=n(43),p=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e){this.navCtrl=t,this.auth=e,this.tab1Root=s.a,this.tab2Root=a.a,this.tab3Root=r.a,this.tab4Root=l.a,this.tab5Root=u.a}return t.prototype.navTo=function(t){this.navCtrl.push(c.a,{},{animate:!0,direction:"forward"})},t.prototype.logout=function(){this.auth.logout()},t=p([Object(i.m)({selector:"page-tabs",template:'<ion-header class="ps4-header">\n  <ion-navbar>\n    <ion-title></ion-title>\n\n    <ion-icon class="settings" name="settings" menuToggle></ion-icon>\n   \n  </ion-navbar>\n</ion-header>\n\n\n<ion-nav #mycontent [root]="rootPage">\n</ion-nav>\n\n<ion-menu class="tabs-menu" side="right" [content]="mycontent">\n  <ion-content>\n\n  \t<ion-list>\n  \t\t<ion-item (click)="logout()" >\n  \t\t\tLogout\n  \t\t</ion-item>\n  \t</ion-list>\n \t\t\n  </ion-content>\n</ion-menu>\n\n\n\n<ion-tabs tabsPlacement="bottom" selectedIndex="0">\n  <ion-tab [root]="tab1Root" tabTitle="Profile" tabIcon="contact"></ion-tab>\n  <ion-tab [root]="tab2Root" tabTitle="Trade" tabIcon="contacts"></ion-tab>\n  <ion-tab [root]="tab3Root" tabTitle="Messages" tabIcon="chatbubbles"></ion-tab>\n  <ion-tab [root]="tab4Root" tabTitle="Deal" tabIcon="logo-usd"></ion-tab>\n  <ion-tab [root]="tab5Root" tabTitle="Buy/Rent" tabIcon="cart"></ion-tab>\n</ion-tabs>'}),f("design:paramtypes",[o.f,d.a])],t)}()},96:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var i={web:{apiKey:"AIzaSyCs8fw6B3hdkNBkf9o48V_0sTGhxC1Pg_E",authDomain:"console-trade.firebaseapp.com",databaseURL:"https://console-trade.firebaseio.com",projectId:"console-trade",storageBucket:"console-trade.appspot.com",messagingSenderId:"670922071182"}},o={PS4:"ps4",XBOX1:"xbox1",NS:"ns",PS4_ID:48,NS_ID:130,XBOX1_ID:49}}},[314]);