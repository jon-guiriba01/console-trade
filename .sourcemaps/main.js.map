{"version":3,"sources":["../../src/providers/trade/trade.ts","../../src/pages/chat/chat.ts","../../src/pages/map/map.ts","../../src/providers/igdb/igdb.ts","../../src/pages/login/login.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/models/profile.ts","../../src/pages/trade/trade.ts","../../src/pages/courier-popover/courier-popover.ts","../../src/pages/messages/messages.ts","../../src/pages/profile/profile.ts","../../src/models/game.ts","../../src/providers/storage/storage.ts","../../src/pages/options/options.ts","../../src/pages/deal/deal.ts","../../src/pages/shop/shop.ts","../../src/pages/signup/signup.ts","../../src/pages/resetpassword/resetpassword.ts","../../src/app/main.ts","../../src/providers/app-auth/app-auth.ts","../../src/providers/profile/profile.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/firebaseapp/firebaseapp.ts","../../src/models/message.ts","../../src/models/userConversation.ts","../../src/pages/all-traders/all-traders.ts","../../src/pipes/pipes.module.ts","../../src/pipes/keys/keys.ts","../../src/pipes/replace/replace.ts","../../src/pipes/distance/distance.ts","../../src/providers/ui/ui.ts","../../src/pages/tabs/tabs.ts","../../src/providers/messages/messages.ts","../../src/config.ts"],"names":["TradeProvider","http","this","matchingTraders","loading","prototype","getNearestPossibleTrades","key","limit","offset","_this","Promise","resolve","reject","headers","__WEBPACK_IMPORTED_MODULE_0__angular_common_http__","set","url","httpSub","get","subscribe","res","unsubscribe","getNearestTrades","__decorate","Object","__WEBPACK_IMPORTED_MODULE_1__angular_core__","ChatPage","navCtrl","navParams","profile","fbApp","auth","app","popoverCtrl","messages","message","thread","userOfferedGames","traderOfferedGames","courier","name","trader","currentConversation","converKey","getTraderConversationKey","user","readConversation","chatSub","getConversationMessages","setTimeout","__WEBPACK_IMPORTED_MODULE_9_jquery__","scrollTop","scrollHeight","observeTraderOfferedGames","observeUserOfferedGames","ionViewDidLoad","traderOfferedGamesSub","getOfferedGames","matchingTrades","_i","res_1","length","game","_a","_b","traderGame","id","isSelected","userOfferedGamesSub","matchingWishes","res_2","ionViewWillEnter","ionViewDidLeave","send","trim","updateConversation","createNewThread","navToMap","getRootNavs","push","__WEBPACK_IMPORTED_MODULE_6__pages_map_map__","target","selectGame","clearTimeout","saveTimeout","filter","e","updateConversationOffers","selectCourier","popover","create","__WEBPACK_IMPORTED_MODULE_7__pages_courier_popover_courier_popover__","present","onDidDismiss","__WEBPACK_IMPORTED_MODULE_0__angular_core__","selector","template","__WEBPACK_IMPORTED_MODULE_1_ionic_angular__","__WEBPACK_IMPORTED_MODULE_2__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_3__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_4__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_8__providers_messages_messages__","MapPage","platform","geolocation","loadCtrl","markers","searchInput","canEdit","sessionToken","google","maps","places","AutocompleteSessionToken","customTarget","target_locations","ready","then","geocoder","Geocoder","AutocompleteService","initMap","searchLocation","timeout","getPlacePredictions","input","getCurrentPosition","resp","mylocation","LatLng","coords","latitude","longitude","map","Map","mapElement","nativeElement","zoom","disableDefaultUI","center","addMarker","label","remember","initAutoComplete","initClickEvent","trade_locations","initMarkers","catch","console","log","tradeLocations","self","tradeLocations_1","geocode","address","status","geometry","location","userLocation","document","getElementById","controls","ControlPosition","TOP_LEFT","circle","Circle","radius","accuracy","PlacesService","Autocomplete","bounds","getBounds","strictBounds","addListener","place","getPlace","panTo","setZoom","addTradeLocation","clearAutocomplete","__WEBPACK_IMPORTED_MODULE_5_jquery__","val","event","latLng","lat","lng","formatted_address","dismiss","dbTimeout","removeLastTradeLocation","updateUserTradeLocations","shift","setMap","position","options","marker","Marker","icon","setMapOnAll","i","clearMarkers","deleteMarkers","findLocation","__WEBPACK_IMPORTED_MODULE_3__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_4__providers_firebaseapp_firebaseapp__","IgdbProvider","searchOptions","search","excludedPlatforms","included","indexOf","gameIds","first","r","filteredSearch","removeUnsupportedPlatforms","games","platforms","__WEBPACK_IMPORTED_MODULE_2__config__","PS4_ID","XBOX1_ID","NS_ID","LoginPage","fb","loginForm","group","email","__WEBPACK_IMPORTED_MODULE_1__angular_forms__","compose","required","password","minLength","login","data","value","signInWithEmail","setRoot","__WEBPACK_IMPORTED_MODULE_5__tabs_tabs__","error","loginError","signup","__WEBPACK_IMPORTED_MODULE_3__signup_signup__","loginWithGoogle","googleLogin","onSignIn","navToPassword","__WEBPACK_IMPORTED_MODULE_4__resetpassword_resetpassword__","__WEBPACK_IMPORTED_MODULE_2_ionic_angular__","webpackEmptyAsyncContext","req","Error","keys","module","exports","__webpack_require__","d","__webpack_exports__","Profile","profileImage","first_name","last_name","wishList","ownedList","consoles","last_location","gender","addToWishList","addToOwnedList","TradePage","trade","events","storage","refresh","showDisclaimer","showMatchingOnly","traders","hasMore","getTrades","showChat","__WEBPACK_IMPORTED_MODULE_4__pages_chat_chat__","expandToggle","expanded","confirmDisclaimer","toggleTraders","showMore","userKey","concat","__WEBPACK_IMPORTED_MODULE_3__providers_trade_trade__","__WEBPACK_IMPORTED_MODULE_6__ionic_storage__","CourierPopoverPage","viewCtrl","couriers","logo","price","opt","MessagesPage","traderOwned","_c","_d","_e","traderWish","_f","_g","userOwned","__WEBPACK_IMPORTED_MODULE_5__pages_chat_chat__","getRandomPic","getRandomInt","min","max","Math","floor","random","__WEBPACK_IMPORTED_MODULE_3__providers_messages_messages__","ProfilePage","igdb","imgLoader","transfer","file","fileChooser","imagePicker","fbStorage","loadingCtrl","imageResizer","searchIsLoading","setBackgroundSize","toggleItemList","item","owned","publish","toggleItemPlatform","removeItem","searchtTitle","clearSearch","addGameToProfile","includes","__WEBPACK_IMPORTED_MODULE_6__config__","PS4","NS","XBOX1","cover","replace","__WEBPACK_IMPORTED_MODULE_5__models_game__","__WEBPACK_IMPORTED_MODULE_8__pages_map_map__","uploadImage","is","uploadImage_web","uploadImage_and","getPictures","maximumImagesCount","outputType","resolveLocalFilesystemUrl","resize","uri","nativeURL","quality","width","height","filePath","readAsDataURL","filesystem","root","storeImage","__WEBPACK_IMPORTED_MODULE_13_jquery__","trigger","change","getBase64","base64","content","updateUserProfileImage","err","reader","FileReader","onload","result","onerror","getExt","filename","idx","lastIndexOf","substr","__WEBPACK_IMPORTED_MODULE_2__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_3__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_7_ionic_image_loader__","__WEBPACK_IMPORTED_MODULE_9__ionic_native_file_transfer__","__WEBPACK_IMPORTED_MODULE_10__ionic_native_file__","__WEBPACK_IMPORTED_MODULE_11__ionic_native_file_chooser__","__WEBPACK_IMPORTED_MODULE_12__ionic_native_image_picker__","__WEBPACK_IMPORTED_MODULE_15__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_14__providers_storage_storage__","__WEBPACK_IMPORTED_MODULE_16__ionic_native_image_resizer__","Game","cover_url","StorageProvider","image","userEmail","storageRef","__WEBPACK_IMPORTED_MODULE_2_firebase__","ref","child","putString","on","_snapshot","_err","getDownloadURL","OptionsPage","emailComposer","feedback","open","to","subject","logout","__WEBPACK_IMPORTED_MODULE_3__ionic_native_email_composer__","DealPage","cart","submitText","addGameToCart","__WEBPACK_IMPORTED_MODULE_4__config__","__WEBPACK_IMPORTED_MODULE_3__models_game__","__WEBPACK_IMPORTED_MODULE_2__providers_igdb_igdb__","ShopPage","SignupPage","keyboard","canSubmit","validation_messages","type","passwordType","showPasswordIcon","disableScroll","signupForm","__WEBPACK_IMPORTED_MODULE_2__angular_forms__","maxLength","pattern","ionViewDidEnter","ionViewWillLeave","checkForm","errors","showPassword","signUp","firstName","lastName","__WEBPACK_IMPORTED_MODULE_4__tabs_tabs__","__WEBPACK_IMPORTED_MODULE_3__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_keyboard__","ResetpasswordPage","toastCtrl","resetPassword","showToast","msg","redirect","toast","duration","__WEBPACK_IMPORTED_MODULE_3__login_login__","__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__","bootstrapModule","__WEBPACK_IMPORTED_MODULE_1__app_module__","AppAuthProvider","afAuth","afdb","googlePlus","credentials","signInWithEmailAndPassword","form","createUserWithEmailAndPassword","sendEmailVerification","__WEBPACK_IMPORTED_MODULE_3__models_profile__","toLowerCase","getRandomProfileImage","getUserCurrentPosition","coord","list","snap","update","geodata","long","defineProperty","getEmail","signOut","sendPasswordResetEmail","webClientId","offline","googleCredential","__WEBPACK_IMPORTED_MODULE_2_firebase_app__","GoogleAuthProvider","credential","idToken","signInWithCredential","response","JSON","stringify","logInWithGoogle","signInWithPopup","logInWithGoogleRedirect","signInWithRedirect","getRedirectResult","alert","__WEBPACK_IMPORTED_MODULE_1_angularfire2_auth__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_4_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_6__ionic_native_google_plus__","__WEBPACK_IMPORTED_MODULE_7_ionic_angular__","ProfileProvider","fbapp","allListsUpdateTimeout","wishListUpdateTimeout","ownedListUpdateTimeout","__WEBPACK_IMPORTED_MODULE_2__models_profile__","fbUser","duplicate","__WEBPACK_IMPORTED_MODULE_3_underscore_underscore__","updateUserOwnedList","updateUserWishList","authUser","startAllListsUpdateTImer","el","startWishListUpdateTImer","startOwnedListUpdateTImer","isItemMatch","__WEBPACK_IMPORTED_MODULE_5_ionic_angular__","AppModule","declarations","__WEBPACK_IMPORTED_MODULE_3__app_component__","__WEBPACK_IMPORTED_MODULE_17__pages_chat_chat__","__WEBPACK_IMPORTED_MODULE_10__pages_trade_trade__","__WEBPACK_IMPORTED_MODULE_11__pages_messages_messages__","__WEBPACK_IMPORTED_MODULE_12__pages_profile_profile__","__WEBPACK_IMPORTED_MODULE_14__pages_login_login__","__WEBPACK_IMPORTED_MODULE_15__pages_signup_signup__","__WEBPACK_IMPORTED_MODULE_16__pages_options_options__","__WEBPACK_IMPORTED_MODULE_18__pages_map_map__","__WEBPACK_IMPORTED_MODULE_19__pages_deal_deal__","__WEBPACK_IMPORTED_MODULE_20__pages_shop_shop__","__WEBPACK_IMPORTED_MODULE_21__pages_courier_popover_courier_popover__","__WEBPACK_IMPORTED_MODULE_22__pages_resetpassword_resetpassword__","__WEBPACK_IMPORTED_MODULE_23__pages_all_traders_all_traders__","__WEBPACK_IMPORTED_MODULE_13__pages_tabs_tabs__","imports","__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__","forRoot","scrollAssist","autoFocusAssist","links","__WEBPACK_IMPORTED_MODULE_6_angularfire2__","initializeApp","__WEBPACK_IMPORTED_MODULE_8__config__","web","__WEBPACK_IMPORTED_MODULE_26_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_28__angular_common_http__","__WEBPACK_IMPORTED_MODULE_33_ionic_long_press__","__WEBPACK_IMPORTED_MODULE_31__pipes_pipes_module__","__WEBPACK_IMPORTED_MODULE_35_ionic_image_loader__","__WEBPACK_IMPORTED_MODULE_9__ultimate_ngxerrors__","__WEBPACK_IMPORTED_MODULE_43__ionic_storage__","bootstrap","entryComponents","providers","__WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_splash_screen__","provide","useClass","__WEBPACK_IMPORTED_MODULE_7_angularfire2_auth__","__WEBPACK_IMPORTED_MODULE_25__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_24__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_27__providers_igdb_igdb__","__WEBPACK_IMPORTED_MODULE_29__providers_trade_trade__","__WEBPACK_IMPORTED_MODULE_30__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_32__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_34__providers_ui_ui__","__WEBPACK_IMPORTED_MODULE_36__ionic_native_file_transfer__","__WEBPACK_IMPORTED_MODULE_37__ionic_native_file__","__WEBPACK_IMPORTED_MODULE_38__ionic_native_file_chooser__","__WEBPACK_IMPORTED_MODULE_39__ionic_native_image_picker__","__WEBPACK_IMPORTED_MODULE_41__ionic_native_image_resizer__","__WEBPACK_IMPORTED_MODULE_42__ionic_native_google_plus__","__WEBPACK_IMPORTED_MODULE_44__ionic_native_email_composer__","__WEBPACK_IMPORTED_MODULE_40__providers_storage_storage__","__WEBPACK_IMPORTED_MODULE_46__ionic_native_keyboard__","__WEBPACK_IMPORTED_MODULE_45__providers_messages_messages__","MyApp","statusBar","splashScreen","rootPage","styleDefault","hide","authState","load_1","__WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__","initProfile","__WEBPACK_IMPORTED_MODULE_11__pages_login_login__","userRef","orderByChild","equalTo","userSub","snapshotChanges","pipe","__WEBPACK_IMPORTED_MODULE_6_rxjs_operators__","changes","c","__assign","payload","conversations","enableHighAccuracy","__WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__","__WEBPACK_IMPORTED_MODULE_5_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_7__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_8__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_9__providers_trade_trade__","FirebaseappProvider","conversationKey","valueChanges","selectedGames","__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__","limitToLast","u","t","members","__WEBPACK_IMPORTED_MODULE_3__models_message__","__WEBPACK_IMPORTED_MODULE_5_firebase_app__","ServerValue","TIMESTAMP","converRef","pushConversation","userConversation","__WEBPACK_IMPORTED_MODULE_4__models_userConversation__","updateUserConversation","traderConversation","conversation","unread","getUserConversations","getProfile","subscription","object","__WEBPACK_IMPORTED_MODULE_6_angularfire2_database__","Message","text","sender","senderKey","createdAt","UserConversation","traderKey","AllTradersPage","PipesModule","__WEBPACK_IMPORTED_MODULE_1__keys_keys__","__WEBPACK_IMPORTED_MODULE_2__replace_replace__","__WEBPACK_IMPORTED_MODULE_3__distance_distance__","KeysPipe","transform","args","values","ReplacePipe","arguments","DistancePipe","ceil","parseFloat","UiProvider","TabsPage","tab1Root","__WEBPACK_IMPORTED_MODULE_4__profile_profile__","tab2Root","__WEBPACK_IMPORTED_MODULE_2__trade_trade__","tab3Root","__WEBPACK_IMPORTED_MODULE_3__messages_messages__","tab4Root","__WEBPACK_IMPORTED_MODULE_6__deal_deal__","tab5Root","__WEBPACK_IMPORTED_MODULE_7__shop_shop__","loadConversations","navTo","page","__WEBPACK_IMPORTED_MODULE_5__options_options__","animate","direction","__WEBPACK_IMPORTED_MODULE_9__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_10__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_11__providers_messages_messages__","MessagesProvider","unreadMsgCnt","traderTemp","load","traderPromises","convo","addTraderToList","all","sortUnreadMessages","unreadTraders","hasUnreadMessage","readTraders","__WEBPACK_IMPORTED_MODULE_2__angular_core__","__WEBPACK_IMPORTED_MODULE_1__angular_common_http__","__WEBPACK_IMPORTED_MODULE_0_ionic_angular__","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","C"],"mappings":"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","sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class TradeProvider {\n\n  matchingTraders:any = [];\n  loading = false;\n\n  constructor(public http: HttpClient) {\n  }\n\n\n  getNearestPossibleTrades(key, limit = 15, offset = 0){\n  \t// console.log(\"[GetNeareastPossibleTrades] \" + key)\n    return new Promise((resolve,reject)=>{\n      var headers = new HttpHeaders()\n            .set(\"key\", \"eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4\")\n\n       var url = `https://lemon-data-center-js.herokuapp.com/api/getNPT?key=${key}&limit=${limit}&offset=${offset}`;\n       // var url = `http://localhost:3000/api/getNPT?key=${key}&limit=${limit}&offset=${offset}`;\n\n      this.loading = true;\n\n      var httpSub = this.http.get(url, {headers}).subscribe((res)=>{\n        \n        this.matchingTraders = res ? res : [];\n        // console.log(\"get getNearestPossibleTrades: \", this.matchingTraders)\n        \n        this.loading = false;\n        resolve(this.matchingTraders)\n        httpSub.unsubscribe();\n      });\n\n    })\n  }\n\n  getNearestTrades(key, limit = 15, offset = 0){\n    // console.log(\"[GetNeareastTrades] \" + key)\n    return new Promise((resolve,reject)=>{\n      var headers = new HttpHeaders()\n            .set(\"key\", \"eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4\")\n\n       var url = `https://lemon-data-center-js.herokuapp.com/api/getNT?key=${key}&limit=${limit}&offset=${offset}`;\n       // var url = `http://localhost:3000/api/getNT?key=${key}&limit=${limit}&offset=${offset}`;\n\n      this.loading = true;\n\n      var httpSub = this.http.get(url, {headers}).subscribe((res)=>{\n        \n        this.matchingTraders = res ? res : [];\n        // console.log(\"get getNearestPossibleTrades: \", this.matchingTraders)\n        \n        this.loading = false;\n        resolve(this.matchingTraders)\n        httpSub.unsubscribe();\n      });\n    \n    })\n\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/trade/trade.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, \n  App, PopoverController, Content  } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport 'rxjs/add/observable/fromEvent';\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\nimport { MapPage } from '../../pages/map/map';\nimport { CourierPopoverPage } from '../../pages/courier-popover/courier-popover';\nimport { MessagesProvider } from '../../providers/messages/messages';\nimport * as $ from 'jquery'\n\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html',\n})\nexport class ChatPage {\n\n\n\ttrader;\n\tmessage = \"\";\n\tchatSub;\n\tthread = [];\n\tconverKey;\n  userOfferedGamesSub;\n  traderOfferedGamesSub;\n  userOfferedGames = [];\n  traderOfferedGames = [];\n  courier ={\n    name: \"No Courier Selected\"\n  } \n  private mutationObserver: MutationObserver\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n  \t, public auth: AppAuthProvider\n    , private app: App\n    , public popoverCtrl: PopoverController\n    , public messages: MessagesProvider\n  \t) {\n  \tthis.trader = navParams.get('trader')\n    this.profile.currentConversation = this.trader.key;\n    // console.log(\"[chat] trader: \", this.trader)\n    this.converKey =  this.fbApp.getTraderConversationKey(this.trader, this.profile.user)\n    this.fbApp.readConversation(this.converKey, this.profile.user.key);\n\n\n    if(this.converKey){\n      this.chatSub = this.fbApp.getConversationMessages(this.converKey)\n        .subscribe((res)=>{\n          // console.log(\"thread \", res);\n          this.thread = res;\n          this.fbApp.readConversation(this.converKey, this.profile.user.key)\n\n          setTimeout(()=>{$('#chatContent').scrollTop($('#chatContent')[0].scrollHeight);}, 100)\n     \n\n       })\n\n      this.observeTraderOfferedGames();\n      this.observeUserOfferedGames();\n\n     }\n\n  }\n\n  ionViewDidLoad() {\n  }\n\n  observeTraderOfferedGames(){\n    this.traderOfferedGamesSub = this.fbApp.getOfferedGames(\n      this.trader.key,\n      this.converKey\n    ).subscribe( (res)=>{\n      this.traderOfferedGames = res;\n      if(!this.trader.matchingTrades) return;\n\n      for(var game of res){\n        \n        for(var traderGame of this.trader.matchingTrades){\n          if(game[\"id\"] === traderGame.id){\n            traderGame.isSelected = true;\n          }\n        }\n      }\n\n      // console.log(\">>> traderrOG\",res)\n    });\n  }\n\n  observeUserOfferedGames(){\n    this.userOfferedGamesSub = this.fbApp.getOfferedGames(\n      this.profile.user.key,\n      this.converKey\n    ).subscribe( (res)=>{\n      this.userOfferedGames = res;\n\n      if(!this.trader.matchingWishes)\n        this.trader.matchingWishes = [];\n\n      for(var game of res){\n        for(var traderGame of this.trader.matchingWishes){\n          if(game[\"id\"] === traderGame.id){\n            traderGame.isSelected = true;\n          }\n        }\n      }\n    \n      // console.log(\">>> userOG\",res)\n    });\n  }\n\n  ionViewWillEnter() {\n  }\n\n  ionViewDidLeave(){\n    this.profile.currentConversation = null;\n    if(this.chatSub){\n      // console.log(\"ONLEAVE CHAT PAGE\")\n      this.chatSub.unsubscribe();\n    }\n    if(this.userOfferedGamesSub){\n      this.userOfferedGamesSub.unsubscribe();\n    }\n  \tif(this.traderOfferedGamesSub){\n  \t\tthis.traderOfferedGamesSub.unsubscribe();\n  \t}\n  }\n\n  send(){\n\n    if(this.message.trim().length <= 0){\n      return;\n    } \n        \n\n  \tif(this.converKey){\n  \t\t// console.log(\"UPDATE CHAT \" + this.converKey)\n\t\t\tthis.fbApp.updateConversation(this.converKey, this.trader, this.profile.user, this.message)\n\t\t}else{\n\t\t\tthis.converKey = this.fbApp.createNewThread(this.trader,this.profile.user,this.message).key\t  \t\t\t\n\t\t\t\n  \t\tthis.chatSub = this.fbApp.getConversationMessages(this.converKey).subscribe((res)=>{\n  \t\t\t\t// console.log(\"thread \", res);\n  \t\t\t\tthis.thread = res;\n          this.fbApp.readConversation(this.converKey, this.profile.user.key)\n  \t\t})\n\t\t}\n\n  \tthis.message = \"\";\n  }\n\n  navToMap(){\n      this.app.getRootNavs()[0].push(MapPage, {\n        target : this.trader\n      });\n  }\n\n  saveTimeout;\n  selectGame(game){\n    clearTimeout(this.saveTimeout)\n\n    if(!game.isSelected){\n      game.isSelected = true;\n      this.userOfferedGames.push(game)\n    }\n    else{ \n      game.isSelected = false;\n      this.userOfferedGames = this.userOfferedGames.filter( (e)=>{\n        return e.id != game.id\n      } )\n    }\n\n    setTimeout(()=>{\n      this.fbApp.updateConversationOffers(this.profile.user.key, this.converKey, this.userOfferedGames);\n    },500);\n\n\n  }\n\n  selectCourier(){\n    // this.courierStatus = \"waiting for confirmation\";\n    // console.log(222)\n    // $('.meetup').css('width','25%')\n    // $('.meetup').css('padding','15px 0')\n    // $('.courier').css('width','75%')\n\n    let popover = this.popoverCtrl.create(CourierPopoverPage)\n    popover.present();\n\n    popover.onDidDismiss((courier)=>{\n      if(!courier) return\n        this.courier = courier;\n    })\n  }\n\n\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform, App, LoadingController } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { Profile } from '../../models/profile';\nimport * as $ from 'jquery'\n\n\ndeclare var google: any;\n@Component({\n  selector: 'page-map',\n  templateUrl: 'map.html',\n})\nexport class MapPage {\n\n\t@ViewChild('map') mapElement: ElementRef;\n\n\tmap: any;\n\tgeocoder: any;\n\tplaces: any;\n\tmarkers = [];\n\tsessionToken;\n\tsearchInput = \"\";\n\ttarget : Profile;\n\tcanEdit = true;\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n\t\t, public platform: Platform\n\t\t, private geolocation: Geolocation\n\t\t, private profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n  \t, public loadCtrl: LoadingController\n ) {\n  \tthis.target = this.profile.user;\n  \tthis.sessionToken = new google.maps.places.AutocompleteSessionToken();\n\n\n  }\n\n  ionViewDidLoad() {\n  }\n\n  ionViewWillEnter(){\n  \tthis.target = this.profile.user;\n  \tlet customTarget = this.navParams.get('target');\n\n  \tif(customTarget){\n  \t\tthis.canEdit = false;\n  \t\t\n  \t\tif(!customTarget.target_locations)\n  \t\tcustomTarget.target_locations = [];\n\n  \t\tthis.target = customTarget;\n  \t\t// console.log(\"using custom target\", this.target)\n  \t}\n\n\n    this.platform.ready().then(() => {\n\t\t\tif(google){\n\t  \t\tthis.geocoder = new google.maps.Geocoder();\n\t  \t\tthis.places = new google.maps.places.AutocompleteService();\n\n\n\t    \tthis.initMap();\n\t\t\t}\n\t  });\n  }\n\n  timeout;\n  searchLocation(){\n  \t// console.log(\"searchLocation: \" + this.searchInput)\n  \tclearTimeout(this.timeout);\n  \t\n  \tthis.timeout = setTimeout(()=>{\n\n  \tthis.places.getPlacePredictions({\n  \t\tinput: this.searchInput,\n  \t\tsessionToken: this.sessionToken\n  }, (res)=>{\n  \t\t// console.log(\"place prediction \", res)\n  \t})\n\n  \t}, 500)\n  }\n\n\n  initMap() {\n  \tvar self = this;\n\n\t  this.geolocation.getCurrentPosition().then((resp) => {\n\t    let mylocation = new google.maps.LatLng(resp.coords.latitude,resp.coords.longitude);\n\t    // let mylocation = new google.maps.LatLng(14.710761999999999,121.05234990000001);\n\t    \n\t    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n\t      zoom: 15,\n\t      disableDefaultUI: true,\n\t      center: mylocation\n\t    });\n\t    this.addMarker(mylocation ,{label:\"YOU\", remember:false})\n\n  \t\tthis.initAutoComplete(resp);\n  \t\tthis.initClickEvent();\n\n  \t\tif(this.target.trade_locations)\n\t    \tthis.initMarkers(this.target.trade_locations);\n\t  }).catch((e)=>{\n\t  \t\tconsole.log(\"errrr\",e);\n\t  });\n\n\t}\n\ninitMarkers(tradeLocations){\n  \tvar self = this;\n\n  for(let tradeLocation of tradeLocations){\n    \tthis.geocoder.geocode({'address': tradeLocation}, function(res,status){\n        if (status === 'OK') {\n\t\t    \t\tself.addMarker(\n\t\t    \t\t\tres[0].geometry.location, \n\t\t    \t\t\t// {icon:\"assets/imgs/blue_marker.png\"}\n\t    \t\t\t)\n        }else{\n        \tconsole.log(\"Geocode was not successful for the following reason: \"  + status)\n        }\n\t\t\t})\n  }\n}\n\ninitAutoComplete(userLocation){\n\t\tvar mylocation = new google.maps.LatLng(userLocation.coords.latitude,userLocation.coords.longitude);\n\t\tlet input = document.getElementById('autocomplete');\n\n\t\tthis.map.controls[google.maps.ControlPosition.TOP_LEFT].push(input)\n\n\t \tvar circle = new google.maps.Circle({\n\t    center: mylocation,\n\t    radius: userLocation.coords.accuracy\n\t  });\n\t\tthis.places = new google.maps.places.PlacesService(this.map);\n\n\t\tvar autocomplete = new google.maps.places.Autocomplete( \n\t\t\tinput,  {\n\t\t\t\tbounds: circle.getBounds(),\n\t\t\t\tstrictBounds: true\n\t\t\t}\n\t\t);\n\n\t\tvar self = this;\n\n\t\tautocomplete.addListener('place_changed', function(){\n\t    var place = this.getPlace();\n\t  \tif(!place) return;\n\t\t\t// console.log(\"[autocomplete:select]\", place)\n\n\t    if (place.geometry) {\n\t      self.map.panTo(place.geometry.location);\n\t      self.map.setZoom(15);\n\t      self.addMarker(place.geometry.location)\n\n\t    \tself.addTradeLocation(input[\"value\"]);\n\n\t    } else {\n\t    }\n\t\t});\n\n\t}\n\n\tclearAutocomplete(){\n\t  $('#autocomplete').val(\"\")\n\t}\n\n\tinitClickEvent(){\n\t\tif(!this.canEdit) return;\n    this.map.addListener(\"click\", (event)=>{\n\t    \n\t    let loading = this.loadCtrl.create();\n\t    loading.present();\n\n\t    var latitude = event.latLng.lat();\n\t    var longitude = event.latLng.lng();\n\n\t    this.geocoder.geocode({'location': event.latLng}, (res)=>{\n\t    \t// console.log(\"click \", res)\n\t    \tif(!res) return;\n\t    \tthis.addMarker(event.latLng)\n\t    \tthis.addTradeLocation(res[0].formatted_address);\n\n\t    \tloading.dismiss();\n\t    })\n\t\t}); \n\t}\n\n\tdbTimeout;\n\taddTradeLocation(location){\n\t\tif(!this.canEdit) return;\n\t\tclearTimeout(this.dbTimeout);\n\n\n\t\t\tthis.target.trade_locations.push(location);\n\n\t\t\tif(this.target.trade_locations.length > 3){\n\t\t\t\tthis.removeLastTradeLocation();\n\t\t\t}\n\n\t  \t// console.log(\"[map] addTradeLocation \", this.target)\n\n\t\tthis.dbTimeout = setTimeout(()=>{\n\t\t\tthis.fbApp.updateUserTradeLocations(this.target.key, this.target.trade_locations)\n\t\t},500);\n\n\t}\n\n\tremoveLastTradeLocation(){\n  \tlet tradeLocation = this.target.trade_locations.shift();\n  \tlet marker = this.markers[0];\n\t\t// console.log(\"removing \", this.markers, this.target.trade_locations)\n\t\tmarker.setMap(null)\n  \tthis.markers.shift();\n\t}\n\n\n\taddMarker(position, options = null) {\n\t\toptions = options ? options : {remember: true};\n\n\t  let marker = new google.maps.Marker({\n\t    map: this.map,\n\t    position: position,\n\t    label: options.label,\n\t    icon: options.icon\n\t  });\n\n\t  if(options.remember)\n\t  \tthis.markers.push(marker);\n\t}\n\n\tsetMapOnAll(map) {\n\t  for (var i = 0; i < this.markers.length; i++) {\n\t    this.markers[i].setMap(map);\n\t  }\n\t}\n\n\tclearMarkers() {\n\t  this.setMapOnAll(null);\n\t}\n\n\tdeleteMarkers() {\n\t  this.clearMarkers();\n\t  this.markers = [];\n\t}\n\n\tfindLocation(location){\n\t\tif(!this.map) return;\n\n\t\tthis.geocoder.geocode({'address': location}, (res,status)=>{\n\t    if (status === 'OK') {\n\t\t    this.map.panTo(res[0].geometry.location);\n\t\t    this.map.setZoom(15);\n\t    }else{\n\t    \tconsole.log(\"Geocode was not successful for the following reason: \"  + status)\n\t    }\n\t\t})\n\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { C } from '../../config';\nimport { map, take, first } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class IgdbProvider {\n\n// const PS4_ID = 48;\n// const NINTENDO_SWITCH_ID = 130;\n// const XBOX_ONE = 49;\n\n\tsearchOptions = [];\n\n  constructor(public http: HttpClient){\n\n  }\n\n  search(input){\n  \tconst headers = new HttpHeaders()\n            .set(\"user-key\", \"5227ae6e46cee2806cf25779d4c97966\")\n            .set(\"Accept\", \"application/json\")\n\n    var excludedPlatforms = \"0\";\n    var included = [\n      3 // Linux\n      ,6 // windows pc\n      ,9 // ps3\n      ,12 // xbox 360\n      ,14 // Mac\n      ,41 // wii\n      ,48 // xbox1\n      ,49 // ps4\n      ,92 // steamOs\n      ,130 // switch\n    ]\n\n    for(var i = 1; i < 164; i++){\n      if(included.indexOf(i) > -1) continue;\n      excludedPlatforms += \",\"+i;\n    }\n\n\n    var search = \n    \"https://api-endpoint.igdb.com/games/\"\n    + \"?search=\"+input\n    + \"&filter[release_dates.platform][not_in]=\"+excludedPlatforms\n    + \"&filter[category][eq]=\"+\"0\"\n    + \"&filter[release_dates.platform][exists]\"\n    // + \"&filter[version_parent][not_existss]\"\n    + \"&fields=*\";\n    // var search = 'https://api-endpoint.igdb.com/games/?search=' + input +\n  \t\t// \"&filter[release_dates.platform][any]=48,49,130\" +\n  \t\t// \"&filter[version_parent][not_exists]=1\" +\n  \t\t// \"&fields=*\";\n  return new Promise((resolve,reject)=>{\n\n    var httpSub = this.http.get( search, {headers}).subscribe((res:Array<object>)=>{\n      var gameIds = \"\";\n      // console.log(\"[igdb] search raw: \", res)\n\n      var first = true;\n\n      for( var r of res){\n\n          if(first)\n            gameIds += r[\"id\"];\n          else\n            gameIds += \",\"+r[\"id\"];\n\n          first = false;\n      }\n\n      var filteredSearch = this.removeUnsupportedPlatforms(res);\n      // console.log(\"[igdb] search clean: \", filteredSearch)\n\n      resolve(filteredSearch);\n      httpSub.unsubscribe();\n    });\n\n  })\n\n  }\n\n  removeUnsupportedPlatforms(games : Array<any>){\n    return games.filter((game)=>{\n      if(game.platforms)\n\n       return game.platforms.indexOf(C.PS4_ID) != -1\n        || game.platforms.indexOf(C.XBOX1_ID) != -1 \n        || game.platforms.indexOf(C.NS_ID) != -1;\n\n       \n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/igdb/igdb.ts","import { Component } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { NavController } from 'ionic-angular';\nimport { SignupPage } from '../signup/signup';\nimport { ResetpasswordPage } from '../resetpassword/resetpassword';\nimport { TabsPage } from '../tabs/tabs';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\tloginForm: FormGroup;\n\tloginError: string;\n\n\tconstructor(\n\t\tprivate navCtrl: NavController,\n\t\tprivate auth: AppAuthProvider,\n\t\tfb: FormBuilder\n\t) {\n\t\tthis.loginForm = fb.group({\n\t\t\temail: ['', Validators.compose([Validators.required, Validators.email])],\n\t\t\tpassword: ['', Validators.compose([Validators.required, Validators.minLength(3)])]\n\t\t});\n\t}\n\n  login() {\n\t\tlet data = this.loginForm.value;\n\n\t\tif (!data.email) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet credentials = {\n\t\t\temail: data.email,\n\t\t\tpassword: data.password\n\t\t};\n\t\tthis.auth.signInWithEmail(credentials)\n\t\t\t.then(\n\t\t\t\t() => this.navCtrl.setRoot(TabsPage),\n\t\t\t\terror => this.loginError = error.message\n\t\t\t);\n    }\n\n  private signup(){\n    this.navCtrl.push(SignupPage);\n  }\n\n  loginWithGoogle() {\n\t  let gl = this.auth.googleLogin()\n\t    // .then(\n\t    //   (res) =>{\n\t    //   \tconsole.log(10101,res)\n\t    //   \tthis.navCtrl.setRoot(TabsPage)\n\t    //   },\n\t    //   error => console.log(error.message)\n\t    // )\n  }\n  onSignIn(){\n\n  }\n\n  navToPassword(){\n  \tthis.navCtrl.push(ResetpasswordPage);\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 206;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 206\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 249;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 249\n// module chunks = 0","import { UserConversation } from './userConversation';\r\n\r\n\r\nexport class Profile{\r\n\r\n\tpublic profileImage = \"\";\r\n\tpublic first_name = \"\";\r\n\tpublic last_name = \"\";\r\n\tpublic email = \"\";\r\n\tpublic key = \"\";\r\n  public wishList = [];\r\n  public ownedList= [];\r\n  public consoles = [];\r\n  public trade_locations: Array<any> = [];\r\n  public last_location = {};\r\n  public conversations : Array<UserConversation>;\r\n  public gender = \"m\";\r\n\tconstructor(){\r\n  }\r\n\r\n  addToWishList(game){\r\n    if(this.wishList.length > 8) return;\r\n    this.wishList.push(game)\r\n  }\r\n  addToOwnedList(game){\r\n    if(this.ownedList.length > 8) return;\r\n    this.ownedList.push(game)\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/profile.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { NavController, Platform, App, Events, LoadingController } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { TradeProvider } from '../../providers/trade/trade';\nimport { ChatPage } from '../../pages/chat/chat';\nimport { AllTradersPage } from '../../pages/all-traders/all-traders';\nimport * as $ from 'jquery'\nimport { Profile } from '../../models/profile';\nimport { C } from '../../config';\nimport 'rxjs/add/observable/fromEvent';\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\nimport { Storage  } from '@ionic/storage';\n\n@Component({\n  selector: 'page-trade',\n  templateUrl: 'trade.html'\n})\nexport class TradePage {\n\n  refresh = true;\n  showDisclaimer = true;\n  showMatchingOnly = true;\n  offset = 0;\n  limit = 15;\n  traders = [];\n  hasMore = false;\n\n  constructor(\n  \tpublic navCtrl: NavController\n\t\t, public platform: Platform\n\t\t, private trade: TradeProvider\n\t\t, private profile: ProfileProvider\n    , private app: App\n    , private events: Events\n    , private storage: Storage \n\t\t, private loadCtrl: LoadingController \n  \t) {\n\n    this.events.subscribe(\"profile:changed\", (res)=>{\n      this.refresh = true;\n    })\n\n    this.storage.get('showDisclaimer').then((res)=>{\n      this.showDisclaimer = !res;\n    });\n\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  ionViewWillEnter() {\n    if(this.refresh){\n      this.refresh = false;\n      this.getTrades(this.profile.user.key, 15, 0);\n    }\n  }\n  showChat(trader){\n  \tthis.app.getRootNavs()[0].push(ChatPage, {\n  \t\ttrader : trader\n  \t});\n  }\n\n  expandToggle(trader){\n    if(trader.expanded)\n      trader.expanded = false;\n    else trader.expanded = true;\n  }\n\n  confirmDisclaimer(){\n    this.showDisclaimer = false;\n    this.storage.set(\"showDisclaimer\", true);\n  }\n\n  toggleTraders(){\n    this.showMatchingOnly = !this.showMatchingOnly;\n    this.offset = 0;\n    this.hasMore = false;\n    this.getTrades(this.profile.user.key, this.limit, this.offset);\n  }\n\n  showMore(){\n    this.offset++;\n    this.getTrades(this.profile.user.key, this.limit, this.offset, true);\n  }\n\n\n\n  getTrades(userKey, limit = 15, offset = 0, concat = false){\n    // console.log(\"[getTrades] --concat\"+concat)\n\n    if(this.showMatchingOnly){\n     this.trade.getNearestPossibleTrades(userKey, limit, offset).then((res : Array<any>)=>{\n       // console.log(\"res \", res.length)\n       this.hasMore = res.length == 15 ? true : false;\n     \n       if(concat){\n         this.traders = this.traders.concat(res)\n       }\n       else  \n         this.traders = res;\n     \n\n     });\n    }else{\n     this.trade.getNearestTrades(userKey, limit, offset).then((res : Array<any>)=>{\n       // console.log(\"res \", res.length)\n       this.hasMore = res.length == 15 ? true : false;\n\n       if(concat){\n         this.traders = this.traders.concat(res)\n       }\n       else  \n         this.traders = res;\n     });\n    }\n\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trade/trade.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, PopoverController, ViewController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-courier-popover',\n  templateUrl: 'courier-popover.html',\n})\nexport class CourierPopoverPage {\n\n\tcouriers = [\n\t\t{\n\t\t\tid:0,\n\t\t\tlogo: \"assets/imgs/courier_express_logo.png\",\n\t\t\tname: \"Courier Express\",\n\t\t\tprice: 200\n\t\t},\n\t\t{\n\t\t\tid:1,\n\t\t\tlogo: \"assets/imgs/lalamove_logo.png\",\n\t\t\tname: \"Lalamove\",\n\t\t\tprice: 300\n\t\t}\n\t]\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n    , public popoverCtrl: PopoverController\n    , public viewCtrl: ViewController\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  selectCourier(opt){\n\t\tthis.viewCtrl.dismiss(this.couriers[opt])\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/courier-popover/courier-popover.ts","import { Component } from '@angular/core';\nimport { NavController, App, Events, LoadingController } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { MessagesProvider } from '../../providers/messages/messages';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { map, take, first } from 'rxjs/operators';\nimport { ChatPage } from '../../pages/chat/chat';\nimport { Profile } from '../../models/profile';\n\n@Component({\n  selector: 'page-messages',\n  templateUrl: 'messages.html'\n})\nexport class MessagesPage {\n\n  pendingLoad;\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n    , private app: App\n    , private events: Events\n    , private loadCtrl: LoadingController \n    , private messages: MessagesProvider \n  ) {\n\n   \n  }\n\n\n  ionViewWillEnter(){\n\n  }\n\n  showChat(trader){\n    // console.log(\"showChat\", trader)\n    var matchingTrades = [];\n\n    if(trader.ownedList)\n    for(var traderOwned of trader.ownedList){\n      for(var userWish of this.profile.user.wishList){\n          if(userWish.id === traderOwned.id){\n             matchingTrades.push(traderOwned);\n          }\n      }\n    }\n\n    var matchingWishes = [];\n    \n    if(trader.wishList)\n    for(var traderWish of trader.wishList){\n      for(var userOwned of this.profile.user.ownedList){\n          if(userOwned.id === traderWish.id){\n             matchingWishes.push(userOwned);\n          }\n      }\n    }\n    \n    trader.matchingTrades = matchingTrades;\n    trader.matchingWishes = matchingWishes;\n\n    this.app.getRootNavs()[0].push(ChatPage, {\n      trader : trader\n    });\n\n  }\n\n  getRandomPic(){\n    return 'assets/imgs/temp_profile_img_'+this.getRandomInt(1,2)+'.png';\n  }\n\n  getRandomInt(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messages/messages.ts","import { Component } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { NavController, App, Platform, Events, LoadingController} from 'ionic-angular';\r\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\r\nimport { ProfileProvider } from '../../providers/profile/profile';\r\nimport { IgdbProvider } from '../../providers/igdb/igdb';\r\nimport { Game } from '../../models/game';\r\nimport { C } from '../../config';\r\nimport * as _ from 'underscore/underscore';\r\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\r\nimport { MapPage } from '../../pages/map/map';\r\n\r\nimport { FileTransfer, FileUploadOptions, FileTransferObject  } from '@ionic-native/file-transfer';\r\nimport { File, FileEntry  } from '@ionic-native/file';\r\nimport { FileChooser } from '@ionic-native/file-chooser';\r\nimport { ImagePicker } from '@ionic-native/image-picker';\r\nimport * as $ from 'jquery'\r\nimport { StorageProvider } from '../../providers/storage/storage';\r\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\r\nimport { ImageResizer, ImageResizerOptions } from '@ionic-native/image-resizer';\r\n\r\n@Component({\r\n  selector: 'page-profile',\r\n  templateUrl: 'profile.html'\r\n})\r\nexport class ProfilePage {\r\n\tsearchInput\r\n  searchIsLoading = false;\r\n  searchOptions : any = [];\r\n\r\n  constructor(\r\n  \tpublic navCtrl: NavController\r\n    , public igdb: IgdbProvider\r\n    , private auth: AppAuthProvider\r\n    , private profile: ProfileProvider\r\n    , private imgLoader: ImageLoaderConfig\r\n    , private app: App\r\n    , private events: Events\r\n    , private transfer: FileTransfer\r\n    , private file: File\r\n    , private fileChooser: FileChooser\r\n    , private imagePicker: ImagePicker\r\n    , public platform: Platform\r\n    , public fbApp: FirebaseappProvider\r\n    , public fbStorage: StorageProvider\r\n    , public loadingCtrl: LoadingController\r\n    , private imageResizer: ImageResizer\r\n\t) {\r\n    imgLoader.setBackgroundSize('cover');\r\n\r\n  }\r\n\r\n  toggleItemList(item, owned){\r\n    this.profile.toggleItemList(this.auth.user, item, owned);\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  toggleItemPlatform(item, platform, owned){\r\n    this.profile.toggleItemPlatform(this.auth.user, item, platform, owned);\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  removeItem(item, owned){\r\n    // console.log(\"pressing\")\r\n    this.profile.removeItem(this.auth.user, item, owned);\r\n\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  timeout\r\n  searchtTitle(){\r\n    this.searchIsLoading = true;\r\n  \tclearTimeout(this.timeout);\r\n  \t\r\n  \tthis.timeout = setTimeout(()=>{\r\n\r\n  \t\tif(!this.searchInput || this.searchInput.length < 2){\r\n        this.clearSearch();\r\n      }\r\n      else{ \r\n        this.igdb.search(this.searchInput).then((res: Array<any>)=>{\r\n          this.searchOptions = res;\r\n\r\n          if(res.length == 0){\r\n            this.searchOptions.push({id: \"err\", name: \"No Games Found\"})\r\n          }\r\n\r\n          this.searchIsLoading = false;\r\n        });\r\n      }\r\n\r\n  \t}, 300)\r\n  }\r\n\r\n  clearSearch(){\r\n    this.searchIsLoading = false;\r\n  \tthis.searchOptions = [];\r\n  }\r\n\r\n  addGameToProfile(item){\r\n    this.searchInput = null;\r\n    this.searchOptions = [];\r\n\r\n  \tvar platforms = [\"\"];\r\n  \t\r\n  \tif(item.platforms){\r\n\t  \tif(item.platforms.includes(C.PS4_ID))\r\n\t  \t\tplatforms.push(C.PS4)\r\n\r\n\t  \tif(item.platforms.includes(C.NS_ID))\r\n\t  \t\tplatforms.push(C.NS)\r\n\r\n\t  \tif(item.platforms.includes(C.XBOX1_ID))\r\n\t  \t\tplatforms.push(C.XBOX1)\r\n  \t}\r\n    var url = null;\r\n    if(item.cover)\r\n  \t  url = item.cover.url.replace(\"thumb\",\"cover_big\").replace(\"//\",\"http://\")\r\n\r\n    var game = new Game(item.id, item.name, url, platforms);\r\n  \tthis.profile.addGameToProfile(this.auth.user, game, false)\r\n\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  navToMap(){\r\n      this.app.getRootNavs()[0].push(MapPage);\r\n  }\r\n\r\n  uploadImage(){\r\n\r\n    if(this.platform.is('core')){\r\n      this.uploadImage_web()\r\n    }else if(this.platform.is('android')){\r\n      this.uploadImage_and()\r\n    }\r\n\r\n  }\r\n\r\n  uploadImage_and(){\r\n    return new Promise((resolve,reject)=>{\r\n\r\n      this.imagePicker.getPictures({\r\n        maximumImagesCount:1,\r\n        outputType:0\r\n      }).then(res =>{\r\n        if(!res){\r\n          return\r\n        }\r\n        let file = res[0];\r\n        return this.file.resolveLocalFilesystemUrl(file)\r\n      }).then((file : FileEntry)=>{\r\n          return this.imageResizer\r\n          .resize({\r\n             uri: file.nativeURL,\r\n             quality: 100,\r\n             width: 90,\r\n             height: 180,\r\n          })\r\n      }).then((filePath)=>{\r\n          return this.file.resolveLocalFilesystemUrl(filePath)\r\n      }).then( (file : FileEntry)=>{\r\n         return this.file.readAsDataURL(file.filesystem.root.nativeURL, file.name)\r\n      }).then(res=>{\r\n        this.storeImage(res)\r\n      })      \r\n      .catch(e => console.log(e));\r\n\r\n\r\n\r\n\r\n    });\r\n  }\r\n\r\n  uploadImage_web(){\r\n\r\n    $('#fileInput').trigger(\"click\")\r\n    $('#fileInput').change(()=> {\r\n\r\n\r\n      let file = $('#fileInput')[0]['files'][0];\r\n      \r\n      if(!file) return;\r\n      this.getBase64(file).then(res=>{\r\n        //TODO resize image\r\n        this.storeImage(res)\r\n        $('#fileInput').val('')\r\n      })\r\n    });\r\n\r\n  }\r\n\r\n  private storeImage(base64){\r\n    // console.log(\"[storeImage]\",base64)\r\n\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Uploading image...'\r\n    });\r\n\r\n    loading.present();\r\n\r\n    this.fbStorage.uploadImage(base64, this.profile.user.email)\r\n    .then( (res:string)=>{\r\n       // console.log(\"upload image\",res)\r\n       this.fbApp.updateUserProfileImage(this.profile.user.key, res);\r\n       this.profile.user.profileImage = res;\r\n\r\n       loading.dismiss();\r\n    }).catch((err)=>{\r\n       console.log(\"storeImage\",err)\r\n     loading.dismiss();\r\n    })\r\n  }\r\n\r\n  private getBase64(file) : Promise<any> {\r\n    return new Promise((resolve,reject)=>{\r\n     var reader = new FileReader();\r\n     reader.readAsDataURL(file);\r\n     reader.onload = function () {\r\n       resolve(reader.result)\r\n     };\r\n     reader.onerror = function (error) {\r\n       reject(error);\r\n     };\r\n    })\r\n  \r\n  }\r\n\r\n  private getExt(filename){\r\n    var idx = filename.lastIndexOf('.');\r\n    return (idx < 1) ? \"\" : filename.substr(idx + 1);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","export class Game{\r\n\r\n\tpublic id : string;\r\n\tpublic name : string;\r\n  public cover_url : string;\r\n  public platforms : Array<string>;\r\n\r\n\tconstructor(\r\n\t\tid = null\r\n\t\t, name = null\r\n\t\t,cover_url = null\r\n\t\t,platforms = null\r\n\t){\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.cover_url = cover_url;\r\n\t\tthis.platforms = platforms;\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/game.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as firebase from 'firebase';\nimport 'rxjs/add/operator/map';\nimport { Observable } from \"rxjs/Observable\";\n\n@Injectable()\nexport class StorageProvider {\n\n  constructor(public http: HttpClient) {\n  }\n\n  uploadImage(image, userEmail){\n  \treturn new Promise((resolve, reject) =>{\n  \tlet storageRef = firebase.storage().ref().child(`images/${userEmail}/profile`);\n \t\tlet parseUpload = storageRef.putString(image, 'data_url');\n\n    parseUpload.on('state_changed', (_snapshot) =>{\n       // console.log('snapshot progess ',_snapshot);\n\n    },\n    (_err) =>{\n       console.log('snapshot err ',_err);\n       reject(_err);\n    },\n    () =>{\n    \tstorageRef.getDownloadURL().then((res)=>{\n       // console.log('getDownloadURL ',res);\n       resolve(res);\n     })\n    });\n\n  \t});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/storage/storage.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { LoginPage } from '../../pages/login/login';\nimport { EmailComposer } from '@ionic-native/email-composer';\n\n@Component({\n  selector: 'page-options',\n  templateUrl: 'options.html',\n})\nexport class OptionsPage {\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public auth: AppAuthProvider\n    , public emailComposer: EmailComposer\n  \t) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  feedback(){\n    let email = {\n      to: 'lemontree.development@gmail.com',\n      subject: 'Console Nation Feedback',\n    };\n\n    this.emailComposer.open(email);\n  }\n\n  logout(){\n  \tthis.auth.logout();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/options/options.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { IgdbProvider } from '../../providers/igdb/igdb';\nimport { Game } from '../../models/game';\nimport { C } from '../../config';\n\n@Component({\n  selector: 'page-deal',\n  templateUrl: 'deal.html',\n})\nexport class DealPage {\n\tsearchInput\n  searchIsLoading = false;\n  searchOptions : any = [];\n  cart = [];\n  submitText = \"Evaluate\";\n  \n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n    , public igdb: IgdbProvider\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  timeout\n  searchtTitle(){\n    this.searchIsLoading = true;\n  \tclearTimeout(this.timeout);\n  \t\n  \tthis.timeout = setTimeout(()=>{\n\n  \t\tif(!this.searchInput || this.searchInput.length < 2){\n        this.clearSearch();\n      }\n      else{ \n        this.igdb.search(this.searchInput).then((res: Array<any>)=>{\n          this.searchOptions = res;\n\n          if(res.length == 0){\n            this.searchOptions.push({id: \"err\", name: \"No Games Found\"})\n          }\n\n          this.searchIsLoading = false;\n        });\n      }\n\n  \t}, 300)\n  }\n\n  clearSearch(){\n    this.searchIsLoading = false;\n  \tthis.searchOptions = [];\n  }\n\n  addGameToCart(item){\n    if(item.id === \"err\") return;\n\n  \tvar platforms = [\"\"];\n  \t\n  \tif(item.platforms){\n\t  \tif(item.platforms.includes(C.PS4_ID))\n\t  \t\tplatforms.push(C.PS4)\n\n\t  \tif(item.platforms.includes(C.NS_ID))\n\t  \t\tplatforms.push(C.NS)\n\n\t  \tif(item.platforms.includes(C.XBOX1_ID))\n\t  \t\tplatforms.push(C.XBOX1)\n  \t}\n    var url = null;\n    if(item.cover)\n  \t  url = item.cover.url.replace(\"thumb\",\"cover_big\").replace(\"//\",\"http://\")\n\n    var game = new Game(item.id, item.name, url, platforms);\n  \tthis.searchInput = null;\n\n  \tthis.cart.push(game)\n  \t// console.log(this.cart)\n  \tthis.clearSearch();\n  }\n\n\n  removeItem(item){\n    this.cart = this.cart.filter(e => e.id !== item.id);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/deal/deal.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n/**\n * Generated class for the ShopPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@Component({\n  selector: 'page-shop',\n  templateUrl: 'shop.html',\n})\nexport class ShopPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ShopPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop/shop.ts","import { Component } from '@angular/core';\nimport { Platform, IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { TabsPage } from '../tabs/tabs';\nimport { Keyboard } from '@ionic-native/keyboard';\n\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n\tcanSubmit = false;\n\n\tvalidation_messages = {\n\t\t'first_name': [\n\t\t\t\t{ type: 'required', message: 'first name is required.' },\n\t\t\t\t{ type: 'minlength', message: 'first name must be at least 2 characters long.' },\n\t\t\t\t{ type: 'maxlength', message: 'first name cannot be more than 20 characters long.' },\n\t\t\t\t{ type: 'validUsername', message: 'Your username has already been taken.' }\n\t\t\t],\n\t\t'last_name': [\n\t\t\t\t{ type: 'required', message: 'last name is required.' },\n\t\t\t\t{ type: 'minlength', message: 'last name must be at least 2 characters long.' },\n\t\t\t\t{ type: 'maxlength', message: 'last name cannot be more than 20 characters long.' },\n\t\t\t\t{ type: 'validUsername', message: 'Your username has already been taken.' }\n\t\t\t],\n\t\t\t'email': [\n\t\t\t\t{ type: 'required', message: 'email is required.' },\n\t\t\t\t{ type: 'email', message: 'must be a valid email.' }\n\t\t\t],\n\t\t\t'password': [\n\t\t\t\t{ type: 'required', message: 'password is required.' },\n\t\t\t\t{ type: 'pattern', message: 'password must contain 1 upper case and 1 number.' },\n\t\t\t\t{ type: 'minlength', message: 'password must be at least 8 characters.' }\n\t\t\t],\n\n\t}\n\n\tsignupForm: FormGroup;\n\tloginError: string;\n\n\tpasswordType = \"password\";\n\tshowPasswordIcon = \"ios-eye-off\";\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public auth: AppAuthProvider\n  \t, private keyboard: Keyboard\n  \t, private platform: Platform\n  \t, fb: FormBuilder) {\n\n\t\tthis.platform.ready().then(() => {\n\t\t\tthis.keyboard.disableScroll(false);\n\t\t});\n  \tvar passwordRegex = '^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).+$';\n\n\t\tthis.signupForm = fb.group({\n\t\t\tfirst_name: ['', Validators.compose([Validators.required, Validators.minLength(2), Validators.maxLength(20)])],\n\t\t\tlast_name: ['', Validators.compose([Validators.required, Validators.minLength(2), Validators.maxLength(20)])],\n\t\t\temail: ['', Validators.compose([Validators.required, Validators.email])],\n\t\t\tpassword: ['', Validators.compose([Validators.required, Validators.pattern(passwordRegex), Validators.minLength(8), Validators.maxLength(20)])],\n\t\t\tgender: ['', Validators.compose([Validators.required])],\n\t\t});\n\n  }\n  ionViewDidLoad() {\n  }\n\n  ionViewDidEnter() {\n\t}\n\n\tionViewWillLeave() {\n\t}\n\n  checkForm(){\n  \tthis.canSubmit = this.signupForm.errors == null;\n  }\n  showPassword(){\n  \tif(this.passwordType == \"password\"){\n  \t\tthis.passwordType = \"text\";\n  \t\tthis.showPasswordIcon = \"ios-eye\";\n  \t}\n  \telse{\n  \t\tthis.passwordType = \"password\";\n  \t\tthis.showPasswordIcon = \"ios-eye-off\";\n  \t}\n  }\n\n  private signup(){\n\n  \tlet form = {\n\t\t\tfirstName: this.signupForm.value.first_name,\n\t\t\tlastName: this.signupForm.value.last_name,\n\t\t\temail: this.signupForm.value.email,\n\t\t\tpassword: this.signupForm.value.password,\n\t\t\tgender: this.signupForm.value.gender\n\t\t};\n\n\t\tthis.auth.signUp(form).then( () => this.navCtrl.setRoot(TabsPage),\n\t\t\terror => console.log(\"signup error\", error)\n\t\t);\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { LoginPage } from '../login/login';\n\n@Component({\n  selector: 'page-resetpassword',\n  templateUrl: 'resetpassword.html',\n})\nexport class ResetpasswordPage {\n\n\temail = \"\";\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n\t\t, private auth: AppAuthProvider\n\t\t, private toastCtrl: ToastController\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n resetPassword(){\n \tthis.auth.resetPassword(this.email)\n \t.then(()=>{\n \t\tthis.showToast(\"Email sent!\", true)\n \t})\n \t.catch(err=>this.showToast(err))\n }\n\n showToast(msg, redirect = false){\n\n  let toast = this.toastCtrl.create({\n    message: msg,\n    duration: 1500,\n    position: 'top'\n  });\n\n  toast.onDidDismiss(() => {\n  \tif(redirect)\n  \t\tthis.navCtrl.push(LoginPage)\n  });\n\n  toast.present();\n }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/resetpassword/resetpassword.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport AuthProvider = firebase.auth.AuthProvider;\nimport { Profile } from '../../models/profile';\nimport { C } from '../../config';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { Game } from '../../models/game';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { GooglePlus } from '@ionic-native/google-plus';\nimport { ToastController } from 'ionic-angular';\n\n@Injectable()\nexport class AppAuthProvider {\n\n\n\tpublic user: firebase.User;\n\tconstructor(\n\t\tpublic afAuth: AngularFireAuth\n    ,public  geolocation: Geolocation\n\t\t, public afdb: AngularFireDatabase\n\t\t, private googlePlus: GooglePlus\n\t\t, private toastCtrl: ToastController\n\t\t) {\n\t}\n\n\tsignInWithEmail(credentials) {\n\t\treturn this.afAuth.auth.signInWithEmailAndPassword(credentials.email,\n\t\t\t credentials.password);\n\t}\n\n\tsignUp(form) {\n\t return new Promise( (resolve,reject)=>{\n\t \tthis.afAuth.auth.createUserWithEmailAndPassword(form.email,form.password).then((res : firebase.auth.UserCredential)=>{\n\n \t\t\tres.user.sendEmailVerification();\n\n\t\t \tvar profile = new Profile();\n\t\t \tprofile.first_name = form.firstName,\n\t\t\tprofile.last_name = form.lastName,\n\t\t\tprofile.email = form.email.toLowerCase()\n\t\t\tprofile.gender = form.gender;\n\t\t\tprofile.profileImage = this.getRandomProfileImage(form.gender);\n\n\t\t\tthis.getUserCurrentPosition()\n\t\t\t.then(coord=>profile.last_location = coord)\n\t\t\t.then(()=>{\n\n\t      // console.log(\"[Signup]\" , profile)\n\t\t  \t\n\t  \t\tthis.afdb.list('/users').push(profile).then(snap=>{\n\t\t\t\t\tthis.afdb.list('/users').update(snap.key,{\n\t\t\t\t\t\tkey : snap.key\n\t\t\t\t\t})\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\n\t\t\t})\n\n\t\t }).catch( (err : firebase.auth.Error)=>{\n\t\t \t\tthis.toastCtrl.create({\n\t\t \t\t\tmessage: err.message,\n\t\t \t\t\tduration: 1500,\n\t\t \t\t\tposition: 'middle'\n\t\t \t\t})\n\t\t \t\t.present()\n\t\t });\n\n\t })\n\t}\n\n\tprivate getUserCurrentPosition(){\n\t\treturn new Promise((resolve,reject)=>{\n\t    this.geolocation.getCurrentPosition().then((geodata) => {\n\t  \t\tresolve({\n\t          lat:geodata.coords.latitude, \n\t          long: geodata.coords.longitude\n\t        })\n\n\t    }).catch((error) => {\n\t    \tresolve({});\n\t      console.log('Error getting location', error);\n\t    })\n\t\t})\n\t}\n\n\tget authenticated(): boolean {\n\t\treturn this.user !== null;\n\t}\n\n\tgetEmail() {\n\t\treturn this.user && this.user.email;\n\t}\n\n\tlogout(): Promise<void> {\n\t\tthis.user = null;\n\t\treturn this.afAuth.auth.signOut();\n\t}\n\n\tresetPassword(email){\n\t\treturn this.afAuth.auth.sendPasswordResetEmail(email)\n\t}\n\n\tgoogleLogin() {\n\t\t// console.log(\"googlelogin\")\n\t\t\tlet opt = {\n        'webClientId': '670922071182-meeqgiin43vk18i54v5kag524cane4d3.apps.googleusercontent.com'\n      \t,'offline': true\n      };\n      \n  \t\t// return new Promise((resolve, reject) => { \n      this.googlePlus.login(opt).then( res => {\n              const googleCredential = firebase.auth.GoogleAuthProvider\n                  .credential(res.idToken);\n              // console.log('googleCredential', googleCredential)\n              // console.log('loginRes', res)\n\n              firebase.auth().signInWithCredential(googleCredential)\n              .then( response => {\n                console.log(\"Firebase success: \" + JSON.stringify(response));\n                // resolve(response)\n            \t}, err => {\n\t\t\t\t          console.error(\"Error: \", err)\n\t\t\t\t          // reject(err);\n\t\t\t\t      });\n\n      }).catch(err => {\n          console.error(\"Error: \", err)\n          // reject(err);\n      });\n    // });\n   }\n\n\tlogInWithGoogle() {\n\t\treturn this.afAuth.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());\n\t}\n\n\tlogInWithGoogleRedirect(){\n\t\t\n\n\t\treturn this.afAuth.auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())\n\t\t\t.then((res) => {\n\t\t\t\t\t// console.log(\"redir\", res);\n\t\t\t\treturn this.afAuth.auth.getRedirectResult().then( result => {\n\t\t\t\t\t// console.log(\"redir2\",result);\n\t\t\t\t\t// This gives you a Google Access Token.\n\t\t\t\t\t// You can use it to access the Google API.\n\t\t\t\t\tlet token = result.credential[\"accessToken\"];\n\t\t\t\t\t// The signed-in user info.\n\t\t\t\t\tthis.user = result.user;\n\t\t\t\t\t// console.log(220202,token, this.user);\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t// Handle Errors here.\n\t\t\t\t\talert(error.message);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tgetRandomProfileImage(gender){\n\n\t\tlet opt = this.getRandomInt(1,9);\n\n\t\tif(gender == \"f\")\n\t\t\topt = this.getRandomInt(10,18);\n\n\t\treturn [\n\t\t\t\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_1.png?alt=media&token=926bfd10-fd52-4b5b-b861-6b4cccf0c528\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_3.png?alt=media&token=a671e695-2842-444c-b534-3d6a30ba2575\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_4.png?alt=media&token=a794717a-2ad6-4748-8594-bb9a3a900db6\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_5.png?alt=media&token=494ba40d-8e26-4d78-8e60-db59b4ac74cf\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_6.png?alt=media&token=c44da33e-f090-4455-a586-e2eca21e1ce2\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_7.png?alt=media&token=28c6321e-43e2-454c-a5dd-01e8fab83420\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_10.png?alt=media&token=120deefc-643a-45d9-8775-611f2dbd9568\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_11.png?alt=media&token=5040e85f-6753-4a0c-8757-450a06437d32\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_16.png?alt=media&token=f5e6b7fc-de33-45fc-9e23-ef6176f6aa9a\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_17.png?alt=media&token=3068d24a-f7d4-4e3a-aa53-8214bd7c4dd7\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_2.png?alt=media&token=a6378dfe-5f46-4021-bcc0-d24900e32c13\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_8.png?alt=media&token=71bbaf6c-9d76-4b04-aba5-1591f3932192\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_9.png?alt=media&token=aea36a3f-d9e8-4f7b-aaee-6b348086c50c\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_12.png?alt=media&token=0050e68c-9baa-4ae7-bcb2-6a9ade80bfd6\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_13.png?alt=media&token=d15b6368-f299-46cc-8588-7f2906de7606\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_14.png?alt=media&token=093fd30f-a38f-4874-9654-1123c54d1cdd\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_15.png?alt=media&token=ad13c6ee-9421-41df-96f5-086f6b2451fc\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_18.png?alt=media&token=703f376c-3e36-4b31-8d6b-0abf852cd9e9\"\n\t\t][opt]\n\t}\n\n\tgetRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/app-auth/app-auth.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Game } from '../../models/game';\nimport { Profile } from '../../models/profile';\nimport { Observable } from 'rxjs';\nimport { C } from '../../config';\nimport * as _ from 'underscore/underscore';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { ToastController } from 'ionic-angular';\n \n\n@Injectable()\nexport class ProfileProvider {\n\t// user : Profile = new Profile(\n\t// \t\"assets/imgs/temp_profile_img_1.png\", \n\t// \t\"Jon Carlo Guiriba\", \n\t// \t\"Quezon City\",\n\t// \t[],\n\t// \t[],[\n\t// \t\t\"ps4\",\"ns\",\"xbox1\"\n\t// \t],[\n\t// \t\t{\n\t// \t\t\tlocation: \"Casa Milan Quezon City\"\n\t// \t\t},\n\t// \t\t{\n\t// \t\t\tlocation: \"St peter chapels novaliches\"\n\t// \t\t},\n\t// \t\t{\n\t// \t\t\tlocation: \"SM fairview quezon city\"\n\t// \t\t},\n\t// \t]\n\t// );\n\n\tuser : Profile;\n\tallListsUpdateTimeout = null\n\twishListUpdateTimeout = null\n\townedListUpdateTimeout = null\n  currentConversation = null;\n\n  constructor(\n  \tpublic http: HttpClient\n    , public fbapp: FirebaseappProvider\n  \t, public toastCtrl: ToastController\n    ) {\n  \tthis.user = new Profile();\n  }\n\n\taddGameToProfile(fbUser : firebase.User, game : Game, owned : boolean){\n\n    var duplicate = _.find(this.user.wishList, e=>{return e.id === game.id})\n\n    if(!game.platforms) \n      game.platforms = [];\n    // console.log(\"addGamToProfile: \",game)\n    \n    if(duplicate || this.user.wishList.length > 8){\n      \n      let alreadyOwned = _.find(this.user.ownedList, e=>{return e.id === game.id})\n      if(alreadyOwned) return;\n\n      this.user.addToOwnedList(game)\n      this.fbapp.updateUserOwnedList(fbUser, this.user.ownedList)\n    }\n  \telse{\n\n      this.user.addToWishList(game)\n      this.fbapp.updateUserWishList(fbUser, this.user.wishList)\n    }\n\n\n\n\t}\n\n\ttoggleItemList(authUser, item, owned){\n  \tif(owned){\n\t\t\tvar duplicate = _.find(this.user.wishList, e=>{return e.id === item.id});\n\n\t\t\tif(duplicate) return;\n\n    if(this.user.wishList.length > 8) return;\n      this.user.addToWishList(item)\n\t\t\tthis.user.ownedList = _.reject(this.user.ownedList, e=>{ return e.id === item.id});\n  \t}else{\n\t\t\tvar duplicate = _.find(this.user.ownedList, e=>{return e.id === item.id})  \n\t\t\tif(duplicate) return;\n\t\t\t\n    if(this.user.ownedList.length > 8) return;\n\n\t\t\tthis.user.addToOwnedList(item)\n\t\t\tthis.user.wishList = _.reject(this.user.wishList, e=>{ return e.id === item.id});\n\t\t}\n\n  \tthis.startAllListsUpdateTImer(authUser);\n\n  }\n\n  toggleItemPlatform(authUser, item, platform, owned){\n  \tif(_.contains(item.platforms, platform)){\n  \t\titem.platforms = _.reject(item.platforms, el=>{ return el === platform; });\n  \t}else{\n  \t\titem.platforms.push(platform)\n  \t}\n\n  \tif(owned){\n  \t\tthis.startWishListUpdateTImer(authUser);\n  \t}else{\n  \t\tthis.startOwnedListUpdateTImer(authUser);\n  \t}\n\n\n  }\n\n  removeItem(authUser, item, owned){\n\n\n  \tif(owned){\n  \t\tthis.user.ownedList = _.reject(this.user.ownedList, el=>{ return el.id === item.id; });\n  \t\tthis.startOwnedListUpdateTImer(authUser);\n  \t}else{\n  \t\tthis.user.wishList = _.reject(this.user.wishList, el=>{ return el.id === item.id; });\n  \t\tthis.startWishListUpdateTImer(authUser);\n  \t}\n\n\n  }\n\n  isItemMatch(item){\n    for(var wishItem of this.user.wishList){\n      if(wishItem.id === item.id)\n        return true;\n    }\n\n    return false;\n  }\n\n  private startAllListsUpdateTImer(authUser){\n\t\tclearTimeout(this.allListsUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.allListsUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserWishList(authUser, self.user.wishList)\n  \t\tself.fbapp.updateUserOwnedList(authUser, self.user.ownedList)\n  \t},1000)\n  }\n\n\n  private startWishListUpdateTImer(authUser){\n\t\tclearTimeout(this.wishListUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.wishListUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserWishList(authUser, self.user.wishList)\n  \t},1000)\n  }\n\n\n  private startOwnedListUpdateTImer(authUser){\n\t\tclearTimeout(this.ownedListUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.ownedListUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserOwnedList(authUser, self.user.ownedList)\n  \t},1000)\n  }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/profile/profile.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { firebaseConfig } from '../config';\nimport { NgxErrorsModule } from '@ultimate/ngxerrors';\n\nimport { TradePage } from '../pages/trade/trade';\nimport { MessagesPage } from '../pages/messages/messages';\nimport { ProfilePage } from '../pages/profile/profile';\nimport { TabsPage } from '../pages/tabs/tabs';\nimport { LoginPage } from '../pages/login/login';\nimport { SignupPage } from '../pages/signup/signup';\nimport { OptionsPage } from '../pages/options/options';\nimport { ChatPage } from '../pages/chat/chat';\nimport { MapPage } from '../pages/map/map';\nimport { DealPage } from '../pages/deal/deal';\nimport { ShopPage } from '../pages/shop/shop';\nimport { CourierPopoverPage } from '../pages/courier-popover/courier-popover';\nimport { ResetpasswordPage } from '../pages/resetpassword/resetpassword';\nimport { AllTradersPage } from '../pages/all-traders/all-traders';\n\n\nimport { AppAuthProvider } from '../providers/app-auth/app-auth';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { AngularFireDatabaseModule, AngularFireDatabase } from 'angularfire2/database';\nimport { IgdbProvider } from '../providers/igdb/igdb';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { HttpClientModule } from '@angular/common/http';\nimport { TradeProvider } from '../providers/trade/trade';\nimport { ProfileProvider } from '../providers/profile/profile';\n\nimport { PipesModule } from '../pipes/pipes.module';\nimport { FirebaseappProvider } from '../providers/firebaseapp/firebaseapp';\nimport { LongPressModule } from 'ionic-long-press';\nimport { UiProvider } from '../providers/ui/ui';\nimport { IonicImageLoader } from 'ionic-image-loader';\nimport { FileTransfer } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { FileChooser } from '@ionic-native/file-chooser';\nimport { ImagePicker } from '@ionic-native/image-picker';\nimport { StorageProvider } from '../providers/storage/storage';\nimport { ImageResizer } from '@ionic-native/image-resizer';\nimport { GooglePlus } from '@ionic-native/google-plus';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { EmailComposer } from '@ionic-native/email-composer';\nimport { MessagesProvider } from '../providers/messages/messages';\nimport { Keyboard } from '@ionic-native/keyboard';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    ChatPage,\n    TradePage,\n    MessagesPage,\n    ProfilePage,\n    LoginPage,\n    SignupPage,\n    OptionsPage,\n    MapPage,\n    DealPage,\n    ShopPage,\n    CourierPopoverPage,\n    ResetpasswordPage,\n    AllTradersPage,\n    TabsPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp, { scrollAssist: false, autoFocusAssist: false }),\n    AngularFireModule.initializeApp(firebaseConfig.web),\n    AngularFireDatabaseModule,\n    HttpClientModule,\n    LongPressModule,\n    PipesModule,\n    IonicImageLoader.forRoot(),\n    NgxErrorsModule,\n    IonicStorageModule.forRoot()\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    ChatPage,\n    TradePage,\n    MessagesPage,\n    ProfilePage,\n    LoginPage,\n    SignupPage,\n    OptionsPage,\n    MapPage,\n    DealPage,\n    ShopPage,\n    CourierPopoverPage,\n    ResetpasswordPage,\n    AllTradersPage,\n    TabsPage\n  ],\n  providers: [\n    // { provide: FirebaseOptionsToken, useValue: firebaseConfig.web },\n    // { provide: FirebaseAppNameToken, useValue: 'stalldata' },\n    // { provide: FirebaseAppConfigToken, useValue: firebaseConfig.web},\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    AngularFireAuth,\n    Geolocation,\n    AngularFireDatabase,\n    AppAuthProvider,\n    HttpClient,\n    IgdbProvider,\n    TradeProvider,\n    ProfileProvider,\n    FirebaseappProvider,\n    UiProvider,\n    FileTransfer,\n    File,\n    FileChooser,\n    ImagePicker,\n    ImageResizer,\n    GooglePlus,\n    EmailComposer,\n    StorageProvider,\n    Keyboard,\n    MessagesProvider\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform, ViewController, Events, LoadingController} from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { AppAuthProvider } from '../providers/app-auth/app-auth';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\nimport { map } from 'rxjs/operators';\nimport { ProfileProvider } from '../providers/profile/profile';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { TradeProvider } from '../providers/trade/trade';\n\nimport { TabsPage } from '../pages/tabs/tabs';\nimport { LoginPage } from '../pages/login/login';\n\ndeclare var cordova:any;\ndeclare var Keyboard: any;\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = null;\n\n  constructor(\n    public platform: Platform\n    ,public  statusBar: StatusBar\n    ,public  splashScreen: SplashScreen\n    ,public  afdb: AngularFireDatabase\n    ,public  auth: AppAuthProvider\n    ,public  profile: ProfileProvider\n    ,public  geolocation: Geolocation\n    , public trade: TradeProvider\n    , public events: Events\n    , public loadCtrl: LoadingController\n    ) {\n\n    platform.ready().then(() => {\n        // Okay, so the platform is ready and our plugins are available.\n        // Here you can do any higher level native things you might need.\n        statusBar.styleDefault();\n        splashScreen.hide();\n\n        \n         auth.afAuth.authState\n          .subscribe(\n            user => {\n\n\n            if (user) {\n              // console.log(\"[fb user]\", user)\n\n              let load = this.loadCtrl.create();\n              load.present();\n              this.auth.user = user;\n              this.rootPage = TabsPage;\n\n              let usersRef : AngularFireList<any>,\n                  users: any;\n\n              this.initProfile(user).then((e)=>{\n                load.dismiss();\n                this.events.publish(\"profile:loaded\")\n              }).catch((res)=>{\n                load.dismiss();\n                this.events.publish(\"profile:loaded\")\n              })\n\n\n            }else {\n              this.rootPage = LoginPage;\n            }\n          },\n          () => {\n            this.rootPage = LoginPage;\n          });\n          \n      });\n      \n  }\n\n  initProfile(user){\n\n    return new Promise( (resolve, reject)=>{\n\n      var userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\n      var userSub = userRef.snapshotChanges().pipe(\n        map(changes => \n          changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n        )\n       ).subscribe((res)=>{\n        // console.log(\"[initProfile]\", res)\n        \n        if(!res[0] || !res[0][\"key\"]){\n          return;\n        } \n\n\n        this.profile.user.profileImage = res[0][\"profileImage\"] || \"assets/imgs/temp_profile_img_1.png\";\n        this.profile.user.first_name = res[0][\"first_name\"] || \"\";\n        this.profile.user.last_name = res[0][\"last_name\"] || \"\";\n        this.profile.user.email = res[0][\"email\"] || \"\";\n        this.profile.user.wishList = res[0][\"wishList\"] || [];\n        this.profile.user.ownedList = res[0][\"ownedList\"] || [];\n        this.profile.user.key = res[0].key || \"\";\n        this.profile.user.conversations = res[0][\"conversations\"] || [];\n        this.profile.user.trade_locations = res[0][\"trade_locations\"] || [];\n        this.profile.user.gender = res[0][\"gender\"] || [];\n\n        // console.log(\">>geolocation \", this.profile.user)\n        this.geolocation.getCurrentPosition({timeout: 20000, enableHighAccuracy: true}).then((geodata) => {\n          userRef.update(res[0][\"key\"], {\n            last_location: {\n              lat:geodata.coords.latitude, \n              long: geodata.coords.longitude\n            }\n          }).then((e)=>{\n            resolve();\n        })\n\n          // console.log(\">>user from component \", this.profile.user)\n          userSub.unsubscribe();\n        }).catch((error) => {\n          reject( console.log('>>Error getting location', error) );\n        });\n      })\n\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { map, take, first } from 'rxjs/operators';\nimport { Message } from '../../models/message';\nimport { Profile } from '../../models/profile';\nimport { UserConversation } from '../../models/userConversation';\nimport * as firebase from 'firebase/app';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\n\n@Injectable()\nexport class FirebaseappProvider {\n\n  constructor(\n  \tpublic http: HttpClient\n\t\t, public afdb: AngularFireDatabase\n\t\t) {\n  }\n\n  getOfferedGames(userKey, conversationKey){\n\t\tvar offeredGamesRef = this.afdb\n\t\t.list(`/conversations/${conversationKey}/deal/${userKey}/offer`)\n\t\t.valueChanges()\n\n\t\treturn offeredGamesRef;\n\n  }\n\n  updateUserProfileImage(userKey, profileImage){\n  \tvar selectedRef = this.afdb.list(`/users/${userKey}/`)\n  \t.set('profileImage',profileImage)\n  }\n\n  updateConversationOffers(userKey, conversationKey, selectedGames){\n    // console.log(\"[FBAPP] updateSelectedGames : \", selectedGames)\n  \tvar selectedRef = this.afdb.list(`/conversations/${conversationKey}/deal/${userKey}/`)\n  \t.set('offer',selectedGames)\n\n  }\n\n  updateUserTradeLocations(userKey, trade_locations){\n  \tvar userRef = this.afdb.list(`/users/${userKey}/`)\n  \t.set('trade_locations',trade_locations);\n  }\n\n\tupdateUserWishList(user, wishList){\n\t\tvar userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\t\tvar userSub = userRef.snapshotChanges().pipe(\n\t\t  map(changes => \n\t\t    changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n\t\t  )\n\t\t).subscribe((res)=>{\n    \t// console.log(\"get user data\", res)\n\t\t\t\t\t\t\n\t\t\tif(!res[0]) return;\n\n\t\t\tvar key = res[0][\"key\"];\n\n\t\t\t// console.log(\"adding to wishlist[\" + key + \"]\", wishList)\n\t\t\t\n\t\t\tuserRef.update(key, {\n\t\t\t\twishList: wishList\n\t\t\t})\n\n\t\t\tuserSub.unsubscribe();\n\t\t})\n\t}\n\n\tupdateUserOwnedList(user, ownedList){\n\t\tvar userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\t\tvar userSub = userRef.snapshotChanges().pipe(\n\t\t  map(changes => \n\t\t    changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n\t\t  )\n\t\t).subscribe((res)=>{\n    \t// console.log(\"get user data\", res)\n\t\t\t\t\t\t\n\t\t\tif(!res[0]) return;\n\n\t\t\tvar key = res[0][\"key\"];\n\n\t\t\t// console.log(\"adding to owned[\" + key + \"]\", ownedList)\n\t\t\t\n\t\t\tuserRef.update(key, {\n\t\t\t\townedList: ownedList\n\t\t\t})\n\n\t\t\tuserSub.unsubscribe();\n\t\t})\n\n\t}\n\n\tgetConversationMessages(key){\n\t\tvar conversationRef = this.afdb\n\t\t.list('/conversations/'+key+\"/messages/\", ref => ref.limitToLast(80))\n\t\t.valueChanges([\"child_added\"])\n\n\t\treturn conversationRef;\n\n\t}\n\n\tgetTraderConversationKey(trader : Profile, user : Profile){\n\t\t// console.log(\"-fbapp getTraderConversationKey: \", trader.conversations, user.conversations)\n\t\tif(!trader.conversations || !user.conversations){\n\t\t\tconsole.log(\"r\")\n\t\t\treturn;\n\t\t} \t\t\n\n\t\tfor(let u in user.conversations){\n\n\t\t\tfor(let t in trader.conversations){\n\t\t\t\tif(trader.conversations[t].key === user.conversations[u].key)\n\t\t\t\t\treturn user.conversations[u].key;\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateNewThread(trader : Profile, user : Profile, msg){\n\t\t// console.log(\"push convo \" + msg, trader, user)\n\n\t\tvar members = {};\n\t\tmembers[trader.key] = true;\n\t\tmembers[user.key] = true;\n\n\t\tvar message = new Message(msg, user.first_name + \" \" + user.last_name,  user.key, firebase.database.ServerValue.TIMESTAMP)\n\n\t\tvar converRef = this.pushConversation([message], members)\n\t\t\n\t\tuser.conversations = user.conversations ? user.conversations : [];\n\n\t\tvar userConversation = new UserConversation(\n\t\t\tconverRef.key, \n\t\t\ttrader.key,\n\t\t\ttrader.first_name + \" \" + trader.last_name\n\t\t);\n\t\tuser.conversations[converRef.key] = userConversation;\n\n\t\t// console.log(\"uckey:\", user.conversations)\n\n\t\tthis.updateUserConversation(user.key, converRef.key, userConversation)\n\n\t\ttrader.conversations = trader.conversations ? trader.conversations : [];\n\t\tvar traderConversation = new UserConversation(\n\t\t\tconverRef.key, \n\t\t\tuser.key,\n\t\t\tuser.first_name + \" \" + user.last_name,\n\t\t\ttrue\n\t\t);\n\n\t\ttrader.conversations[converRef.key] = traderConversation;\n\n\t\tvar traderConversationKey = this.afdb.list('/users/'+trader.key+'/conversations/').update(converRef.key, traderConversation)\n\n\t\treturn converRef\n\t}\n\n\tupdateUserConversation(userKey, converKey, conversation){\n\t\treturn this.afdb\n\t\t.list('/users/'+userKey+'/conversations/')\n\t\t.update(converKey, conversation)\n\n\t}\n\n\n\tpushConversation(messages, members){\n\n\t\treturn this.afdb.list('/conversations').push({\n\t\t\tmessages: messages,\n\t\t\tmembers: members\n\t\t})\n\t\t\n\t}\n\n\tupdateConversation(key, trader : Profile, user : Profile, msg){\n\t\t// console.log(\"update convo \" + key)\n\t\tlet message = new Message(\n\t\t\tmsg,\n\t\t\tuser.first_name + \" \" + user.last_name,\n\t\t\tuser.key,\n\t\t\tfirebase.database.ServerValue.TIMESTAMP\n\t\t)\n\t\tthis.afdb.list(`/conversations/${key}/messages`).push(message)\n\t\tthis.afdb.list(`/users/${trader.key}/conversations`).update(key,{\"unread\":true})\n\t\t// var conversationSub = this.afdb\n\t\t// .object('/conversations/' + key)\n\t\t// .snapshotChanges()\n\t\t// .subscribe((res)=>{\n\t\t// \ttry{\n\n\t\t// \t\tvar conversation = res.payload.val();\n\t\t\t\t\n\t\t// \t\tif(!conversation) return;\n\t\t\t\t\n\t\t// \t\tconversation[\"messages\"] = conversation[\"messages\"] || [];\n\n\t\t// \t\tvar message = new Message(msg, user.first_name + \" \" + user.last_name, user.key, firebase.database.ServerValue.TIMESTAMP)\n\n\n\t\t// \t\tconversation[\"messages\"].push(message)\n\n\t\t// \t\tthis.afdb.list('/conversations').update(key, {\n\t\t// \t\t\tmessages : conversation[\"messages\"]\n\t\t// \t\t})\n\n\t\t// \t\tconsole.log(\"converRef update: \" , res.payload.val())\n\t\t// \t\tconversationSub.unsubscribe();\n\n\t\t// \t}catch(err){\n\t\t// \t\tconsole.log(\"Error updating conversation \", err)\n\t\t// \t}\n\n\t\t// })\n\t}\n\n\treadConversation(converKey, userKey){\n\t\treturn this.afdb.list(`/users/${userKey}/conversations/`)\n\t\t.update(converKey, {unread:false})\n\t}\n\n\tgetUserConversations(user : Profile, events = null){\n\t\treturn this.afdb\n\t\t\t.list('/users/'+user.key+'/conversations/')\n\t\t\t.snapshotChanges(events)\n\t\t\t.pipe(\n      \tmap(changes => \n        \tchanges.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n      )\n    )\n\t}\n\n\n\tgetProfile(key){\n\t\treturn new Promise((resolve,reject)=>{\n\n\t\t\tvar subscription = this.afdb\n\t\t\t.object('/users/'+key)\n\t\t\t.snapshotChanges()\n\t\t\t.subscribe((res)=>{\n\t\t\t\tresolve(res.payload.val());\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t});\n\n\n\t\t})\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/firebaseapp/firebaseapp.ts","import * as firebase from 'firebase/app';\r\n\r\nexport class Message{\r\n\r\n\ttext: String = \"\";\r\n\tsender: String = \"\";\r\n\tsenderKey: String = \"\";\r\n\tcreatedAt: firebase.database.Database ;\r\n\r\n\tconstructor(\r\n\t\ttext\r\n\t\t, sender\r\n\t\t, senderKey\r\n\t\t, createdAt\r\n\t\t){\r\n\t\tthis.text = text;\t\t\r\n\t\tthis.sender = sender;\t\t\r\n\t\tthis.senderKey = senderKey;\t\t\r\n\t\tthis.createdAt = createdAt;\t\t\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/message.ts","export class UserConversation{\r\n\r\n  public key = \"\";\r\n  public traderKey = \"\";\r\n  public name = \"\";\r\n  public unread;\r\n\r\n\tconstructor(key, traderKey, name, unread = false){\r\n\t\tthis.key = key;\r\n\t\tthis.traderKey = traderKey;\r\n\t\tthis.name = name;\r\n\t\tthis.unread = unread;\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/userConversation.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n@Component({\n  selector: 'page-all-traders',\n  templateUrl: 'all-traders.html',\n})\nexport class AllTradersPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/all-traders/all-traders.ts","import { NgModule } from '@angular/core';\nimport { KeysPipe } from './keys/keys';\nimport { ReplacePipe } from './replace/replace';\nimport { DistancePipe } from './distance/distance';\n@NgModule({\n\tdeclarations: [\n\t\tKeysPipe,\n    ReplacePipe,\n    DistancePipe\n  ],\n\timports: [],\n\texports: [\n\t\tKeysPipe,\n    ReplacePipe,\n    DistancePipe\n  ]\n})\nexport class PipesModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'keys',\n})\nexport class KeysPipe implements PipeTransform {\n  transform(value, args:string[]) : any {\n    let values = [];\n    for (let key in value) {\n      values.push(value);\n    }\n    return values;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/keys/keys.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ReplacePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'replace',\n})\nexport class ReplacePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, ...args) {\n  \tif(!value) return \"\";\n    return value.replace(args[0], args[1]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/replace/replace.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the DistancePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'ceil',\n})\nexport class DistancePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, ...args) {\n    return Math.ceil(parseFloat(value))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/distance/distance.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n/*\n  Generated class for the UiProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class UiProvider {\n\n  constructor(public http: HttpClient) {\n  }\n\n  getRandomProfileImage(){\n \t\treturn 0;\n  }\n\n\n\tgetRandomInt(min, max) {\n\t    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/ui/ui.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events} from 'ionic-angular';\n\nimport { TradePage } from '../trade/trade';\nimport { MessagesPage } from '../messages/messages';\nimport { ProfilePage } from '../profile/profile';\nimport { OptionsPage } from '../options/options';\nimport { DealPage } from '../deal/deal';\nimport { ShopPage } from '../shop/shop';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { MessagesProvider } from '../../providers/messages/messages';\n\n\n@Component({\n  selector: 'page-tabs',\n  templateUrl: 'tabs.html'\n})\n\n\nexport class TabsPage {\n\n  tab1Root = ProfilePage;\n  tab2Root = TradePage;\n  tab3Root = MessagesPage;\n  tab4Root = DealPage;\n  tab5Root = ShopPage;\n\n  constructor(\n    public navCtrl: NavController\n    , public auth: AppAuthProvider\n    , private fbApp: FirebaseappProvider\n    , private profile: ProfileProvider\n    , private events: Events\n    , private messages: MessagesProvider\n  \t) {\n    this.events.subscribe(\"profile:loaded\",()=>{\n\n      this.messages.loadConversations(this.fbApp)\n\n      // this.fbApp\n      // .getUserConversations(this.profile.user,[\"child_added\"])\n      // .subscribe((res)=>{\n      // })\n    })\n\n  }\n\n  navTo(page){\n  \tthis.navCtrl.push(OptionsPage, {}, {animate:true, direction: 'forward'})\n  }\n\n\n  logout(){\n    this.auth.logout();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { LoadingController } from 'ionic-angular';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable  } from '@angular/core';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { Profile } from '../../models/profile';\n\n@Injectable()\nexport class MessagesProvider {\n\n\tunreadMsgCnt = 0;\n\ttraders = [];\n\ttraderTemp = [];\n\n  constructor(\n  \tpublic http: HttpClient\n  \t, private loadCtrl: LoadingController \n  \t, private profile: ProfileProvider \n  ) {\n  }\n\n  loadConversations(fbApp){\n    var load = this.loadCtrl.create();\n    load.present();\n\n    fbApp.getUserConversations(this.profile.user).subscribe((res)=>{\n    \tthis.unreadMsgCnt = 0;\n      load.dismiss();\n      if(!res) return;\n\n      let traderPromises = [];\n      for(var convo in res){\n        var conversation = res[convo];\n\n        traderPromises.push(this.addTraderToList(fbApp, conversation)) \n      }\n      \n      Promise.all(traderPromises).then((traders)=>{\n        this.sortUnreadMessages(traders)\n      \t// console.log(\"[loadConversation]: \", this.traders)\n      })\n\n    })\n\n  }\n\n  sortUnreadMessages(traders){\n    let unreadTraders = traders.filter(trader=>{return trader.hasUnreadMessage})\n    let readTraders = traders.filter(trader=>{return !trader.hasUnreadMessage})\n\n    this.traders = unreadTraders.concat(readTraders);  \n  }\n\n  addTraderToList(fbApp, conversation){\n    return new Promise((resolve,reject)=>{\n      fbApp.getProfile(conversation.traderKey).then((res:Profile)=>{\n        res[\"hasUnreadMessage\"] = conversation.unread;\n\n        if(conversation.unread && this.profile.currentConversation != res.key){\n        \tthis.unreadMsgCnt++;\n        }\n\n        resolve(res)\n      })\n\n    })\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/messages/messages.ts","export const firebaseConfig = {\r\n\tweb:{\r\n  \tapiKey: \"AIzaSyCs8fw6B3hdkNBkf9o48V_0sTGhxC1Pg_E\",\r\n\t  authDomain: \"console-trade.firebaseapp.com\",\r\n\t  databaseURL: \"https://console-trade.firebaseio.com\",\r\n\t  projectId: \"console-trade\",\r\n\t  storageBucket: \"console-trade.appspot.com\",\r\n\t  messagingSenderId: \"670922071182\"\r\n\t}\r\n};\r\n\r\nexport const C = {\r\n\tPS4 : \"ps4\",\r\n\tXBOX1 : \"xbox1\",\r\n\tNS : \"ns\",\r\n\tPS4_ID : 48,\r\n\tNS_ID : 130,\r\n\tXBOX1_ID : 49,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.ts"]}