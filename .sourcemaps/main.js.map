{"version":3,"sources":["../../src/providers/trade/trade.ts","../../src/pages/chat/chat.ts","../../src/pages/map/map.ts","../../src/providers/messages/messages.ts","../../src/providers/igdb/igdb.ts","../../src/pages/login/login.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/models/profile.ts","../../src/pages/trade/trade.ts","../../src/pages/courier-popover/courier-popover.ts","../../src/pages/messages/messages.ts","../../src/pages/profile/profile.ts","../../src/models/game.ts","../../src/providers/storage/storage.ts","../../src/pages/options/options.ts","../../src/pages/deal/deal.ts","../../src/pages/shop/shop.ts","../../src/pages/signup/signup.ts","../../src/pages/resetpassword/resetpassword.ts","../../src/app/main.ts","../../src/providers/app-auth/app-auth.ts","../../src/providers/profile/profile.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/firebaseapp/firebaseapp.ts","../../src/models/message.ts","../../src/models/userConversation.ts","../../src/pages/all-traders/all-traders.ts","../../src/pipes/pipes.module.ts","../../src/pipes/keys/keys.ts","../../src/pipes/replace/replace.ts","../../src/pipes/distance/distance.ts","../../src/providers/ui/ui.ts","../../src/pages/tabs/tabs.ts","../../src/config.ts"],"names":["TradeProvider","http","this","matchingTraders","loading","prototype","getNearestPossibleTrades","key","limit","offset","_this","Promise","resolve","reject","headers","__WEBPACK_IMPORTED_MODULE_0__angular_common_http__","set","url","httpSub","get","subscribe","res","unsubscribe","getNearestTrades","__decorate","Object","__WEBPACK_IMPORTED_MODULE_1__angular_core__","ChatPage","navCtrl","navParams","profile","fbApp","auth","app","popoverCtrl","message","thread","userOfferedGames","traderOfferedGames","courier","name","trader","converKey","getTraderConversationKey","user","readConversation","chatSub","getConversationMessages","observeTraderOfferedGames","observeUserOfferedGames","traderOfferedGamesSub","getOfferedGames","matchingTrades","_i","res_1","length","game","_a","_b","traderGame","id","isSelected","userOfferedGamesSub","matchingWishes","res_2","ionViewDidLoad","ionViewWillEnter","ionViewDidLeave","send","updateConversation","createNewThread","console","log","navToMap","getRootNavs","push","__WEBPACK_IMPORTED_MODULE_6__pages_map_map__","target","selectGame","clearTimeout","saveTimeout","filter","e","setTimeout","updateConversationOffers","selectCourier","popover","create","__WEBPACK_IMPORTED_MODULE_7__pages_courier_popover_courier_popover__","present","onDidDismiss","__WEBPACK_IMPORTED_MODULE_0__angular_core__","selector","template","__WEBPACK_IMPORTED_MODULE_1_ionic_angular__","__WEBPACK_IMPORTED_MODULE_2__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_3__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_4__providers_app_auth_app_auth__","MapPage","platform","geolocation","loadCtrl","markers","searchInput","canEdit","sessionToken","google","maps","places","AutocompleteSessionToken","customTarget","target_locations","ready","then","geocoder","Geocoder","AutocompleteService","initMap","searchLocation","timeout","getPlacePredictions","input","getCurrentPosition","resp","mylocation","LatLng","coords","latitude","longitude","map","Map","mapElement","nativeElement","zoom","disableDefaultUI","center","addMarker","label","remember","initAutoComplete","initClickEvent","trade_locations","initMarkers","catch","tradeLocations","self","tradeLocations_1","geocode","address","status","geometry","location","userLocation","document","getElementById","controls","ControlPosition","TOP_LEFT","circle","Circle","radius","accuracy","PlacesService","Autocomplete","bounds","getBounds","strictBounds","addListener","place","getPlace","panTo","setZoom","addTradeLocation","clearAutocomplete","__WEBPACK_IMPORTED_MODULE_5_jquery__","val","event","latLng","lat","lng","formatted_address","dismiss","dbTimeout","removeLastTradeLocation","updateUserTradeLocations","shift","setMap","position","options","marker","Marker","icon","setMapOnAll","i","clearMarkers","deleteMarkers","findLocation","__WEBPACK_IMPORTED_MODULE_3__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_4__providers_firebaseapp_firebaseapp__","MessagesProvider","unreadMsgCnt","traders","traderTemp","loadConversations","load","getUserConversations","traderPromises","convo","addTraderToList","all","unreadTraders","hasUnreadMessage","readTraders","concat","conversation","getProfile","traderKey","unread","__WEBPACK_IMPORTED_MODULE_2__angular_core__","__WEBPACK_IMPORTED_MODULE_1__angular_common_http__","__WEBPACK_IMPORTED_MODULE_0_ionic_angular__","__WEBPACK_IMPORTED_MODULE_3__providers_profile_profile__","IgdbProvider","searchOptions","search","excludedPlatforms","included","indexOf","gameIds","first","r","filteredSearch","removeUnsupportedPlatforms","games","platforms","__WEBPACK_IMPORTED_MODULE_2__config__","PS4_ID","XBOX1_ID","NS_ID","LoginPage","fb","loginForm","group","email","__WEBPACK_IMPORTED_MODULE_1__angular_forms__","compose","required","password","minLength","login","data","value","signInWithEmail","setRoot","__WEBPACK_IMPORTED_MODULE_5__tabs_tabs__","error","loginError","signup","__WEBPACK_IMPORTED_MODULE_3__signup_signup__","loginWithGoogle","googleLogin","onSignIn","navToPassword","__WEBPACK_IMPORTED_MODULE_4__resetpassword_resetpassword__","__WEBPACK_IMPORTED_MODULE_2_ionic_angular__","webpackEmptyAsyncContext","req","Error","keys","module","exports","__webpack_require__","d","__webpack_exports__","Profile","profileImage","first_name","last_name","wishList","ownedList","consoles","last_location","gender","addToWishList","addToOwnedList","TradePage","trade","events","storage","refresh","showDisclaimer","showMatchingOnly","hasMore","getTrades","showChat","__WEBPACK_IMPORTED_MODULE_4__pages_chat_chat__","expandToggle","expanded","confirmDisclaimer","toggleTraders","showMore","userKey","__WEBPACK_IMPORTED_MODULE_3__providers_trade_trade__","__WEBPACK_IMPORTED_MODULE_6__ionic_storage__","CourierPopoverPage","viewCtrl","couriers","logo","price","opt","MessagesPage","messages","traderOwned","_c","_d","_e","traderWish","_f","_g","userOwned","__WEBPACK_IMPORTED_MODULE_5__pages_chat_chat__","getRandomPic","getRandomInt","min","max","Math","floor","random","__WEBPACK_IMPORTED_MODULE_3__providers_messages_messages__","ProfilePage","igdb","imgLoader","transfer","file","fileChooser","imagePicker","fbStorage","loadingCtrl","imageResizer","searchIsLoading","setBackgroundSize","toggleItemList","item","owned","publish","toggleItemPlatform","removeItem","searchtTitle","clearSearch","addGameToProfile","includes","__WEBPACK_IMPORTED_MODULE_6__config__","PS4","NS","XBOX1","cover","replace","__WEBPACK_IMPORTED_MODULE_5__models_game__","__WEBPACK_IMPORTED_MODULE_8__pages_map_map__","uploadImage","is","uploadImage_web","uploadImage_and","getPictures","maximumImagesCount","outputType","resolveLocalFilesystemUrl","resize","uri","nativeURL","quality","width","height","filePath","readAsDataURL","filesystem","root","storeImage","__WEBPACK_IMPORTED_MODULE_13_jquery__","trigger","change","getBase64","base64","content","updateUserProfileImage","err","reader","FileReader","onload","result","onerror","getExt","filename","idx","lastIndexOf","substr","__WEBPACK_IMPORTED_MODULE_2__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_7_ionic_image_loader__","__WEBPACK_IMPORTED_MODULE_9__ionic_native_file_transfer__","__WEBPACK_IMPORTED_MODULE_10__ionic_native_file__","__WEBPACK_IMPORTED_MODULE_11__ionic_native_file_chooser__","__WEBPACK_IMPORTED_MODULE_12__ionic_native_image_picker__","__WEBPACK_IMPORTED_MODULE_15__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_14__providers_storage_storage__","__WEBPACK_IMPORTED_MODULE_16__ionic_native_image_resizer__","Game","cover_url","StorageProvider","image","userEmail","storageRef","__WEBPACK_IMPORTED_MODULE_2_firebase__","ref","child","putString","on","_snapshot","_err","getDownloadURL","OptionsPage","emailComposer","feedback","open","to","subject","logout","__WEBPACK_IMPORTED_MODULE_3__ionic_native_email_composer__","DealPage","cart","submitText","addGameToCart","__WEBPACK_IMPORTED_MODULE_4__config__","__WEBPACK_IMPORTED_MODULE_3__models_game__","__WEBPACK_IMPORTED_MODULE_2__providers_igdb_igdb__","ShopPage","SignupPage","keyboard","canSubmit","validation_messages","type","passwordType","showPasswordIcon","disableScroll","signupForm","__WEBPACK_IMPORTED_MODULE_2__angular_forms__","maxLength","pattern","ionViewDidEnter","ionViewWillLeave","checkForm","errors","showPassword","signUp","firstName","lastName","__WEBPACK_IMPORTED_MODULE_4__tabs_tabs__","__WEBPACK_IMPORTED_MODULE_3__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_keyboard__","ResetpasswordPage","toastCtrl","resetPassword","showToast","msg","redirect","toast","duration","__WEBPACK_IMPORTED_MODULE_3__login_login__","__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__","bootstrapModule","__WEBPACK_IMPORTED_MODULE_1__app_module__","AppAuthProvider","afAuth","afdb","googlePlus","credentials","signInWithEmailAndPassword","form","createUserWithEmailAndPassword","sendEmailVerification","__WEBPACK_IMPORTED_MODULE_3__models_profile__","toLowerCase","getRandomProfileImage","getUserCurrentPosition","coord","list","snap","update","geodata","long","defineProperty","getEmail","signOut","sendPasswordResetEmail","webClientId","offline","googleCredential","__WEBPACK_IMPORTED_MODULE_2_firebase_app__","GoogleAuthProvider","credential","idToken","signInWithCredential","response","JSON","stringify","logInWithGoogle","signInWithPopup","logInWithGoogleRedirect","signInWithRedirect","getRedirectResult","alert","__WEBPACK_IMPORTED_MODULE_1_angularfire2_auth__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_4_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_6__ionic_native_google_plus__","__WEBPACK_IMPORTED_MODULE_7_ionic_angular__","ProfileProvider","fbapp","allListsUpdateTimeout","wishListUpdateTimeout","ownedListUpdateTimeout","__WEBPACK_IMPORTED_MODULE_2__models_profile__","fbUser","duplicate","__WEBPACK_IMPORTED_MODULE_3_underscore_underscore__","updateUserOwnedList","updateUserWishList","authUser","startAllListsUpdateTImer","el","startWishListUpdateTImer","startOwnedListUpdateTImer","isItemMatch","__WEBPACK_IMPORTED_MODULE_5_ionic_angular__","AppModule","declarations","__WEBPACK_IMPORTED_MODULE_3__app_component__","__WEBPACK_IMPORTED_MODULE_17__pages_chat_chat__","__WEBPACK_IMPORTED_MODULE_10__pages_trade_trade__","__WEBPACK_IMPORTED_MODULE_11__pages_messages_messages__","__WEBPACK_IMPORTED_MODULE_12__pages_profile_profile__","__WEBPACK_IMPORTED_MODULE_14__pages_login_login__","__WEBPACK_IMPORTED_MODULE_15__pages_signup_signup__","__WEBPACK_IMPORTED_MODULE_16__pages_options_options__","__WEBPACK_IMPORTED_MODULE_18__pages_map_map__","__WEBPACK_IMPORTED_MODULE_19__pages_deal_deal__","__WEBPACK_IMPORTED_MODULE_20__pages_shop_shop__","__WEBPACK_IMPORTED_MODULE_21__pages_courier_popover_courier_popover__","__WEBPACK_IMPORTED_MODULE_22__pages_resetpassword_resetpassword__","__WEBPACK_IMPORTED_MODULE_23__pages_all_traders_all_traders__","__WEBPACK_IMPORTED_MODULE_13__pages_tabs_tabs__","imports","__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__","forRoot","scrollAssist","autoFocusAssist","links","__WEBPACK_IMPORTED_MODULE_6_angularfire2__","initializeApp","__WEBPACK_IMPORTED_MODULE_8__config__","web","__WEBPACK_IMPORTED_MODULE_26_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_28__angular_common_http__","__WEBPACK_IMPORTED_MODULE_33_ionic_long_press__","__WEBPACK_IMPORTED_MODULE_31__pipes_pipes_module__","__WEBPACK_IMPORTED_MODULE_35_ionic_image_loader__","__WEBPACK_IMPORTED_MODULE_9__ultimate_ngxerrors__","__WEBPACK_IMPORTED_MODULE_43__ionic_storage__","bootstrap","entryComponents","providers","__WEBPACK_IMPORTED_MODULE_4__ionic_native_status_bar__","__WEBPACK_IMPORTED_MODULE_5__ionic_native_splash_screen__","provide","useClass","__WEBPACK_IMPORTED_MODULE_7_angularfire2_auth__","__WEBPACK_IMPORTED_MODULE_25__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_24__providers_app_auth_app_auth__","__WEBPACK_IMPORTED_MODULE_27__providers_igdb_igdb__","__WEBPACK_IMPORTED_MODULE_29__providers_trade_trade__","__WEBPACK_IMPORTED_MODULE_30__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_32__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_34__providers_ui_ui__","__WEBPACK_IMPORTED_MODULE_36__ionic_native_file_transfer__","__WEBPACK_IMPORTED_MODULE_37__ionic_native_file__","__WEBPACK_IMPORTED_MODULE_38__ionic_native_file_chooser__","__WEBPACK_IMPORTED_MODULE_39__ionic_native_image_picker__","__WEBPACK_IMPORTED_MODULE_41__ionic_native_image_resizer__","__WEBPACK_IMPORTED_MODULE_42__ionic_native_google_plus__","__WEBPACK_IMPORTED_MODULE_44__ionic_native_email_composer__","__WEBPACK_IMPORTED_MODULE_40__providers_storage_storage__","__WEBPACK_IMPORTED_MODULE_46__ionic_native_keyboard__","__WEBPACK_IMPORTED_MODULE_45__providers_messages_messages__","MyApp","statusBar","splashScreen","rootPage","styleDefault","hide","authState","load_1","__WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__","initProfile","__WEBPACK_IMPORTED_MODULE_11__pages_login_login__","userRef","orderByChild","equalTo","userSub","snapshotChanges","pipe","__WEBPACK_IMPORTED_MODULE_6_rxjs_operators__","changes","c","__assign","payload","conversations","enableHighAccuracy","__WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__","__WEBPACK_IMPORTED_MODULE_5_angularfire2_database__","__WEBPACK_IMPORTED_MODULE_7__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_8__ionic_native_geolocation__","__WEBPACK_IMPORTED_MODULE_9__providers_trade_trade__","FirebaseappProvider","conversationKey","valueChanges","selectedGames","__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__","u","t","members","__WEBPACK_IMPORTED_MODULE_3__models_message__","__WEBPACK_IMPORTED_MODULE_5_firebase_app__","ServerValue","TIMESTAMP","converRef","pushConversation","userConversation","__WEBPACK_IMPORTED_MODULE_4__models_userConversation__","updateUserConversation","traderConversation","subscription","object","__WEBPACK_IMPORTED_MODULE_6_angularfire2_database__","Message","text","sender","senderKey","createdAt","UserConversation","AllTradersPage","PipesModule","__WEBPACK_IMPORTED_MODULE_1__keys_keys__","__WEBPACK_IMPORTED_MODULE_2__replace_replace__","__WEBPACK_IMPORTED_MODULE_3__distance_distance__","KeysPipe","transform","args","values","ReplacePipe","arguments","DistancePipe","ceil","parseFloat","UiProvider","TabsPage","tab1Root","__WEBPACK_IMPORTED_MODULE_4__profile_profile__","tab2Root","__WEBPACK_IMPORTED_MODULE_2__trade_trade__","tab3Root","__WEBPACK_IMPORTED_MODULE_3__messages_messages__","tab4Root","__WEBPACK_IMPORTED_MODULE_6__deal_deal__","tab5Root","__WEBPACK_IMPORTED_MODULE_7__shop_shop__","navTo","page","__WEBPACK_IMPORTED_MODULE_5__options_options__","animate","direction","__WEBPACK_IMPORTED_MODULE_9__providers_firebaseapp_firebaseapp__","__WEBPACK_IMPORTED_MODULE_10__providers_profile_profile__","__WEBPACK_IMPORTED_MODULE_11__providers_messages_messages__","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","C"],"mappings":"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","sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class TradeProvider {\n\n  matchingTraders:any = [];\n  loading = false;\n\n  constructor(public http: HttpClient) {\n  }\n\n\n  getNearestPossibleTrades(key, limit = 15, offset = 0){\n  \t// console.log(\"[GetNeareastPossibleTrades] \" + key)\n    return new Promise((resolve,reject)=>{\n      var headers = new HttpHeaders()\n            .set(\"key\", \"eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4\")\n\n       var url = `https://lemon-data-center-js.herokuapp.com/api/getNPT?key=${key}&limit=${limit}&offset=${offset}`;\n       // var url = `http://localhost:3000/api/getNPT?key=${key}&limit=${limit}&offset=${offset}`;\n\n      this.loading = true;\n\n      var httpSub = this.http.get(url, {headers}).subscribe((res)=>{\n        \n        this.matchingTraders = res ? res : [];\n        // console.log(\"get getNearestPossibleTrades: \", this.matchingTraders)\n        \n        this.loading = false;\n        resolve(this.matchingTraders)\n        httpSub.unsubscribe();\n      });\n\n    })\n  }\n\n  getNearestTrades(key, limit = 15, offset = 0){\n    // console.log(\"[GetNeareastTrades] \" + key)\n    return new Promise((resolve,reject)=>{\n      var headers = new HttpHeaders()\n            .set(\"key\", \"eJQ0S7PjPs9BJJEJY8fXaJTNrngJIko4\")\n\n       var url = `https://lemon-data-center-js.herokuapp.com/api/getNT?key=${key}&limit=${limit}&offset=${offset}`;\n       // var url = `http://localhost:3000/api/getNT?key=${key}&limit=${limit}&offset=${offset}`;\n\n      this.loading = true;\n\n      var httpSub = this.http.get(url, {headers}).subscribe((res)=>{\n        \n        this.matchingTraders = res ? res : [];\n        // console.log(\"get getNearestPossibleTrades: \", this.matchingTraders)\n        \n        this.loading = false;\n        resolve(this.matchingTraders)\n        httpSub.unsubscribe();\n      });\n    \n    })\n\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/trade/trade.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, App, PopoverController  } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport 'rxjs/add/observable/fromEvent';\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\nimport { MapPage } from '../../pages/map/map';\nimport { CourierPopoverPage } from '../../pages/courier-popover/courier-popover';\nimport * as $ from 'jquery'\n\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html',\n})\nexport class ChatPage {\n\n\ttrader;\n\tmessage = \"\";\n\tchatSub;\n\tthread = [];\n\tconverKey;\n  userOfferedGamesSub;\n  traderOfferedGamesSub;\n  userOfferedGames = [];\n  traderOfferedGames = [];\n  courier ={\n    name: \"No Courier Selected\"\n  } \n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n  \t, public auth: AppAuthProvider\n    , private app: App\n    , public popoverCtrl: PopoverController\n  \t) {\n  \tthis.trader = navParams.get('trader')\n    // console.log(\"[chat] trader: \", this.trader)\n    this.converKey =  this.fbApp.getTraderConversationKey(this.trader, this.profile.user)\n    this.fbApp.readConversation(this.converKey, this.profile.user.key);\n\n    if(this.converKey){\n      this.chatSub = this.fbApp.getConversationMessages(this.converKey)\n        .subscribe((res)=>{\n          // console.log(\"thread \", res);\n          this.thread = res;\n          this.fbApp.readConversation(this.converKey, this.profile.user.key)\n       })\n\n      this.observeTraderOfferedGames();\n      this.observeUserOfferedGames();\n\n     }\n\n  }\n\n  observeTraderOfferedGames(){\n    this.traderOfferedGamesSub = this.fbApp.getOfferedGames(\n      this.trader.key,\n      this.converKey\n    ).subscribe( (res)=>{\n      this.traderOfferedGames = res;\n      if(!this.trader.matchingTrades) return;\n\n      for(var game of res){\n        \n        for(var traderGame of this.trader.matchingTrades){\n          if(game[\"id\"] === traderGame.id){\n            traderGame.isSelected = true;\n          }\n        }\n      }\n\n      // console.log(\">>> traderrOG\",res)\n    });\n  }\n\n  observeUserOfferedGames(){\n    this.userOfferedGamesSub = this.fbApp.getOfferedGames(\n      this.profile.user.key,\n      this.converKey\n    ).subscribe( (res)=>{\n      this.userOfferedGames = res;\n\n      if(!this.trader.matchingWishes)\n        this.trader.matchingWishes = [];\n\n      for(var game of res){\n        for(var traderGame of this.trader.matchingWishes){\n          if(game[\"id\"] === traderGame.id){\n            traderGame.isSelected = true;\n          }\n        }\n      }\n    \n      // console.log(\">>> userOG\",res)\n    });\n  }\n\n  ionViewDidLoad(){\n  }\n\n  ionViewWillEnter() {\n  }\n\n  ionViewDidLeave(){\n    if(this.chatSub){\n      // console.log(\"ONLEAVE CHAT PAGE\")\n      this.chatSub.unsubscribe();\n    }\n    if(this.userOfferedGamesSub){\n      this.userOfferedGamesSub.unsubscribe();\n    }\n  \tif(this.traderOfferedGamesSub){\n  \t\tthis.traderOfferedGamesSub.unsubscribe();\n  \t}\n  }\n\n  send(){\n  \t// console.log(\"sent message: \" , this.message)\n  \t\n\n  \tif(this.converKey){\n  \t\t// console.log(\"UPDATE CHAT \" + this.converKey)\n\t\t\tthis.fbApp.updateConversation(this.converKey, this.trader, this.profile.user, this.message)\n\t\t}else{\n\t\t\tthis.converKey = this.fbApp.createNewThread(this.trader,this.profile.user,this.message).key\t  \t\t\t\n      console.log(\"PUSH CHAT \" + this.converKey)\n\t\t\t\n  \t\tthis.chatSub = this.fbApp.getConversationMessages(this.converKey).subscribe((res)=>{\n  \t\t\t\t// console.log(\"thread \", res);\n  \t\t\t\tthis.thread = res;\n          this.fbApp.readConversation(this.converKey, this.profile.user.key)\n  \t\t})\n\t\t}\n\n  \t// var converSub =\tthis.fbApp\n  \t// .getConversation(this.trader, this.profile.user)\n  \t// .subscribe((res)=>{\n\t\t\t// console.log(\"conver res: \", res);\n\n  \t\t// var key;\n  \t\t// if(!res){\n\t\t\t\t// var converRef = this.fbApp.pushConversation(this.trader,this.profile.user,this.message)\t  \t\t\t\n  \t\t// \tkey = converRef.key;\n  \t\t// }\n  \t\t// else{\n  \t\t// \tkey = res[0][\"key\"];\n  \t\t// \tthis.fbApp.updateConversation(key, this.trader, this.profile.user, this.message)\n  \t\t// }\n\n  \t\t// converSub.unsubscribe();\n  \t// })\n  \t\n\n\n\n  \tthis.message = \"\";\n  }\n\n  navToMap(){\n      this.app.getRootNavs()[0].push(MapPage, {\n        target : this.trader\n      });\n  }\n\n  saveTimeout;\n  selectGame(game){\n    clearTimeout(this.saveTimeout)\n\n    if(!game.isSelected){\n      game.isSelected = true;\n      this.userOfferedGames.push(game)\n    }\n    else{ \n      game.isSelected = false;\n      this.userOfferedGames = this.userOfferedGames.filter( (e)=>{\n        return e.id != game.id\n      } )\n    }\n\n    setTimeout(()=>{\n      this.fbApp.updateConversationOffers(this.profile.user.key, this.converKey, this.userOfferedGames);\n    },500);\n\n\n  }\n\n  selectCourier(){\n    // this.courierStatus = \"waiting for confirmation\";\n    // console.log(222)\n    // $('.meetup').css('width','25%')\n    // $('.meetup').css('padding','15px 0')\n    // $('.courier').css('width','75%')\n\n    let popover = this.popoverCtrl.create(CourierPopoverPage)\n    popover.present();\n\n    popover.onDidDismiss((courier)=>{\n      if(!courier) return\n        this.courier = courier;\n    })\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform, App, LoadingController } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { Profile } from '../../models/profile';\nimport * as $ from 'jquery'\n\n\ndeclare var google: any;\n@Component({\n  selector: 'page-map',\n  templateUrl: 'map.html',\n})\nexport class MapPage {\n\n\t@ViewChild('map') mapElement: ElementRef;\n\n\tmap: any;\n\tgeocoder: any;\n\tplaces: any;\n\tmarkers = [];\n\tsessionToken;\n\tsearchInput = \"\";\n\ttarget : Profile;\n\tcanEdit = true;\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n\t\t, public platform: Platform\n\t\t, private geolocation: Geolocation\n\t\t, private profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n  \t, public loadCtrl: LoadingController\n ) {\n  \tthis.target = this.profile.user;\n  \tthis.sessionToken = new google.maps.places.AutocompleteSessionToken();\n\n\n  }\n\n  ionViewDidLoad() {\n  }\n\n  ionViewWillEnter(){\n  \tthis.target = this.profile.user;\n  \tlet customTarget = this.navParams.get('target');\n\n  \tif(customTarget){\n  \t\tthis.canEdit = false;\n  \t\t\n  \t\tif(!customTarget.target_locations)\n  \t\tcustomTarget.target_locations = [];\n\n  \t\tthis.target = customTarget;\n  \t\t// console.log(\"using custom target\", this.target)\n  \t}\n\n\n    this.platform.ready().then(() => {\n\t\t\tif(google){\n\t  \t\tthis.geocoder = new google.maps.Geocoder();\n\t  \t\tthis.places = new google.maps.places.AutocompleteService();\n\n\n\t    \tthis.initMap();\n\t\t\t}\n\t  });\n  }\n\n  timeout;\n  searchLocation(){\n  \t// console.log(\"searchLocation: \" + this.searchInput)\n  \tclearTimeout(this.timeout);\n  \t\n  \tthis.timeout = setTimeout(()=>{\n\n  \tthis.places.getPlacePredictions({\n  \t\tinput: this.searchInput,\n  \t\tsessionToken: this.sessionToken\n  }, (res)=>{\n  \t\t// console.log(\"place prediction \", res)\n  \t})\n\n  \t}, 500)\n  }\n\n\n  initMap() {\n  \tvar self = this;\n\n\t  this.geolocation.getCurrentPosition().then((resp) => {\n\t    let mylocation = new google.maps.LatLng(resp.coords.latitude,resp.coords.longitude);\n\t    // let mylocation = new google.maps.LatLng(14.710761999999999,121.05234990000001);\n\t    \n\t    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n\t      zoom: 15,\n\t      disableDefaultUI: true,\n\t      center: mylocation\n\t    });\n\t    this.addMarker(mylocation ,{label:\"YOU\", remember:false})\n\n  \t\tthis.initAutoComplete(resp);\n  \t\tthis.initClickEvent();\n\n  \t\tif(this.target.trade_locations)\n\t    \tthis.initMarkers(this.target.trade_locations);\n\t  }).catch((e)=>{\n\t  \t\tconsole.log(\"errrr\",e);\n\t  });\n\n\t}\n\ninitMarkers(tradeLocations){\n  \tvar self = this;\n\n  for(let tradeLocation of tradeLocations){\n    \tthis.geocoder.geocode({'address': tradeLocation}, function(res,status){\n        if (status === 'OK') {\n\t\t    \t\tself.addMarker(\n\t\t    \t\t\tres[0].geometry.location, \n\t\t    \t\t\t// {icon:\"assets/imgs/blue_marker.png\"}\n\t    \t\t\t)\n        }else{\n        \tconsole.log(\"Geocode was not successful for the following reason: \"  + status)\n        }\n\t\t\t})\n  }\n}\n\ninitAutoComplete(userLocation){\n\t\tvar mylocation = new google.maps.LatLng(userLocation.coords.latitude,userLocation.coords.longitude);\n\t\tlet input = document.getElementById('autocomplete');\n\n\t\tthis.map.controls[google.maps.ControlPosition.TOP_LEFT].push(input)\n\n\t \tvar circle = new google.maps.Circle({\n\t    center: mylocation,\n\t    radius: userLocation.coords.accuracy\n\t  });\n\t\tthis.places = new google.maps.places.PlacesService(this.map);\n\n\t\tvar autocomplete = new google.maps.places.Autocomplete( \n\t\t\tinput,  {\n\t\t\t\tbounds: circle.getBounds(),\n\t\t\t\tstrictBounds: true\n\t\t\t}\n\t\t);\n\n\t\tvar self = this;\n\n\t\tautocomplete.addListener('place_changed', function(){\n\t    var place = this.getPlace();\n\t  \tif(!place) return;\n\t\t\t// console.log(\"[autocomplete:select]\", place)\n\n\t    if (place.geometry) {\n\t      self.map.panTo(place.geometry.location);\n\t      self.map.setZoom(15);\n\t      self.addMarker(place.geometry.location)\n\n\t    \tself.addTradeLocation(input[\"value\"]);\n\n\t    } else {\n\t    }\n\t\t});\n\n\t}\n\n\tclearAutocomplete(){\n\t  $('#autocomplete').val(\"\")\n\t}\n\n\tinitClickEvent(){\n\t\tif(!this.canEdit) return;\n    this.map.addListener(\"click\", (event)=>{\n\t    \n\t    let loading = this.loadCtrl.create();\n\t    loading.present();\n\n\t    var latitude = event.latLng.lat();\n\t    var longitude = event.latLng.lng();\n\n\t    this.geocoder.geocode({'location': event.latLng}, (res)=>{\n\t    \t// console.log(\"click \", res)\n\t    \tif(!res) return;\n\t    \tthis.addMarker(event.latLng)\n\t    \tthis.addTradeLocation(res[0].formatted_address);\n\n\t    \tloading.dismiss();\n\t    })\n\t\t}); \n\t}\n\n\tdbTimeout;\n\taddTradeLocation(location){\n\t\tif(!this.canEdit) return;\n\t\tclearTimeout(this.dbTimeout);\n\n\n\t\t\tthis.target.trade_locations.push(location);\n\n\t\t\tif(this.target.trade_locations.length > 3){\n\t\t\t\tthis.removeLastTradeLocation();\n\t\t\t}\n\n\t  \t// console.log(\"[map] addTradeLocation \", this.target)\n\n\t\tthis.dbTimeout = setTimeout(()=>{\n\t\t\tthis.fbApp.updateUserTradeLocations(this.target.key, this.target.trade_locations)\n\t\t},500);\n\n\t}\n\n\tremoveLastTradeLocation(){\n  \tlet tradeLocation = this.target.trade_locations.shift();\n  \tlet marker = this.markers[0];\n\t\t// console.log(\"removing \", this.markers, this.target.trade_locations)\n\t\tmarker.setMap(null)\n  \tthis.markers.shift();\n\t}\n\n\n\taddMarker(position, options = null) {\n\t\toptions = options ? options : {remember: true};\n\n\t  let marker = new google.maps.Marker({\n\t    map: this.map,\n\t    position: position,\n\t    label: options.label,\n\t    icon: options.icon\n\t  });\n\n\t  if(options.remember)\n\t  \tthis.markers.push(marker);\n\t}\n\n\tsetMapOnAll(map) {\n\t  for (var i = 0; i < this.markers.length; i++) {\n\t    this.markers[i].setMap(map);\n\t  }\n\t}\n\n\tclearMarkers() {\n\t  this.setMapOnAll(null);\n\t}\n\n\tdeleteMarkers() {\n\t  this.clearMarkers();\n\t  this.markers = [];\n\t}\n\n\tfindLocation(location){\n\t\tif(!this.map) return;\n\n\t\tthis.geocoder.geocode({'address': location}, (res,status)=>{\n\t    if (status === 'OK') {\n\t\t    this.map.panTo(res[0].geometry.location);\n\t\t    this.map.setZoom(15);\n\t    }else{\n\t    \tconsole.log(\"Geocode was not successful for the following reason: \"  + status)\n\t    }\n\t\t})\n\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts","import { LoadingController } from 'ionic-angular';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { Profile } from '../../models/profile';\n\n@Injectable()\nexport class MessagesProvider {\n\n\tunreadMsgCnt = 0;\n\ttraders = [];\n\ttraderTemp = [];\n\n  constructor(\n  \tpublic http: HttpClient\n  \t, private loadCtrl: LoadingController \n  \t, private profile: ProfileProvider \n  ) {\n  }\n\n\n  loadConversations(fbApp){\n    var load = this.loadCtrl.create();\n    load.present();\n\n    fbApp.getUserConversations(this.profile.user).subscribe((res)=>{\n    \tthis.unreadMsgCnt = 0;\n      load.dismiss();\n      if(!res) return;\n\n      let traderPromises = [];\n      for(var convo in res){\n        var conversation = res[convo];\n\n        traderPromises.push(this.addTraderToList(fbApp, conversation)) \n      }\n      \n      Promise.all(traderPromises).then((traders)=>{\n      \tlet unreadTraders = traders.filter(trader=>{return trader.hasUnreadMessage})\n      \tlet readTraders = traders.filter(trader=>{return !trader.hasUnreadMessage})\n\n      \tthis.traders = unreadTraders.concat(readTraders);\n      \t// console.log(\"[loadConversation]: \", this.traders)\n      })\n\n    })\n\n  }\n\n  addTraderToList(fbApp, conversation){\n    return new Promise((resolve,reject)=>{\n      fbApp.getProfile(conversation.traderKey).then((res:Profile)=>{\n        res[\"hasUnreadMessage\"] = conversation.unread;\n\n        if(conversation.unread)\n        \tthis.unreadMsgCnt++;\n\n        resolve(res)\n      })\n\n    })\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/messages/messages.ts","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { C } from '../../config';\nimport { map, take, first } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class IgdbProvider {\n\n// const PS4_ID = 48;\n// const NINTENDO_SWITCH_ID = 130;\n// const XBOX_ONE = 49;\n\n\tsearchOptions = [];\n\n  constructor(public http: HttpClient){\n\n  }\n\n  search(input){\n  \tconst headers = new HttpHeaders()\n            .set(\"user-key\", \"5227ae6e46cee2806cf25779d4c97966\")\n            .set(\"Accept\", \"application/json\")\n\n    var excludedPlatforms = \"0\";\n    var included = [\n      3 // Linux\n      ,6 // windows pc\n      ,9 // ps3\n      ,12 // xbox 360\n      ,14 // Mac\n      ,41 // wii\n      ,48 // xbox1\n      ,49 // ps4\n      ,92 // steamOs\n      ,130 // switch\n    ]\n\n    for(var i = 1; i < 164; i++){\n      if(included.indexOf(i) > -1) continue;\n      excludedPlatforms += \",\"+i;\n    }\n\n\n    var search = \n    \"https://api-endpoint.igdb.com/games/\"\n    + \"?search=\"+input\n    + \"&filter[release_dates.platform][not_in]=\"+excludedPlatforms\n    + \"&filter[category][eq]=\"+\"0\"\n    + \"&filter[release_dates.platform][exists]\"\n    // + \"&filter[version_parent][not_existss]\"\n    + \"&fields=*\";\n    // var search = 'https://api-endpoint.igdb.com/games/?search=' + input +\n  \t\t// \"&filter[release_dates.platform][any]=48,49,130\" +\n  \t\t// \"&filter[version_parent][not_exists]=1\" +\n  \t\t// \"&fields=*\";\n  return new Promise((resolve,reject)=>{\n\n    var httpSub = this.http.get( search, {headers}).subscribe((res:Array<object>)=>{\n      var gameIds = \"\";\n      // console.log(\"[igdb] search raw: \", res)\n\n      var first = true;\n\n      for( var r of res){\n\n          if(first)\n            gameIds += r[\"id\"];\n          else\n            gameIds += \",\"+r[\"id\"];\n\n          first = false;\n      }\n\n      var filteredSearch = this.removeUnsupportedPlatforms(res);\n      // console.log(\"[igdb] search clean: \", filteredSearch)\n\n      resolve(filteredSearch);\n      httpSub.unsubscribe();\n    });\n\n  })\n\n  }\n\n  removeUnsupportedPlatforms(games : Array<any>){\n    return games.filter((game)=>{\n      if(game.platforms)\n\n       return game.platforms.indexOf(C.PS4_ID) != -1\n        || game.platforms.indexOf(C.XBOX1_ID) != -1 \n        || game.platforms.indexOf(C.NS_ID) != -1;\n\n       \n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/igdb/igdb.ts","import { Component } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { NavController } from 'ionic-angular';\nimport { SignupPage } from '../signup/signup';\nimport { ResetpasswordPage } from '../resetpassword/resetpassword';\nimport { TabsPage } from '../tabs/tabs';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\tloginForm: FormGroup;\n\tloginError: string;\n\n\tconstructor(\n\t\tprivate navCtrl: NavController,\n\t\tprivate auth: AppAuthProvider,\n\t\tfb: FormBuilder\n\t) {\n\t\tthis.loginForm = fb.group({\n\t\t\temail: ['', Validators.compose([Validators.required, Validators.email])],\n\t\t\tpassword: ['', Validators.compose([Validators.required, Validators.minLength(3)])]\n\t\t});\n\t}\n\n  login() {\n\t\tlet data = this.loginForm.value;\n\n\t\tif (!data.email) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet credentials = {\n\t\t\temail: data.email,\n\t\t\tpassword: data.password\n\t\t};\n\t\tthis.auth.signInWithEmail(credentials)\n\t\t\t.then(\n\t\t\t\t() => this.navCtrl.setRoot(TabsPage),\n\t\t\t\terror => this.loginError = error.message\n\t\t\t);\n    }\n\n  private signup(){\n    this.navCtrl.push(SignupPage);\n  }\n\n  loginWithGoogle() {\n\t  let gl = this.auth.googleLogin()\n\t    // .then(\n\t    //   (res) =>{\n\t    //   \tconsole.log(10101,res)\n\t    //   \tthis.navCtrl.setRoot(TabsPage)\n\t    //   },\n\t    //   error => console.log(error.message)\n\t    // )\n  }\n  onSignIn(){\n\n  }\n\n  navToPassword(){\n  \tthis.navCtrl.push(ResetpasswordPage);\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 205;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 205\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 248;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 248\n// module chunks = 0","import { UserConversation } from './userConversation';\r\n\r\n\r\nexport class Profile{\r\n\r\n\tpublic profileImage = \"\";\r\n\tpublic first_name = \"\";\r\n\tpublic last_name = \"\";\r\n\tpublic email = \"\";\r\n\tpublic key = \"\";\r\n  public wishList = [];\r\n  public ownedList= [];\r\n  public consoles = [];\r\n  public trade_locations: Array<any> = [];\r\n  public last_location = {};\r\n  public conversations : Array<UserConversation>;\r\n  public gender = \"m\";\r\n\r\n\tconstructor(){\r\n  }\r\n\r\n  addToWishList(game){\r\n    if(this.wishList.length > 8) return;\r\n    this.wishList.push(game)\r\n  }\r\n  addToOwnedList(game){\r\n    if(this.ownedList.length > 8) return;\r\n    this.ownedList.push(game)\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/profile.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { NavController, Platform, App, Events, LoadingController } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { TradeProvider } from '../../providers/trade/trade';\nimport { ChatPage } from '../../pages/chat/chat';\nimport { AllTradersPage } from '../../pages/all-traders/all-traders';\nimport * as $ from 'jquery'\nimport { Profile } from '../../models/profile';\nimport { C } from '../../config';\nimport 'rxjs/add/observable/fromEvent';\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\nimport { Storage  } from '@ionic/storage';\n\n@Component({\n  selector: 'page-trade',\n  templateUrl: 'trade.html'\n})\nexport class TradePage {\n\n  refresh = true;\n  showDisclaimer = true;\n  showMatchingOnly = true;\n  offset = 0;\n  limit = 15;\n  traders = [];\n  hasMore = false;\n\n  constructor(\n  \tpublic navCtrl: NavController\n\t\t, public platform: Platform\n\t\t, private trade: TradeProvider\n\t\t, private profile: ProfileProvider\n    , private app: App\n    , private events: Events\n    , private storage: Storage \n\t\t, private loadCtrl: LoadingController \n  \t) {\n\n    this.events.subscribe(\"profile:changed\", (res)=>{\n      this.refresh = true;\n    })\n\n    this.storage.get('showDisclaimer').then((res)=>{\n      this.showDisclaimer = !res;\n    });\n\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  ionViewWillEnter() {\n    if(this.refresh){\n      this.refresh = false;\n      this.getTrades(this.profile.user.key, 15, 0);\n    }\n  }\n  showChat(trader){\n  \tthis.app.getRootNavs()[0].push(ChatPage, {\n  \t\ttrader : trader\n  \t});\n  }\n\n  expandToggle(trader){\n    if(trader.expanded)\n      trader.expanded = false;\n    else trader.expanded = true;\n  }\n\n  confirmDisclaimer(){\n    this.showDisclaimer = false;\n    this.storage.set(\"showDisclaimer\", true);\n  }\n\n  toggleTraders(){\n    this.showMatchingOnly = !this.showMatchingOnly;\n    this.offset = 0;\n    this.hasMore = false;\n    this.getTrades(this.profile.user.key, this.limit, this.offset);\n  }\n\n  showMore(){\n    this.offset++;\n    this.getTrades(this.profile.user.key, this.limit, this.offset, true);\n  }\n\n\n\n  getTrades(userKey, limit = 15, offset = 0, concat = false){\n    // console.log(\"[getTrades] --concat\"+concat)\n\n    if(this.showMatchingOnly){\n     this.trade.getNearestPossibleTrades(userKey, limit, offset).then((res : Array<any>)=>{\n       // console.log(\"res \", res.length)\n       this.hasMore = res.length == 15 ? true : false;\n     \n       if(concat){\n         this.traders = this.traders.concat(res)\n       }\n       else  \n         this.traders = res;\n     \n\n     });\n    }else{\n     this.trade.getNearestTrades(userKey, limit, offset).then((res : Array<any>)=>{\n       // console.log(\"res \", res.length)\n       this.hasMore = res.length == 15 ? true : false;\n\n       if(concat){\n         this.traders = this.traders.concat(res)\n       }\n       else  \n         this.traders = res;\n     });\n    }\n\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trade/trade.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, PopoverController, ViewController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-courier-popover',\n  templateUrl: 'courier-popover.html',\n})\nexport class CourierPopoverPage {\n\n\tcouriers = [\n\t\t{\n\t\t\tid:0,\n\t\t\tlogo: \"assets/imgs/courier_express_logo.png\",\n\t\t\tname: \"Courier Express\",\n\t\t\tprice: 200\n\t\t},\n\t\t{\n\t\t\tid:1,\n\t\t\tlogo: \"assets/imgs/lalamove_logo.png\",\n\t\t\tname: \"Lalamove\",\n\t\t\tprice: 300\n\t\t}\n\t]\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n    , public popoverCtrl: PopoverController\n    , public viewCtrl: ViewController\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  selectCourier(opt){\n\t\tthis.viewCtrl.dismiss(this.couriers[opt])\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/courier-popover/courier-popover.ts","import { Component } from '@angular/core';\nimport { NavController, App, Events, LoadingController } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { MessagesProvider } from '../../providers/messages/messages';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { map, take, first } from 'rxjs/operators';\nimport { ChatPage } from '../../pages/chat/chat';\nimport { Profile } from '../../models/profile';\n\n@Component({\n  selector: 'page-messages',\n  templateUrl: 'messages.html'\n})\nexport class MessagesPage {\n\n  pendingLoad;\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public profile: ProfileProvider\n  \t, public fbApp: FirebaseappProvider\n    , private app: App\n    , private events: Events\n    , private loadCtrl: LoadingController \n    , private messages: MessagesProvider \n  ) {\n\n   \n  }\n\n\n  ionViewWillEnter(){\n\n  }\n\n  showChat(trader){\n    // console.log(\"showChat\", trader)\n    var matchingTrades = [];\n\n    if(trader.ownedList)\n    for(var traderOwned of trader.ownedList){\n      for(var userWish of this.profile.user.wishList){\n          if(userWish.id === traderOwned.id){\n             matchingTrades.push(traderOwned);\n          }\n      }\n    }\n\n    var matchingWishes = [];\n    \n    if(trader.wishList)\n    for(var traderWish of trader.wishList){\n      for(var userOwned of this.profile.user.ownedList){\n          if(userOwned.id === traderWish.id){\n             matchingWishes.push(userOwned);\n          }\n      }\n    }\n    \n    trader.matchingTrades = matchingTrades;\n    trader.matchingWishes = matchingWishes;\n\n    this.app.getRootNavs()[0].push(ChatPage, {\n      trader : trader\n    });\n\n  }\n\n  getRandomPic(){\n    return 'assets/imgs/temp_profile_img_'+this.getRandomInt(1,2)+'.png';\n  }\n\n  getRandomInt(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messages/messages.ts","import { Component } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { NavController, App, Platform, Events, LoadingController} from 'ionic-angular';\r\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\r\nimport { ProfileProvider } from '../../providers/profile/profile';\r\nimport { IgdbProvider } from '../../providers/igdb/igdb';\r\nimport { Game } from '../../models/game';\r\nimport { C } from '../../config';\r\nimport * as _ from 'underscore/underscore';\r\nimport { IonicImageLoader, ImageLoaderConfig } from 'ionic-image-loader';\r\nimport { MapPage } from '../../pages/map/map';\r\n\r\nimport { FileTransfer, FileUploadOptions, FileTransferObject  } from '@ionic-native/file-transfer';\r\nimport { File, FileEntry  } from '@ionic-native/file';\r\nimport { FileChooser } from '@ionic-native/file-chooser';\r\nimport { ImagePicker } from '@ionic-native/image-picker';\r\nimport * as $ from 'jquery'\r\nimport { StorageProvider } from '../../providers/storage/storage';\r\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\r\nimport { ImageResizer, ImageResizerOptions } from '@ionic-native/image-resizer';\r\n\r\n@Component({\r\n  selector: 'page-profile',\r\n  templateUrl: 'profile.html'\r\n})\r\nexport class ProfilePage {\r\n\tsearchInput\r\n  searchIsLoading = false;\r\n  searchOptions : any = [];\r\n\r\n  constructor(\r\n  \tpublic navCtrl: NavController\r\n    , public igdb: IgdbProvider\r\n    , private auth: AppAuthProvider\r\n    , private profile: ProfileProvider\r\n    , private imgLoader: ImageLoaderConfig\r\n    , private app: App\r\n    , private events: Events\r\n    , private transfer: FileTransfer\r\n    , private file: File\r\n    , private fileChooser: FileChooser\r\n    , private imagePicker: ImagePicker\r\n    , public platform: Platform\r\n    , public fbApp: FirebaseappProvider\r\n    , public fbStorage: StorageProvider\r\n    , public loadingCtrl: LoadingController\r\n    , private imageResizer: ImageResizer\r\n\t) {\r\n    imgLoader.setBackgroundSize('cover');\r\n\r\n  }\r\n\r\n  toggleItemList(item, owned){\r\n    this.profile.toggleItemList(this.auth.user, item, owned);\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  toggleItemPlatform(item, platform, owned){\r\n    this.profile.toggleItemPlatform(this.auth.user, item, platform, owned);\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  removeItem(item, owned){\r\n    // console.log(\"pressing\")\r\n    this.profile.removeItem(this.auth.user, item, owned);\r\n\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  timeout\r\n  searchtTitle(){\r\n    this.searchIsLoading = true;\r\n  \tclearTimeout(this.timeout);\r\n  \t\r\n  \tthis.timeout = setTimeout(()=>{\r\n\r\n  \t\tif(!this.searchInput || this.searchInput.length < 2){\r\n        this.clearSearch();\r\n      }\r\n      else{ \r\n        this.igdb.search(this.searchInput).then((res: Array<any>)=>{\r\n          this.searchOptions = res;\r\n\r\n          if(res.length == 0){\r\n            this.searchOptions.push({id: \"err\", name: \"No Games Found\"})\r\n          }\r\n\r\n          this.searchIsLoading = false;\r\n        });\r\n      }\r\n\r\n  \t}, 300)\r\n  }\r\n\r\n  clearSearch(){\r\n    this.searchIsLoading = false;\r\n  \tthis.searchOptions = [];\r\n  }\r\n\r\n  addGameToProfile(item){\r\n    this.searchInput = null;\r\n    this.searchOptions = [];\r\n\r\n  \tvar platforms = [\"\"];\r\n  \t\r\n  \tif(item.platforms){\r\n\t  \tif(item.platforms.includes(C.PS4_ID))\r\n\t  \t\tplatforms.push(C.PS4)\r\n\r\n\t  \tif(item.platforms.includes(C.NS_ID))\r\n\t  \t\tplatforms.push(C.NS)\r\n\r\n\t  \tif(item.platforms.includes(C.XBOX1_ID))\r\n\t  \t\tplatforms.push(C.XBOX1)\r\n  \t}\r\n    var url = null;\r\n    if(item.cover)\r\n  \t  url = item.cover.url.replace(\"thumb\",\"cover_big\").replace(\"//\",\"http://\")\r\n\r\n    var game = new Game(item.id, item.name, url, platforms);\r\n  \tthis.profile.addGameToProfile(this.auth.user, game, false)\r\n\r\n    this.events.publish(\"profile:changed\")\r\n  }\r\n\r\n  navToMap(){\r\n      this.app.getRootNavs()[0].push(MapPage);\r\n  }\r\n\r\n  uploadImage(){\r\n\r\n    if(this.platform.is('core')){\r\n      this.uploadImage_web()\r\n    }else if(this.platform.is('android')){\r\n      this.uploadImage_and()\r\n    }\r\n\r\n  }\r\n\r\n  uploadImage_and(){\r\n    return new Promise((resolve,reject)=>{\r\n\r\n      this.imagePicker.getPictures({\r\n        maximumImagesCount:1,\r\n        outputType:0\r\n      }).then(res =>{\r\n        if(!res){\r\n          return\r\n        }\r\n        let file = res[0];\r\n        return this.file.resolveLocalFilesystemUrl(file)\r\n      }).then((file : FileEntry)=>{\r\n          return this.imageResizer\r\n          .resize({\r\n             uri: file.nativeURL,\r\n             quality: 100,\r\n             width: 90,\r\n             height: 180,\r\n          })\r\n      }).then((filePath)=>{\r\n          return this.file.resolveLocalFilesystemUrl(filePath)\r\n      }).then( (file : FileEntry)=>{\r\n         return this.file.readAsDataURL(file.filesystem.root.nativeURL, file.name)\r\n      }).then(res=>{\r\n        this.storeImage(res)\r\n      })      \r\n      .catch(e => console.log(e));\r\n\r\n\r\n\r\n\r\n    });\r\n  }\r\n\r\n  uploadImage_web(){\r\n\r\n    $('#fileInput').trigger(\"click\")\r\n    $('#fileInput').change(()=> {\r\n\r\n\r\n      let file = $('#fileInput')[0]['files'][0];\r\n      \r\n      if(!file) return;\r\n      this.getBase64(file).then(res=>{\r\n        //TODO resize image\r\n        this.storeImage(res)\r\n        $('#fileInput').val('')\r\n      })\r\n    });\r\n\r\n  }\r\n\r\n  private storeImage(base64){\r\n    // console.log(\"[storeImage]\",base64)\r\n\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Uploading image...'\r\n    });\r\n\r\n    loading.present();\r\n\r\n    this.fbStorage.uploadImage(base64, this.profile.user.email)\r\n    .then( (res:string)=>{\r\n       // console.log(\"upload image\",res)\r\n       this.fbApp.updateUserProfileImage(this.profile.user.key, res);\r\n       this.profile.user.profileImage = res;\r\n\r\n       loading.dismiss();\r\n    }).catch((err)=>{\r\n       console.log(\"storeImage\",err)\r\n     loading.dismiss();\r\n    })\r\n  }\r\n\r\n  private getBase64(file) : Promise<any> {\r\n    return new Promise((resolve,reject)=>{\r\n     var reader = new FileReader();\r\n     reader.readAsDataURL(file);\r\n     reader.onload = function () {\r\n       resolve(reader.result)\r\n     };\r\n     reader.onerror = function (error) {\r\n       reject(error);\r\n     };\r\n    })\r\n  \r\n  }\r\n\r\n  private getExt(filename){\r\n    var idx = filename.lastIndexOf('.');\r\n    return (idx < 1) ? \"\" : filename.substr(idx + 1);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","export class Game{\r\n\r\n\tpublic id : string;\r\n\tpublic name : string;\r\n  public cover_url : string;\r\n  public platforms : Array<string>;\r\n\r\n\tconstructor(\r\n\t\tid = null\r\n\t\t, name = null\r\n\t\t,cover_url = null\r\n\t\t,platforms = null\r\n\t){\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.cover_url = cover_url;\r\n\t\tthis.platforms = platforms;\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/game.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport * as firebase from 'firebase';\nimport 'rxjs/add/operator/map';\nimport { Observable } from \"rxjs/Observable\";\n\n@Injectable()\nexport class StorageProvider {\n\n  constructor(public http: HttpClient) {\n  }\n\n  uploadImage(image, userEmail){\n  \treturn new Promise((resolve, reject) =>{\n  \tlet storageRef = firebase.storage().ref().child(`images/${userEmail}/profile`);\n \t\tlet parseUpload = storageRef.putString(image, 'data_url');\n\n    parseUpload.on('state_changed', (_snapshot) =>{\n       // console.log('snapshot progess ',_snapshot);\n\n    },\n    (_err) =>{\n       console.log('snapshot err ',_err);\n       reject(_err);\n    },\n    () =>{\n    \tstorageRef.getDownloadURL().then((res)=>{\n       // console.log('getDownloadURL ',res);\n       resolve(res);\n     })\n    });\n\n  \t});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/storage/storage.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { LoginPage } from '../../pages/login/login';\nimport { EmailComposer } from '@ionic-native/email-composer';\n\n@Component({\n  selector: 'page-options',\n  templateUrl: 'options.html',\n})\nexport class OptionsPage {\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public auth: AppAuthProvider\n    , public emailComposer: EmailComposer\n  \t) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  feedback(){\n    let email = {\n      to: 'lemontree.development@gmail.com',\n      subject: 'Console Nation Feedback',\n    };\n\n    this.emailComposer.open(email);\n  }\n\n  logout(){\n  \tthis.auth.logout();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/options/options.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { IgdbProvider } from '../../providers/igdb/igdb';\nimport { Game } from '../../models/game';\nimport { C } from '../../config';\n\n@Component({\n  selector: 'page-deal',\n  templateUrl: 'deal.html',\n})\nexport class DealPage {\n\tsearchInput\n  searchIsLoading = false;\n  searchOptions : any = [];\n  cart = [];\n  submitText = \"Evaluate\";\n  \n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n    , public igdb: IgdbProvider\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  timeout\n  searchtTitle(){\n    this.searchIsLoading = true;\n  \tclearTimeout(this.timeout);\n  \t\n  \tthis.timeout = setTimeout(()=>{\n\n  \t\tif(!this.searchInput || this.searchInput.length < 2){\n        this.clearSearch();\n      }\n      else{ \n        this.igdb.search(this.searchInput).then((res: Array<any>)=>{\n          this.searchOptions = res;\n\n          if(res.length == 0){\n            this.searchOptions.push({id: \"err\", name: \"No Games Found\"})\n          }\n\n          this.searchIsLoading = false;\n        });\n      }\n\n  \t}, 300)\n  }\n\n  clearSearch(){\n    this.searchIsLoading = false;\n  \tthis.searchOptions = [];\n  }\n\n  addGameToCart(item){\n    if(item.id === \"err\") return;\n\n  \tvar platforms = [\"\"];\n  \t\n  \tif(item.platforms){\n\t  \tif(item.platforms.includes(C.PS4_ID))\n\t  \t\tplatforms.push(C.PS4)\n\n\t  \tif(item.platforms.includes(C.NS_ID))\n\t  \t\tplatforms.push(C.NS)\n\n\t  \tif(item.platforms.includes(C.XBOX1_ID))\n\t  \t\tplatforms.push(C.XBOX1)\n  \t}\n    var url = null;\n    if(item.cover)\n  \t  url = item.cover.url.replace(\"thumb\",\"cover_big\").replace(\"//\",\"http://\")\n\n    var game = new Game(item.id, item.name, url, platforms);\n  \tthis.searchInput = null;\n\n  \tthis.cart.push(game)\n  \t// console.log(this.cart)\n  \tthis.clearSearch();\n  }\n\n\n  removeItem(item){\n    this.cart = this.cart.filter(e => e.id !== item.id);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/deal/deal.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n/**\n * Generated class for the ShopPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@Component({\n  selector: 'page-shop',\n  templateUrl: 'shop.html',\n})\nexport class ShopPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ShopPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop/shop.ts","import { Component } from '@angular/core';\nimport { Platform, IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { TabsPage } from '../tabs/tabs';\nimport { Keyboard } from '@ionic-native/keyboard';\n\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n\tcanSubmit = false;\n\n\tvalidation_messages = {\n\t\t'first_name': [\n\t\t\t\t{ type: 'required', message: 'first name is required.' },\n\t\t\t\t{ type: 'minlength', message: 'first name must be at least 2 characters long.' },\n\t\t\t\t{ type: 'maxlength', message: 'first name cannot be more than 20 characters long.' },\n\t\t\t\t{ type: 'validUsername', message: 'Your username has already been taken.' }\n\t\t\t],\n\t\t'last_name': [\n\t\t\t\t{ type: 'required', message: 'last name is required.' },\n\t\t\t\t{ type: 'minlength', message: 'last name must be at least 2 characters long.' },\n\t\t\t\t{ type: 'maxlength', message: 'last name cannot be more than 20 characters long.' },\n\t\t\t\t{ type: 'validUsername', message: 'Your username has already been taken.' }\n\t\t\t],\n\t\t\t'email': [\n\t\t\t\t{ type: 'required', message: 'email is required.' },\n\t\t\t\t{ type: 'email', message: 'must be a valid email.' }\n\t\t\t],\n\t\t\t'password': [\n\t\t\t\t{ type: 'required', message: 'password is required.' },\n\t\t\t\t{ type: 'pattern', message: 'password must contain 1 upper case and 1 number.' },\n\t\t\t\t{ type: 'minlength', message: 'password must be at least 8 characters.' }\n\t\t\t],\n\n\t}\n\n\tsignupForm: FormGroup;\n\tloginError: string;\n\n\tpasswordType = \"password\";\n\tshowPasswordIcon = \"ios-eye-off\";\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n  \t, public auth: AppAuthProvider\n  \t, private keyboard: Keyboard\n  \t, private platform: Platform\n  \t, fb: FormBuilder) {\n\n\t\tthis.platform.ready().then(() => {\n\t\t\tthis.keyboard.disableScroll(false);\n\t\t});\n  \tvar passwordRegex = '^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).+$';\n\n\t\tthis.signupForm = fb.group({\n\t\t\tfirst_name: ['', Validators.compose([Validators.required, Validators.minLength(2), Validators.maxLength(20)])],\n\t\t\tlast_name: ['', Validators.compose([Validators.required, Validators.minLength(2), Validators.maxLength(20)])],\n\t\t\temail: ['', Validators.compose([Validators.required, Validators.email])],\n\t\t\tpassword: ['', Validators.compose([Validators.required, Validators.pattern(passwordRegex), Validators.minLength(8), Validators.maxLength(20)])],\n\t\t\tgender: ['', Validators.compose([Validators.required])],\n\t\t});\n\n  }\n  ionViewDidLoad() {\n  }\n\n  ionViewDidEnter() {\n\t}\n\n\tionViewWillLeave() {\n\t}\n\n  checkForm(){\n  \tthis.canSubmit = this.signupForm.errors == null;\n  }\n  showPassword(){\n  \tif(this.passwordType == \"password\"){\n  \t\tthis.passwordType = \"text\";\n  \t\tthis.showPasswordIcon = \"ios-eye\";\n  \t}\n  \telse{\n  \t\tthis.passwordType = \"password\";\n  \t\tthis.showPasswordIcon = \"ios-eye-off\";\n  \t}\n  }\n\n  private signup(){\n\n  \tlet form = {\n\t\t\tfirstName: this.signupForm.value.first_name,\n\t\t\tlastName: this.signupForm.value.last_name,\n\t\t\temail: this.signupForm.value.email,\n\t\t\tpassword: this.signupForm.value.password,\n\t\t\tgender: this.signupForm.value.gender\n\t\t};\n\n\t\tthis.auth.signUp(form).then( () => this.navCtrl.setRoot(TabsPage),\n\t\t\terror => console.log(\"signup error\", error)\n\t\t);\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { LoginPage } from '../login/login';\n\n@Component({\n  selector: 'page-resetpassword',\n  templateUrl: 'resetpassword.html',\n})\nexport class ResetpasswordPage {\n\n\temail = \"\";\n\n  constructor(\n  \tpublic navCtrl: NavController\n  \t, public navParams: NavParams\n\t\t, private auth: AppAuthProvider\n\t\t, private toastCtrl: ToastController\n  ) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n resetPassword(){\n \tthis.auth.resetPassword(this.email)\n \t.then(()=>{\n \t\tthis.showToast(\"Email sent!\", true)\n \t})\n \t.catch(err=>this.showToast(err))\n }\n\n showToast(msg, redirect = false){\n\n  let toast = this.toastCtrl.create({\n    message: msg,\n    duration: 1500,\n    position: 'top'\n  });\n\n  toast.onDidDismiss(() => {\n  \tif(redirect)\n  \t\tthis.navCtrl.push(LoginPage)\n  });\n\n  toast.present();\n }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/resetpassword/resetpassword.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport AuthProvider = firebase.auth.AuthProvider;\nimport { Profile } from '../../models/profile';\nimport { C } from '../../config';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { Game } from '../../models/game';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { GooglePlus } from '@ionic-native/google-plus';\nimport { ToastController } from 'ionic-angular';\n\n@Injectable()\nexport class AppAuthProvider {\n\n\n\tpublic user: firebase.User;\n\tconstructor(\n\t\tpublic afAuth: AngularFireAuth\n    ,public  geolocation: Geolocation\n\t\t, public afdb: AngularFireDatabase\n\t\t, private googlePlus: GooglePlus\n\t\t, private toastCtrl: ToastController\n\t\t) {\n\t}\n\n\tsignInWithEmail(credentials) {\n\t\treturn this.afAuth.auth.signInWithEmailAndPassword(credentials.email,\n\t\t\t credentials.password);\n\t}\n\n\tsignUp(form) {\n\t return new Promise( (resolve,reject)=>{\n\t \tthis.afAuth.auth.createUserWithEmailAndPassword(form.email,form.password).then((res : firebase.auth.UserCredential)=>{\n\n \t\t\tres.user.sendEmailVerification();\n\n\t\t \tvar profile = new Profile();\n\t\t \tprofile.first_name = form.firstName,\n\t\t\tprofile.last_name = form.lastName,\n\t\t\tprofile.email = form.email.toLowerCase()\n\t\t\tprofile.gender = form.gender;\n\t\t\tprofile.profileImage = this.getRandomProfileImage(form.gender);\n\n\t\t\tthis.getUserCurrentPosition()\n\t\t\t.then(coord=>profile.last_location = coord)\n\t\t\t.then(()=>{\n\n\t      // console.log(\"[Signup]\" , profile)\n\t\t  \t\n\t  \t\tthis.afdb.list('/users').push(profile).then(snap=>{\n\t\t\t\t\tthis.afdb.list('/users').update(snap.key,{\n\t\t\t\t\t\tkey : snap.key\n\t\t\t\t\t})\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\n\t\t\t})\n\n\t\t }).catch( (err : firebase.auth.Error)=>{\n\t\t \t\tthis.toastCtrl.create({\n\t\t \t\t\tmessage: err.message,\n\t\t \t\t\tduration: 1500,\n\t\t \t\t\tposition: 'middle'\n\t\t \t\t})\n\t\t \t\t.present()\n\t\t });\n\n\t })\n\t}\n\n\tprivate getUserCurrentPosition(){\n\t\treturn new Promise((resolve,reject)=>{\n\t    this.geolocation.getCurrentPosition().then((geodata) => {\n\t  \t\tresolve({\n\t          lat:geodata.coords.latitude, \n\t          long: geodata.coords.longitude\n\t        })\n\n\t    }).catch((error) => {\n\t    \tresolve({});\n\t      console.log('Error getting location', error);\n\t    })\n\t\t})\n\t}\n\n\tget authenticated(): boolean {\n\t\treturn this.user !== null;\n\t}\n\n\tgetEmail() {\n\t\treturn this.user && this.user.email;\n\t}\n\n\tlogout(): Promise<void> {\n\t\tthis.user = null;\n\t\treturn this.afAuth.auth.signOut();\n\t}\n\n\tresetPassword(email){\n\t\treturn this.afAuth.auth.sendPasswordResetEmail(email)\n\t}\n\n\tgoogleLogin() {\n\t\t// console.log(\"googlelogin\")\n\t\t\tlet opt = {\n        'webClientId': '670922071182-meeqgiin43vk18i54v5kag524cane4d3.apps.googleusercontent.com'\n      \t,'offline': true\n      };\n      \n  \t\t// return new Promise((resolve, reject) => { \n      this.googlePlus.login(opt).then( res => {\n              const googleCredential = firebase.auth.GoogleAuthProvider\n                  .credential(res.idToken);\n              // console.log('googleCredential', googleCredential)\n              // console.log('loginRes', res)\n\n              firebase.auth().signInWithCredential(googleCredential)\n              .then( response => {\n                console.log(\"Firebase success: \" + JSON.stringify(response));\n                // resolve(response)\n            \t}, err => {\n\t\t\t\t          console.error(\"Error: \", err)\n\t\t\t\t          // reject(err);\n\t\t\t\t      });\n\n      }).catch(err => {\n          console.error(\"Error: \", err)\n          // reject(err);\n      });\n    // });\n   }\n\n\tlogInWithGoogle() {\n\t\treturn this.afAuth.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());\n\t}\n\n\tlogInWithGoogleRedirect(){\n\t\t\n\n\t\treturn this.afAuth.auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())\n\t\t\t.then((res) => {\n\t\t\t\t\t// console.log(\"redir\", res);\n\t\t\t\treturn this.afAuth.auth.getRedirectResult().then( result => {\n\t\t\t\t\t// console.log(\"redir2\",result);\n\t\t\t\t\t// This gives you a Google Access Token.\n\t\t\t\t\t// You can use it to access the Google API.\n\t\t\t\t\tlet token = result.credential[\"accessToken\"];\n\t\t\t\t\t// The signed-in user info.\n\t\t\t\t\tthis.user = result.user;\n\t\t\t\t\t// console.log(220202,token, this.user);\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t// Handle Errors here.\n\t\t\t\t\talert(error.message);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tgetRandomProfileImage(gender){\n\n\t\tlet opt = this.getRandomInt(1,9);\n\n\t\tif(gender == \"f\")\n\t\t\topt = this.getRandomInt(10,18);\n\n\t\treturn [\n\t\t\t\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_1.png?alt=media&token=926bfd10-fd52-4b5b-b861-6b4cccf0c528\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_3.png?alt=media&token=a671e695-2842-444c-b534-3d6a30ba2575\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_4.png?alt=media&token=a794717a-2ad6-4748-8594-bb9a3a900db6\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_5.png?alt=media&token=494ba40d-8e26-4d78-8e60-db59b4ac74cf\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_6.png?alt=media&token=c44da33e-f090-4455-a586-e2eca21e1ce2\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_7.png?alt=media&token=28c6321e-43e2-454c-a5dd-01e8fab83420\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_10.png?alt=media&token=120deefc-643a-45d9-8775-611f2dbd9568\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_11.png?alt=media&token=5040e85f-6753-4a0c-8757-450a06437d32\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_16.png?alt=media&token=f5e6b7fc-de33-45fc-9e23-ef6176f6aa9a\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_17.png?alt=media&token=3068d24a-f7d4-4e3a-aa53-8214bd7c4dd7\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_2.png?alt=media&token=a6378dfe-5f46-4021-bcc0-d24900e32c13\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_8.png?alt=media&token=71bbaf6c-9d76-4b04-aba5-1591f3932192\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_9.png?alt=media&token=aea36a3f-d9e8-4f7b-aaee-6b348086c50c\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_12.png?alt=media&token=0050e68c-9baa-4ae7-bcb2-6a9ade80bfd6\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_13.png?alt=media&token=d15b6368-f299-46cc-8588-7f2906de7606\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_14.png?alt=media&token=093fd30f-a38f-4874-9654-1123c54d1cdd\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_15.png?alt=media&token=ad13c6ee-9421-41df-96f5-086f6b2451fc\"\n\t\t\t,\"https://firebasestorage.googleapis.com/v0/b/console-trade.appspot.com/o/images%2Ftemp_profile_images%2Ftemp_profile_img_18.png?alt=media&token=703f376c-3e36-4b31-8d6b-0abf852cd9e9\"\n\t\t][opt]\n\t}\n\n\tgetRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/app-auth/app-auth.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Game } from '../../models/game';\nimport { Profile } from '../../models/profile';\nimport { Observable } from 'rxjs';\nimport { C } from '../../config';\nimport * as _ from 'underscore/underscore';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { ToastController } from 'ionic-angular';\n \n\n@Injectable()\nexport class ProfileProvider {\n\t// user : Profile = new Profile(\n\t// \t\"assets/imgs/temp_profile_img_1.png\", \n\t// \t\"Jon Carlo Guiriba\", \n\t// \t\"Quezon City\",\n\t// \t[],\n\t// \t[],[\n\t// \t\t\"ps4\",\"ns\",\"xbox1\"\n\t// \t],[\n\t// \t\t{\n\t// \t\t\tlocation: \"Casa Milan Quezon City\"\n\t// \t\t},\n\t// \t\t{\n\t// \t\t\tlocation: \"St peter chapels novaliches\"\n\t// \t\t},\n\t// \t\t{\n\t// \t\t\tlocation: \"SM fairview quezon city\"\n\t// \t\t},\n\t// \t]\n\t// );\n\n\tuser : Profile;\n\tallListsUpdateTimeout = null\n\twishListUpdateTimeout = null\n\townedListUpdateTimeout = null\n\n  constructor(\n  \tpublic http: HttpClient\n    , public fbapp: FirebaseappProvider\n  \t, public toastCtrl: ToastController\n    ) {\n  \tthis.user = new Profile();\n  }\n\n\taddGameToProfile(fbUser : firebase.User, game : Game, owned : boolean){\n\n    var duplicate = _.find(this.user.wishList, e=>{return e.id === game.id})\n\n    if(!game.platforms) \n      game.platforms = [];\n    // console.log(\"addGamToProfile: \",game)\n    \n    if(duplicate || this.user.wishList.length > 8){\n      \n      let alreadyOwned = _.find(this.user.ownedList, e=>{return e.id === game.id})\n      if(alreadyOwned) return;\n\n      this.user.addToOwnedList(game)\n      this.fbapp.updateUserOwnedList(fbUser, this.user.ownedList)\n    }\n  \telse{\n\n      this.user.addToWishList(game)\n      this.fbapp.updateUserWishList(fbUser, this.user.wishList)\n    }\n\n\n\n\t}\n\n\ttoggleItemList(authUser, item, owned){\n  \tif(owned){\n\t\t\tvar duplicate = _.find(this.user.wishList, e=>{return e.id === item.id});\n\n\t\t\tif(duplicate) return;\n\n    if(this.user.wishList.length > 8) return;\n      this.user.addToWishList(item)\n\t\t\tthis.user.ownedList = _.reject(this.user.ownedList, e=>{ return e.id === item.id});\n  \t}else{\n\t\t\tvar duplicate = _.find(this.user.ownedList, e=>{return e.id === item.id})  \n\t\t\tif(duplicate) return;\n\t\t\t\n    if(this.user.ownedList.length > 8) return;\n\n\t\t\tthis.user.addToOwnedList(item)\n\t\t\tthis.user.wishList = _.reject(this.user.wishList, e=>{ return e.id === item.id});\n\t\t}\n\n  \tthis.startAllListsUpdateTImer(authUser);\n\n  }\n\n  toggleItemPlatform(authUser, item, platform, owned){\n  \tif(_.contains(item.platforms, platform)){\n  \t\titem.platforms = _.reject(item.platforms, el=>{ return el === platform; });\n  \t}else{\n  \t\titem.platforms.push(platform)\n  \t}\n\n  \tif(owned){\n  \t\tthis.startWishListUpdateTImer(authUser);\n  \t}else{\n  \t\tthis.startOwnedListUpdateTImer(authUser);\n  \t}\n\n\n  }\n\n  removeItem(authUser, item, owned){\n\n\n  \tif(owned){\n  \t\tthis.user.ownedList = _.reject(this.user.ownedList, el=>{ return el.id === item.id; });\n  \t\tthis.startOwnedListUpdateTImer(authUser);\n  \t}else{\n  \t\tthis.user.wishList = _.reject(this.user.wishList, el=>{ return el.id === item.id; });\n  \t\tthis.startWishListUpdateTImer(authUser);\n  \t}\n\n\n  }\n\n  isItemMatch(item){\n    for(var wishItem of this.user.wishList){\n      if(wishItem.id === item.id)\n        return true;\n    }\n\n    return false;\n  }\n\n  private startAllListsUpdateTImer(authUser){\n\t\tclearTimeout(this.allListsUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.allListsUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserWishList(authUser, self.user.wishList)\n  \t\tself.fbapp.updateUserOwnedList(authUser, self.user.ownedList)\n  \t},1000)\n  }\n\n\n  private startWishListUpdateTImer(authUser){\n\t\tclearTimeout(this.wishListUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.wishListUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserWishList(authUser, self.user.wishList)\n  \t},1000)\n  }\n\n\n  private startOwnedListUpdateTImer(authUser){\n\t\tclearTimeout(this.ownedListUpdateTimeout)\n\n  \tvar self = this;\n\n  \tthis.ownedListUpdateTimeout = setTimeout( function(){\n  \t\tself.fbapp.updateUserOwnedList(authUser, self.user.ownedList)\n  \t},1000)\n  }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/profile/profile.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { firebaseConfig } from '../config';\nimport { NgxErrorsModule } from '@ultimate/ngxerrors';\n\nimport { TradePage } from '../pages/trade/trade';\nimport { MessagesPage } from '../pages/messages/messages';\nimport { ProfilePage } from '../pages/profile/profile';\nimport { TabsPage } from '../pages/tabs/tabs';\nimport { LoginPage } from '../pages/login/login';\nimport { SignupPage } from '../pages/signup/signup';\nimport { OptionsPage } from '../pages/options/options';\nimport { ChatPage } from '../pages/chat/chat';\nimport { MapPage } from '../pages/map/map';\nimport { DealPage } from '../pages/deal/deal';\nimport { ShopPage } from '../pages/shop/shop';\nimport { CourierPopoverPage } from '../pages/courier-popover/courier-popover';\nimport { ResetpasswordPage } from '../pages/resetpassword/resetpassword';\nimport { AllTradersPage } from '../pages/all-traders/all-traders';\n\n\nimport { AppAuthProvider } from '../providers/app-auth/app-auth';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { AngularFireDatabaseModule, AngularFireDatabase } from 'angularfire2/database';\nimport { IgdbProvider } from '../providers/igdb/igdb';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { HttpClientModule } from '@angular/common/http';\nimport { TradeProvider } from '../providers/trade/trade';\nimport { ProfileProvider } from '../providers/profile/profile';\n\nimport { PipesModule } from '../pipes/pipes.module';\nimport { FirebaseappProvider } from '../providers/firebaseapp/firebaseapp';\nimport { LongPressModule } from 'ionic-long-press';\nimport { UiProvider } from '../providers/ui/ui';\nimport { IonicImageLoader } from 'ionic-image-loader';\nimport { FileTransfer } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { FileChooser } from '@ionic-native/file-chooser';\nimport { ImagePicker } from '@ionic-native/image-picker';\nimport { StorageProvider } from '../providers/storage/storage';\nimport { ImageResizer } from '@ionic-native/image-resizer';\nimport { GooglePlus } from '@ionic-native/google-plus';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { EmailComposer } from '@ionic-native/email-composer';\nimport { MessagesProvider } from '../providers/messages/messages';\nimport { Keyboard } from '@ionic-native/keyboard';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    ChatPage,\n    TradePage,\n    MessagesPage,\n    ProfilePage,\n    LoginPage,\n    SignupPage,\n    OptionsPage,\n    MapPage,\n    DealPage,\n    ShopPage,\n    CourierPopoverPage,\n    ResetpasswordPage,\n    AllTradersPage,\n    TabsPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp, { scrollAssist: false, autoFocusAssist: false }),\n    AngularFireModule.initializeApp(firebaseConfig.web),\n    AngularFireDatabaseModule,\n    HttpClientModule,\n    LongPressModule,\n    PipesModule,\n    IonicImageLoader.forRoot(),\n    NgxErrorsModule,\n    IonicStorageModule.forRoot()\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    ChatPage,\n    TradePage,\n    MessagesPage,\n    ProfilePage,\n    LoginPage,\n    SignupPage,\n    OptionsPage,\n    MapPage,\n    DealPage,\n    ShopPage,\n    CourierPopoverPage,\n    ResetpasswordPage,\n    AllTradersPage,\n    TabsPage\n  ],\n  providers: [\n    // { provide: FirebaseOptionsToken, useValue: firebaseConfig.web },\n    // { provide: FirebaseAppNameToken, useValue: 'stalldata' },\n    // { provide: FirebaseAppConfigToken, useValue: firebaseConfig.web},\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    AngularFireAuth,\n    Geolocation,\n    AngularFireDatabase,\n    AppAuthProvider,\n    HttpClient,\n    IgdbProvider,\n    TradeProvider,\n    ProfileProvider,\n    FirebaseappProvider,\n    UiProvider,\n    FileTransfer,\n    File,\n    FileChooser,\n    ImagePicker,\n    ImageResizer,\n    GooglePlus,\n    EmailComposer,\n    StorageProvider,\n    Keyboard,\n    MessagesProvider\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform, ViewController, Events, LoadingController} from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { AppAuthProvider } from '../providers/app-auth/app-auth';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\nimport { map } from 'rxjs/operators';\nimport { ProfileProvider } from '../providers/profile/profile';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { TradeProvider } from '../providers/trade/trade';\n\nimport { TabsPage } from '../pages/tabs/tabs';\nimport { LoginPage } from '../pages/login/login';\n\ndeclare var cordova:any;\ndeclare var Keyboard: any;\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = null;\n\n  constructor(\n    public platform: Platform\n    ,public  statusBar: StatusBar\n    ,public  splashScreen: SplashScreen\n    ,public  afdb: AngularFireDatabase\n    ,public  auth: AppAuthProvider\n    ,public  profile: ProfileProvider\n    ,public  geolocation: Geolocation\n    , public trade: TradeProvider\n    , public events: Events\n    , public loadCtrl: LoadingController\n    ) {\n\n    platform.ready().then(() => {\n        // Okay, so the platform is ready and our plugins are available.\n        // Here you can do any higher level native things you might need.\n        statusBar.styleDefault();\n        splashScreen.hide();\n\n        \n         auth.afAuth.authState\n          .subscribe(\n            user => {\n\n\n            if (user) {\n              // console.log(\"[fb user]\", user)\n\n              let load = this.loadCtrl.create();\n              load.present();\n              this.auth.user = user;\n              this.rootPage = TabsPage;\n\n              let usersRef : AngularFireList<any>,\n                  users: any;\n\n              this.initProfile(user).then((e)=>{\n                load.dismiss();\n                this.events.publish(\"profile:loaded\")\n              }).catch((res)=>{\n                load.dismiss();\n                this.events.publish(\"profile:loaded\")\n              })\n\n\n            }else {\n              this.rootPage = LoginPage;\n            }\n          },\n          () => {\n            this.rootPage = LoginPage;\n          });\n          \n      });\n      \n  }\n\n  initProfile(user){\n\n    return new Promise( (resolve, reject)=>{\n\n      var userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\n      var userSub = userRef.snapshotChanges().pipe(\n        map(changes => \n          changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n        )\n       ).subscribe((res)=>{\n        // console.log(\"[initProfile]\", res)\n        \n        if(!res[0] || !res[0][\"key\"]){\n          return;\n        } \n\n\n        this.profile.user.profileImage = res[0][\"profileImage\"] || \"assets/imgs/temp_profile_img_1.png\";\n        this.profile.user.first_name = res[0][\"first_name\"] || \"\";\n        this.profile.user.last_name = res[0][\"last_name\"] || \"\";\n        this.profile.user.email = res[0][\"email\"] || \"\";\n        this.profile.user.wishList = res[0][\"wishList\"] || [];\n        this.profile.user.ownedList = res[0][\"ownedList\"] || [];\n        this.profile.user.key = res[0].key || \"\";\n        this.profile.user.conversations = res[0][\"conversations\"] || [];\n        this.profile.user.trade_locations = res[0][\"trade_locations\"] || [];\n        this.profile.user.gender = res[0][\"gender\"] || [];\n\n        // console.log(\">>geolocation \", this.profile.user)\n        this.geolocation.getCurrentPosition({timeout: 20000, enableHighAccuracy: true}).then((geodata) => {\n          userRef.update(res[0][\"key\"], {\n            last_location: {\n              lat:geodata.coords.latitude, \n              long: geodata.coords.longitude\n            }\n          }).then((e)=>{\n            resolve();\n        })\n\n          // console.log(\">>user from component \", this.profile.user)\n          userSub.unsubscribe();\n        }).catch((error) => {\n          reject( console.log('>>Error getting location', error) );\n        });\n      })\n\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { map, take, first } from 'rxjs/operators';\nimport { Message } from '../../models/message';\nimport { Profile } from '../../models/profile';\nimport { UserConversation } from '../../models/userConversation';\nimport * as firebase from 'firebase/app';\nimport { AngularFireDatabase, AngularFireList  } from 'angularfire2/database';\n\n@Injectable()\nexport class FirebaseappProvider {\n\n  constructor(\n  \tpublic http: HttpClient\n\t\t, public afdb: AngularFireDatabase\n\t\t) {\n  }\n\n  getOfferedGames(userKey, conversationKey){\n\t\tvar offeredGamesRef = this.afdb\n\t\t.list(`/conversations/${conversationKey}/deal/${userKey}/offer`)\n\t\t.valueChanges()\n\n\t\treturn offeredGamesRef;\n\n  }\n\n  updateUserProfileImage(userKey, profileImage){\n  \tvar selectedRef = this.afdb.list(`/users/${userKey}/`)\n  \t.set('profileImage',profileImage)\n  }\n\n  updateConversationOffers(userKey, conversationKey, selectedGames){\n    // console.log(\"[FBAPP] updateSelectedGames : \", selectedGames)\n  \tvar selectedRef = this.afdb.list(`/conversations/${conversationKey}/deal/${userKey}/`)\n  \t.set('offer',selectedGames)\n\n  }\n\n  updateUserTradeLocations(userKey, trade_locations){\n  \tvar userRef = this.afdb.list(`/users/${userKey}/`)\n  \t.set('trade_locations',trade_locations);\n  }\n\n\tupdateUserWishList(user, wishList){\n\t\tvar userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\t\tvar userSub = userRef.snapshotChanges().pipe(\n\t\t  map(changes => \n\t\t    changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n\t\t  )\n\t\t).subscribe((res)=>{\n    \t// console.log(\"get user data\", res)\n\t\t\t\t\t\t\n\t\t\tif(!res[0]) return;\n\n\t\t\tvar key = res[0][\"key\"];\n\n\t\t\t// console.log(\"adding to wishlist[\" + key + \"]\", wishList)\n\t\t\t\n\t\t\tuserRef.update(key, {\n\t\t\t\twishList: wishList\n\t\t\t})\n\n\t\t\tuserSub.unsubscribe();\n\t\t})\n\t}\n\n\tupdateUserOwnedList(user, ownedList){\n\t\tvar userRef = this.afdb.list('/users', ref=> ref.orderByChild('email').equalTo(user.email))\n\t\tvar userSub = userRef.snapshotChanges().pipe(\n\t\t  map(changes => \n\t\t    changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n\t\t  )\n\t\t).subscribe((res)=>{\n    \t// console.log(\"get user data\", res)\n\t\t\t\t\t\t\n\t\t\tif(!res[0]) return;\n\n\t\t\tvar key = res[0][\"key\"];\n\n\t\t\t// console.log(\"adding to owned[\" + key + \"]\", ownedList)\n\t\t\t\n\t\t\tuserRef.update(key, {\n\t\t\t\townedList: ownedList\n\t\t\t})\n\n\t\t\tuserSub.unsubscribe();\n\t\t})\n\n\t}\n\n\tgetConversationMessages(key){\n\t\tvar conversationRef = this.afdb\n\t\t.list('/conversations/'+key+\"/messages/\")\n\t\t.valueChanges([\"child_added\"])\n\n\t\treturn conversationRef;\n\n\t}\n\n\tgetTraderConversationKey(trader : Profile, user : Profile){\n\t\t// console.log(\"-fbapp getTraderConversationKey: \", trader.conversations, user.conversations)\n\t\tif(!trader.conversations || !user.conversations){\n\t\t\tconsole.log(\"r\")\n\t\t\treturn;\n\t\t} \t\t\n\n\t\tfor(let u in user.conversations){\n\n\t\t\tfor(let t in trader.conversations){\n\t\t\t\tif(trader.conversations[t].key === user.conversations[u].key)\n\t\t\t\t\treturn user.conversations[u].key;\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateNewThread(trader : Profile, user : Profile, msg){\n\t\t// console.log(\"push convo \" + msg, trader, user)\n\n\t\tvar members = {};\n\t\tmembers[trader.key] = true;\n\t\tmembers[user.key] = true;\n\n\t\tvar message = new Message(msg, user.first_name + \" \" + user.last_name,  user.key, firebase.database.ServerValue.TIMESTAMP)\n\n\t\tvar converRef = this.pushConversation([message], members)\n\t\t\n\t\tuser.conversations = user.conversations ? user.conversations : [];\n\n\t\tvar userConversation = new UserConversation(\n\t\t\tconverRef.key, \n\t\t\ttrader.key,\n\t\t\ttrader.first_name + \" \" + trader.last_name\n\t\t);\n\t\tuser.conversations[converRef.key] = userConversation;\n\n\t\t// console.log(\"uckey:\", user.conversations)\n\n\t\tthis.updateUserConversation(user.key, converRef.key, userConversation)\n\n\t\ttrader.conversations = trader.conversations ? trader.conversations : [];\n\t\tvar traderConversation = new UserConversation(\n\t\t\tconverRef.key, \n\t\t\tuser.key,\n\t\t\tuser.first_name + \" \" + user.last_name,\n\t\t\ttrue\n\t\t);\n\n\t\ttrader.conversations[converRef.key] = traderConversation;\n\n\t\tvar traderConversationKey = this.afdb.list('/users/'+trader.key+'/conversations/').update(converRef.key, traderConversation)\n\n\t\treturn converRef\n\t}\n\n\tupdateUserConversation(userKey, converKey, conversation){\n\t\treturn this.afdb\n\t\t.list('/users/'+userKey+'/conversations/')\n\t\t.update(converKey, conversation)\n\n\t}\n\n\n\tpushConversation(messages, members){\n\n\t\treturn this.afdb.list('/conversations').push({\n\t\t\tmessages: messages,\n\t\t\tmembers: members\n\t\t})\n\t\t\n\t}\n\n\tupdateConversation(key, trader : Profile, user : Profile, msg){\n\t\t// console.log(\"update convo \" + key)\n\t\tlet message = new Message(\n\t\t\tmsg,\n\t\t\tuser.first_name + \" \" + user.last_name,\n\t\t\tuser.key,\n\t\t\tfirebase.database.ServerValue.TIMESTAMP\n\t\t)\n\t\tthis.afdb.list(`/conversations/${key}/messages`).push(message)\n\t\tthis.afdb.list(`/users/${trader.key}/conversations`).update(key,{\"unread\":true})\n\t\t// var conversationSub = this.afdb\n\t\t// .object('/conversations/' + key)\n\t\t// .snapshotChanges()\n\t\t// .subscribe((res)=>{\n\t\t// \ttry{\n\n\t\t// \t\tvar conversation = res.payload.val();\n\t\t\t\t\n\t\t// \t\tif(!conversation) return;\n\t\t\t\t\n\t\t// \t\tconversation[\"messages\"] = conversation[\"messages\"] || [];\n\n\t\t// \t\tvar message = new Message(msg, user.first_name + \" \" + user.last_name, user.key, firebase.database.ServerValue.TIMESTAMP)\n\n\n\t\t// \t\tconversation[\"messages\"].push(message)\n\n\t\t// \t\tthis.afdb.list('/conversations').update(key, {\n\t\t// \t\t\tmessages : conversation[\"messages\"]\n\t\t// \t\t})\n\n\t\t// \t\tconsole.log(\"converRef update: \" , res.payload.val())\n\t\t// \t\tconversationSub.unsubscribe();\n\n\t\t// \t}catch(err){\n\t\t// \t\tconsole.log(\"Error updating conversation \", err)\n\t\t// \t}\n\n\t\t// })\n\t}\n\n\treadConversation(converKey, userKey){\n\t\treturn this.afdb.list(`/users/${userKey}/conversations/`)\n\t\t.update(converKey, {unread:false})\n\t}\n\n\tgetUserConversations(user : Profile, events = null){\n\t\treturn this.afdb\n\t\t\t.list('/users/'+user.key+'/conversations/')\n\t\t\t.snapshotChanges(events)\n\t\t\t.pipe(\n      \tmap(changes => \n        \tchanges.map(c => ({ key: c.payload.key, ...c.payload.val() }))\n      )\n    )\n\t}\n\n\n\tgetProfile(key){\n\t\treturn new Promise((resolve,reject)=>{\n\n\t\t\tvar subscription = this.afdb\n\t\t\t.object('/users/'+key)\n\t\t\t.snapshotChanges()\n\t\t\t.subscribe((res)=>{\n\t\t\t\tresolve(res.payload.val());\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t});\n\n\n\t\t})\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/firebaseapp/firebaseapp.ts","import * as firebase from 'firebase/app';\r\n\r\nexport class Message{\r\n\r\n\ttext: String = \"\";\r\n\tsender: String = \"\";\r\n\tsenderKey: String = \"\";\r\n\tcreatedAt: firebase.database.Database ;\r\n\r\n\tconstructor(\r\n\t\ttext\r\n\t\t, sender\r\n\t\t, senderKey\r\n\t\t, createdAt\r\n\t\t){\r\n\t\tthis.text = text;\t\t\r\n\t\tthis.sender = sender;\t\t\r\n\t\tthis.senderKey = senderKey;\t\t\r\n\t\tthis.createdAt = createdAt;\t\t\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/message.ts","export class UserConversation{\r\n\r\n  public key = \"\";\r\n  public traderKey = \"\";\r\n  public name = \"\";\r\n  public unread;\r\n\r\n\tconstructor(key, traderKey, name, unread = false){\r\n\t\tthis.key = key;\r\n\t\tthis.traderKey = traderKey;\r\n\t\tthis.name = name;\r\n\t\tthis.unread = unread;\r\n  }\r\n \r\n}\t\n\n\n// WEBPACK FOOTER //\n// ./src/models/userConversation.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n@Component({\n  selector: 'page-all-traders',\n  templateUrl: 'all-traders.html',\n})\nexport class AllTradersPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/all-traders/all-traders.ts","import { NgModule } from '@angular/core';\nimport { KeysPipe } from './keys/keys';\nimport { ReplacePipe } from './replace/replace';\nimport { DistancePipe } from './distance/distance';\n@NgModule({\n\tdeclarations: [\n\t\tKeysPipe,\n    ReplacePipe,\n    DistancePipe\n  ],\n\timports: [],\n\texports: [\n\t\tKeysPipe,\n    ReplacePipe,\n    DistancePipe\n  ]\n})\nexport class PipesModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'keys',\n})\nexport class KeysPipe implements PipeTransform {\n  transform(value, args:string[]) : any {\n    let values = [];\n    for (let key in value) {\n      values.push(value);\n    }\n    return values;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/keys/keys.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ReplacePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'replace',\n})\nexport class ReplacePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, ...args) {\n  \tif(!value) return \"\";\n    return value.replace(args[0], args[1]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/replace/replace.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the DistancePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'ceil',\n})\nexport class DistancePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, ...args) {\n    return Math.ceil(parseFloat(value))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/distance/distance.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n/*\n  Generated class for the UiProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class UiProvider {\n\n  constructor(public http: HttpClient) {\n  }\n\n  getRandomProfileImage(){\n \t\treturn 0;\n  }\n\n\n\tgetRandomInt(min, max) {\n\t    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/ui/ui.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events} from 'ionic-angular';\n\nimport { TradePage } from '../trade/trade';\nimport { MessagesPage } from '../messages/messages';\nimport { ProfilePage } from '../profile/profile';\nimport { OptionsPage } from '../options/options';\nimport { DealPage } from '../deal/deal';\nimport { ShopPage } from '../shop/shop';\nimport { AppAuthProvider } from '../../providers/app-auth/app-auth';\nimport { FirebaseappProvider } from '../../providers/firebaseapp/firebaseapp';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { MessagesProvider } from '../../providers/messages/messages';\n\n\n@Component({\n  selector: 'page-tabs',\n  templateUrl: 'tabs.html'\n})\n\n\nexport class TabsPage {\n\n  tab1Root = ProfilePage;\n  tab2Root = TradePage;\n  tab3Root = MessagesPage;\n  tab4Root = DealPage;\n  tab5Root = ShopPage;\n\n  constructor(\n    public navCtrl: NavController\n    , public auth: AppAuthProvider\n    , private fbApp: FirebaseappProvider\n    , private profile: ProfileProvider\n    , private events: Events\n    , private messages: MessagesProvider\n  \t) {\n    this.events.subscribe(\"profile:loaded\",()=>{\n\n      this.messages.loadConversations(this.fbApp)\n\n      // this.fbApp\n      // .getUserConversations(this.profile.user,[\"child_added\"])\n      // .subscribe((res)=>{\n      // })\n    })\n\n  }\n\n  navTo(page){\n  \tthis.navCtrl.push(OptionsPage, {}, {animate:true, direction: 'forward'})\n  }\n\n\n  logout(){\n    this.auth.logout();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","export const firebaseConfig = {\r\n\tweb:{\r\n  \tapiKey: \"AIzaSyCs8fw6B3hdkNBkf9o48V_0sTGhxC1Pg_E\",\r\n\t  authDomain: \"console-trade.firebaseapp.com\",\r\n\t  databaseURL: \"https://console-trade.firebaseio.com\",\r\n\t  projectId: \"console-trade\",\r\n\t  storageBucket: \"console-trade.appspot.com\",\r\n\t  messagingSenderId: \"670922071182\"\r\n\t}\r\n};\r\n\r\nexport const C = {\r\n\tPS4 : \"ps4\",\r\n\tXBOX1 : \"xbox1\",\r\n\tNS : \"ns\",\r\n\tPS4_ID : 48,\r\n\tNS_ID : 130,\r\n\tXBOX1_ID : 49,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.ts"]}